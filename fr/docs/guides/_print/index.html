<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=fr class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=canonical type=text/html href=https://osrd.fr/fr/docs/guides/><link rel=alternate type=application/rss+xml href=https://osrd.fr/fr/docs/guides/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Guides pratiques | OSRD</title>
<meta name=description content="Marches à suivre pour des tâches classiques"><meta property="og:title" content="Guides pratiques"><meta property="og:description" content="Marches à suivre pour des tâches classiques"><meta property="og:type" content="website"><meta property="og:url" content="https://osrd.fr/fr/docs/guides/"><meta itemprop=name content="Guides pratiques"><meta itemprop=description content="Marches à suivre pour des tâches classiques"><meta name=twitter:card content="summary"><meta name=twitter:title content="Guides pratiques"><meta name=twitter:description content="Marches à suivre pour des tâches classiques"><link rel=preload href=/scss/main.min.6a97a232111e8c01d1eed2c4b5cf2d0b180718f96d5c7e5aec2f7e997230ba06.css as=style><link href=/scss/main.min.6a97a232111e8c01d1eed2c4b5cf2d0b180718f96d5c7e5aec2f7e997230ba06.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.3.min.js integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ==" crossorigin=anonymous></script><script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script></head><body class=td-section><header><nav class="td-navbar navbar-dark js-navbar-scroll"><div class="container-fluid flex-column flex-md-row"><a class=navbar-brand href=/fr/><span class="navbar-brand__logo navbar-logo"><svg xmlns="http://www.w3.org/2000/svg" id="svg36" width="110.767" height="22"><style id="style1">.st9{fill:#fff}</style><g id="ok" transform="scale(.1918)"><g id="g36"><g id="g29"><path id="path23" d="M38.5 83.4c-1.9 8.2-2.9 17-2.9 26.5v4.8h16.6c-2.8-13.2-7.8-23.4-13.7-31.3z" class="st9"/><path id="path24" d="M0 57.5v19.9c3.1 1.2 6.3 2.7 9.5 4.6 8.5 5.2 15 12.6 19.4 21.8v-31c-3.4-3-6.9-5.5-10.3-7.5-6.5-3.7-13-6.2-18.6-7.8z" class="st9"/><path id="path25" d="M35.6 69.9c4.3-11.3 10.6-21.1 18.9-29.4V0H35.6z" class="st9"/><path id="path26" d="M40.8 75.4c5.3 6.2 10.1 13.8 13.7 23.3V50.6C48.6 57.8 44 66.1 40.8 75.4z" class="st9"/><path id="path27" d="M100.7.0H61.3v34.5C73.1 25.2 86 20 96.9 17.2c1.8-.5 3.7.6 4.1 2.4.5 1.8-.6 3.6-2.4 4.1-11.4 2.9-25.3 8.6-37.2 19.7v31.8c2.9-6.3 6.7-11.7 11.4-16.4 9.4-9.3 21-14.1 30.5-16.6 1.8-.5 3.7.6 4.1 2.4.5 1.8-.6 3.6-2.4 4.1-4.7 1.2-10.1 3.1-15.3 6-19 10.3-28.2 28.4-28.2 55.2v4.8h39.3c7.8.0 14.1-6.3 14.1-14.1V14.1C114.7 6.3 108.4.0 100.7.0z" class="st9"/><path id="path28" d="M22 59.6c2.2 1.3 4.5 2.8 6.8 4.6V0H14.1C6.3.0.0 6.3.0 14.1v36.4c6.5 1.7 14.2 4.5 22 9.1z" class="st9"/><path id="path29" d="M5.4 87.5c-1.8-1.1-3.6-2-5.4-2.8v15.9c0 7.8 6.3 14.1 14.1 14.1h11.6c-3.6-12.2-10.4-21.3-20.3-27.2z" class="st9"/></g><g id="g30"><path id="path30" d="M201.7 109c-30.8.0-53.7-21.2-53.7-52.5.0-31.7 22.9-51.6 53.7-51.6 31 0 53.9 20 53.9 51.6-.1 31.3-23 52.5-53.9 52.5zm0-82.6c-16.7.0-28.2 12.8-28.2 30.1.0 17.9 11.6 30.7 28.2 30.7S230 74.4 230 56.6c0-17.3-11.6-30.2-28.3-30.2z" class="st9"/></g><g id="g32"><g id="g31"><path id="path31" d="M334.3 33.3c-4-5.2-11.4-8.5-17.6-8.5-6.2.0-13.8 2.1-13.8 9.9.0 6.6 5.9 8.7 15.2 11.6 13.4 4.3 30.7 10 30.7 29.7.0 22.7-18.3 32.9-37.8 32.9-14.1.0-28.3-5.2-37-14.2l15.6-15.9c4.7 6 13.5 10.5 21.3 10.5 7.3.0 13.7-2.8 13.7-10.7.0-7.5-7.5-9.9-20.5-14.1C291.6 60.3 279 53.9 279 36c0-21.9 19.8-31 38.2-31 11.2.0 23.7 4.2 32.4 12.1z" class="st9"/></g></g><g id="g34"><g id="g33"><path id="path32" d="m433.1 106.4-21.3-39.2h-8.1v39.2h-23.4V7.6H418c19 0 37.8 7.3 37.8 29.9.0 13.3-7.8 22.7-20.5 26.6l25.8 42.3zm-16.9-79.6h-12.7v23h11.3c7.7.0 17.3-2 17.3-12 0-9.2-8.7-11-15.9-11z" class="st9"/></g></g><g id="g35"><path id="path34" d="M522.2 106.4h-36.8V7.6H521c28 0 56.5 11.7 56.5 49.1.0 34.7-28.1 49.7-55.3 49.7zm-1.7-78.5h-11.9v57.8h11.3c17 0 32.8-7 32.8-29 0-22.2-15.8-28.8-32.2-28.8z" class="st9"/></g></g></g></svg></span><span class=navbar-brand__name>OSRD</span></a><div class="td-navbar-nav-scroll ms-md-auto" id=main_navbar><ul class=navbar-nav><li class=nav-item><a class=nav-link href=/fr/about/><span>À propos</span></a></li><li class=nav-item><a class="nav-link active" href=/fr/docs/><span>Documentation</span></a></li><li class=nav-item><a class=nav-link href=/fr/blog/><span>Blog</span></a></li><li class="nav-item dropdown d-none d-lg-block"><div class=dropdown><a class="nav-link dropdown-toggle" href=# role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false>Français</a><ul class=dropdown-menu><li><a class=dropdown-item href=/en/docs/guides/>English</a></li></ul></div></li></ul></div><div class="d-none d-lg-block"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder=Rechercher aria-label=Rechercher autocomplete=off data-offline-search-index-json-src=/offline-search-index.2cb13e7bbc127ab9b72dd046e8708004.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>Version imprimable multipages.
<a href=# onclick="return print(),!1">Cliquer ici pour imprimer</a>.</p><p><a href=/fr/docs/guides/>Retour à la version par défaut</a>.</p></div><h1 class=title>Guides pratiques</h1><div class=lead>Marches à suivre pour des tâches classiques</div><ul><li>1: <a href=#pg-d15f2fe4998ef00156d730fe852f9a26>Contribuer à OSRD</a></li><ul><li>1.1: <a href=#pg-31a89538caa038f0d01ee6c6a8862c0d>Avant toutes choses</a></li><li>1.2: <a href=#pg-4f9bf02b817699600b9459c28866f49f>Licence et mise en place</a></li><li>1.3: <a href=#pg-f947cac33cc610c73e532b77f01d00b8>Contribuer au code</a></li><ul><li>1.3.1: <a href=#pg-b3865e3b665eac02431c0e1a2b49dbde>Principes généraux</a></li><li>1.3.2: <a href=#pg-28c5c56e84e8a12ef3e3824e0c15eda3>Conventions back-end</a></li><li>1.3.3: <a href=#pg-14c3b96b1f8a7ac7ac971afe801849db>Conventions front-end</a></li><li>1.3.4: <a href=#pg-baa7dfe57fa41f763127154fe6dc4e7b>Écrire du code</a></li><li>1.3.5: <a href=#pg-80dcad7e2ed14ec6eb09c46a711ae15f>Style des commits</a></li><li>1.3.6: <a href=#pg-6334dadf8018c47abf554cd3015be6bd>Partagez vos changements</a></li><li>1.3.7: <a href=#pg-c9ed9175ac241f91b9cc8c4412a1e488>Tests</a></li></ul><li>1.4: <a href=#pg-f29e34723cf01ba920bd21548bdf1c2e>Revue de code</a></li><li>1.5: <a href=#pg-987ae2aead487e6aad8654531bf0e679>Signaler des problèmes</a></li><li>1.6: <a href=#pg-a6b5ed2313c4aa287c4250d8f8de644d></a></li></ul><li>2: <a href=#pg-a7477eb2cac20a1a28f231b721e007c4>Déployer OSRD</a></li><ul><li>2.1: <a href=#pg-d98b9298aa16e9c1e5843fabc1ffaf57>Docker Compose</a></li><ul></ul><li>2.2: <a href=#pg-451841523141af64d1cb529ab5abd2ae>Kubernetes avec Helm</a></li><ul></ul></ul><li>3: <a href=#pg-039d53e90f0ffa3df56e680b1c43ff0d>Le design d'OSRD</a></li><li>4: <a href=#pg-0ca426c482c7385f8680e30bae2a99d6>Le logo</a></li></ul><div class=content><p>Les guides pratiques sont des marches à suivre. Vous êtes guidés pas-à-pas dans la résolution de problèmes, ou dans des scénarios classiques. Les connaissances requises sont plus élevées que pour les tutoriels, et le fonctionnement d&rsquo;OSRD doit être compris.</p></div></div><div class=td-content><h1 id=pg-d15f2fe4998ef00156d730fe852f9a26>1 - Contribuer à OSRD</h1><div class=lead>Comment apporter sa pierre à l&rsquo;édifice</div></div><div class=td-content><h1 id=pg-31a89538caa038f0d01ee6c6a8862c0d>1.1 - Avant toutes choses</h1><div class=lead>Quelques premières informations importantes.</div><p>Déjà, merci de prendre le temps de contribuer !</p><p>Si les sections suivantes forment un guide du contributeur, ce n&rsquo;est pas pour autant un ensemble de règles strictes. En fait, si vous avez déjà contribué à des gros projets opensource, la suite ne sera pas surprenante. Dans le cas contraire, elle vous sera probablement très utile !</p><h3 id=communiquer>Communiquer</h3><p>Vous pouvez gagner du temps en discutant de votre projet de contribution avec les autres contributeurs :</p><ul><li><a href=https://github.com/osrd-project/osrd/issues/new/choose><strong>Créez une issue</strong></a> pour avoir un endroit un discuter de votre contribution.</li></ul><h3 id=se-renseigner>Se renseigner</h3><p>Comme dans tout projet, chaque changement se repose sur ce qui a été fait par le passé.
Avant d&rsquo;apporter un changement, renseignez-vous sur l&rsquo;existant :</p><ul><li>Vous pouvez <a href=https://osrd.fr/fr/docs/>lire la documentation technique</a></li><li>Il est préférable de lire le code source de l&rsquo;application en rapport avec votre projet</li><li>Vous pouvez contacter les derniers développeurs à avoir travaillé sur les zones du code en rapport avec votre projet</li></ul><p><em><a href=https://osrd.fr/fr/docs/guides/contribute/license-and-set-up/>Continuer vers la mise en place ‣</a></em></p></div><div class=td-content style=page-break-before:always><h1 id=pg-4f9bf02b817699600b9459c28866f49f>1.2 - Licence et mise en place</h1><div class=lead>Comment mettre en place l&rsquo;environnement de développement ? Qu&rsquo;implique notre licence ?</div><h2 id=la-licence-des-contributions-de-code>La licence des contributions de code</h2><p>Tout le code du dépot OSRD est mis à disposition sous <a href=https://choosealicense.com/licenses/lgpl-3.0/>la licence LGPLv3</a>.
En contribuant du code, vous acceptez la redistribution de votre contribution sous cette license.</p><p>La licence LGPL interdit de modifier OSRD sans publier le code source de l&rsquo;application modifiée : profitez du travail des autres, et laissez les autres profiter de votre travail !</p><p>Cette contrainte n&rsquo;est pas contagieuse à travers les API : Il est possible d&rsquo;utiliser OSRD comme bibliothèque, framework ou serveur pour s&rsquo;interfacer avec des composants propriétaires. N&rsquo;hésitez pas à proposer des changements pour répondre à vos besoins.</p><h2 id=mise-en-place>Mise en place</h2><div class="alert alert-info" role=alert>La plupart des développeurs OSRD utilisent Linux (y compris <a href=https://learn.microsoft.com/fr-fr/windows/wsl/>WSL</a>). Vous pouvez utiliser Windows ou MacOS, mais pourriez rencontrer quelques problèmes.</div><h3 id=obtenir-le-code-source>Obtenir le code source</h3><ul><li>Installer <a href=https://git-scm.com/><code>git</code></a><sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup></li><li>Ouvrir un terminal<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup> dans le dossier qui contiendra le code source d&rsquo;OSRD</li><li><code>git clone git@github.com:osrd-project/osrd</code></li></ul><h3 id=lancer-lapplication>Lancer l&rsquo;application</h3><p>Grâce à <code>docker</code>, on peut facilement compiler, configurer, et lancer les différents composants après un changement. On peut aussi choisir de lancer seulement une partie des composants.</p><ul><li>Installer <code>docker</code> <sup id=fnref1:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> <sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup>.</li><li>Suivre le <a href=https://github.com/osrd-project/osrd#getting-started>README d&rsquo;OSRD</a>.</li></ul><p><em><a href=https://osrd.fr/fr/docs/guides/contribute/contribute-code/>Continuer vers la contribution au code ‣</a></em></p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>Sous Linux, suivez les guides pour votre distribution dans la <a href=https://docs.docker.com/engine/install/>documentation de Docker</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a>&#160;<a href=#fnref1:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p>Sous Windows, ouvrez <code>Git Bash</code>&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p>Sous Windows/<a href=https://learn.microsoft.com/fr-fr/windows/wsl/tutorials/wsl-containers>WSL</a>, <a href=https://www.docker.com/products/docker-desktop/>Docker Desktop</a> est recommandé&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><div class=td-content style=page-break-before:always><h1 id=pg-f947cac33cc610c73e532b77f01d00b8>1.3 - Contribuer au code</h1><div class=lead>Apporter des modifications au code d&rsquo;OSRD</div><p>Ce chapitre décrit le processus aboutissant à l&rsquo;intégration de code au sein du projet. <strong>Si vous avez besoin d&rsquo;aide, ouvrez une issue ou envoyez un message instantané.</strong></p><p>L&rsquo;application OSRD est divisée en plusieurs services écrits dans plusieurs langues. Nous essayons de suivre les bonnes pratiques générales en matière de code et de respecter les spécificités de chaque langage lorsque cela est nécessaire.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-b3865e3b665eac02431c0e1a2b49dbde>1.3.1 - Principes généraux</h1><div class=lead>À lire en premier !</div><ul><li>Expliquez ce que vous faites et pourquoi.</li><li>Documentez le nouveau code.</li><li>Ajoutez des tests clairs et simples.</li><li>Décomposez le travail en morceaux intelligibles.</li><li>Prenez le temps de choisir de bons noms.</li><li>Évitez les abréviations peu connues.</li><li><strong>Contrôle et cohérence de la réutilisation du code de tiers</strong> : une dépendance est ajoutée seulement si elle est absolument nécessaire.</li><li>Chaque dépendance ajoutée diminue notre autonomie et notre cohérence.</li><li>Nous essayons de limiter à un petit nombre les PRs de mise à jour des dépendances chaque semaine
dans chaque composant, donc regrouper les montées de version dans une même PR est une bonne option
(reportez-vous au <code>README.md</code> de chaque composant).</li><li><strong>Ne pas réinventer la roue</strong> : en opposition au point précédent, ne réinventez pas tout à tout prix.</li><li>S&rsquo;il existe une dépendance dans l&rsquo;écosystème qui est le standard « de facto », nous devrions fortement envisager de l&rsquo;utiliser.</li><li>Plus de code et de recommandations générales dans le dépôt principal <a href=https://github.com/osrd-project/osrd/blob/dev/CONTRIBUTING.md>CONTRIBUTING.md</a>.</li><li>Demandez toute l&rsquo;aide dont vous avez besoin !</li></ul><p><em><a href=https://osrd.fr/fr/docs/guides/contribute/contribute-code/backend-conventions/>Consulter les conventions pour le back-end ‣</a></em></p><p><em><a href=https://osrd.fr/fr/docs/guides/contribute/contribute-code/frontend-conventions/>Consulter les conventions pour le front-end ‣</a></em></p><p><em><a href=https://osrd.fr/fr/docs/guides/contribute/contribute-code/write-code/>Continuer vers l&rsquo;écriture de code ‣</a></em></p><p><em><a href=https://osrd.fr/fr/docs/guides/contribute/contribute-code/tests/>Continuer vers l&rsquo;écriture de tests ‣</a></em></p></div><div class=td-content style=page-break-before:always><h1 id=pg-28c5c56e84e8a12ef3e3824e0c15eda3>1.3.2 - Conventions back-end</h1><div class=lead>Conventions de codes et bonnes pratiques pour le back-end</div><h1 id=python>Python</h1><p>Le code Python est utilisé pour certains paquets et pour les tests d&rsquo;intégration.</p><ul><li>Suivez le <a href=https://www.python.org/dev/peps/pep-0020/>Zen of Python</a>.</li><li>Le code est linté avec <a href=https://github.com/csachs/pyproject-flake8>flake8</a>.</li><li>Le code est formaté avec <a href=https://github.com/psf/black>Black</a>.</li><li>Les imports sont triées avec <a href=https://github.com/PyCQA/isort>Isort</a>.</li><li>Les tests sont écrits avec <a href=https://docs.pytest.org/>pytest</a>.</li><li>Les types sont vérifiés avec <a href=https://google.github.io/pytype/>pytype</a>.</li></ul><h1 id=rust>Rust</h1><ul><li>Comme référence pour le développement de notre API, nous utilisons les <a href=https://rust-lang.github.io/api-guidelines/about.html>Rust API guidelines</a>.
D&rsquo;une manière générale, il convient de les respecter.</li><li>Préférer les importations granulaires aux importations globales comme <code>diesel::*</code>.</li><li>Les tests sont écrits avec le <a href=https://doc.rust-lang.org/book/ch11-01-writing-tests.html>framework de base</a>.</li><li>Utilisez l&rsquo;<a href=https://doc.rust-lang.org/rust-by-example/meta/doc.html>exemple de documentation</a> pour savoir comment formuler et formater votre documentation.</li><li>Utilisez un style de commentaire cohérent :<ul><li><code>///</code> les commentaires de la documentation sont au-dessus des invocations <code>#[derive(Trait)]</code>.</li><li>Les commentaires <code>//</code> doivent généralement être placés au-dessus de la ligne en question, plutôt qu&rsquo;en ligne.</li><li>Les commentaires commencent par des lettres majuscules.
Terminez-les par un point s&rsquo;ils ressemblent à une phrase.</li></ul></li><li>Utilisez les commentaires pour organiser des portions de code longues et complexes qui ne peuvent être raisonnablement remaniées en fonctions distinctes.</li><li>Le code est linté avec <a href=https://github.com/rust-lang/rust-clippy>clippy</a>.</li><li>Le code est formaté avec <a href=https://github.com/rust-lang/rustfmt>fmt</a>.</li></ul><h1 id=java>Java</h1><ul><li>Le code est formaté avec <a href=https://checkstyle.sourceforge.io/>checkstyle</a>.</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-14c3b96b1f8a7ac7ac971afe801849db>1.3.3 - Conventions front-end</h1><div class=lead>Conventions de codes et bonnes pratiques pour le front-end</div><p>Nous utilisons <strong>ReactJS</strong> et tous les fichiers doivent être écrits en <strong>Typescript</strong>.</p><p>Le code est <em>linté</em> avec <a href=https://eslint.org/>eslint</a>, et <strong>formaté</strong> avec <a href=https://prettier.io/>prettier</a>.</p><h2 id=nomenclature>Nomenclature</h2><p><img src=/images/docs/contribute/nomenclature-front-end.svg alt="Diagramme de l&rsquo;Infrastructure"></p><p>Les <strong>applications</strong> (osrd eex, osrd stdcm, éditeur infra, éditeur matériel) proposent des <strong>vues</strong> (gestion des projets, gestions des études, etc.) liées à des <strong>modules</strong> (projet, étude, etc.) qui contiennent les composants.</p><p>Ces <strong>vues</strong> sont constituées de <strong>composants</strong> et sous-composants <u>tous issus des modules</u>.
En plus de contenir les fichiers de <strong>vues</strong> des applications, elles peuvent contenir un répertoire <strong>scripts</strong> qui propose des scripts liés à ces vues. Les <strong>vues</strong> déterminent la logique et l&rsquo;<u>accès au store</u>.</p><p>Les <strong>modules</strong> sont des collections de <strong>composants</strong> rattachés à un <strong>objet</strong> (un scénario, un matériel roulant, un TrainSchedule). Ils contiennent :</p><ul><li>un répertoire <em>components</em> qui héberge <u>tous</u> les composants</li><li>un répertoire <em>styles</em> optionnel <u>par module</u> pour le style des composants en scss</li><li>un répertoire <em>assets</em> optionnel <u>par module</u> (qui contient les assets, de jeux de données par défaut par ex, spécifiques au module)</li><li>un fichier <em>reducers</em> optionnel <u>par module</u></li><li>un fichier <em>types</em> optionnel <u>par module</u></li><li>un fichier <em>consts</em> optionnel <u>par module</u></li></ul><p>Un répertoire <strong>assets</strong> (qui contient les images et autre fichiers).</p><p>Enfin, un répertoire <strong>common</strong> qui propose :</p><ul><li>un répertoire <em>utils</em> pour les fonctions utilitaires communes à l&rsquo;ensemble du projet</li><li>un fichier <em>types</em> pour les types communs à l&rsquo;ensemble du projet</li><li>un fichier <em>consts</em> pour les constantes communes à l&rsquo;ensemble du projet</li></ul><h2 id=principes-dimplémentation>Principes d&rsquo;implémentation</h2><h3 id=routage--slug>Routage & SLUG</h3><p><em>Rédaction en cours</em></p><p><code>projects/{nom du projet}/studies/{nom de l'étude}/scenarios/{nom du scenario}</code></p><h3 id=styles--scss>Styles & SCSS</h3><blockquote><p>ATTENTION : en CSS/React, le scope d&rsquo;une classe ne dépend pas de l&rsquo;endroit où le fichier est importé mais est valide pour toute l&rsquo;application. Si vous importez un fichier <code>scss</code> au fin fond d&rsquo;un composant (ce que nous déconseillons fortement par ailleurs), ses classes seront disponibles pour toute l&rsquo;application et peuvent donc provoquer des effets de bord. Vous pouvez utiliser les CSS modules pour éviter les conflits.</p></blockquote><p>Il est donc très recommandé de pouvoir facilement suivre l&rsquo;arborescence des applications, vues, modules et composants également au sein du code SCSS, et notamment imbriquer les noms de classes pour éviter les effets de bord, le compilateur se chargera de fabriquer la hiérarchie nécessaire.</p><p>Si par exemple nous avons un composant <code>rollingStockSelector</code> qui propose une liste de matériel <code>rollingStockList</code> représentés par des cartes <code>rollingStockCard</code> contenant une image représentant le matériel roulant <code>rollingStockImg</code> nous devrions avoir la structure SCSS suivante :</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scss data-lang=scss><span style=display:flex><span><span style=color:#000>.rollinStockSelector</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>.rollingStockList</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>.rollingStockCard</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#000>.rollingStockImg</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#c4a000>width</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#204a87;font-weight:700>rem</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>        <span style=color:#c4a000>height</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#ce5c00>auto</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>Ainsi, on a la garantie que l&rsquo;image contenue dans la carte de matériel roulant héritera bien des bonnes propriétés css <code>.rollinStockSelector.rollingStockList.rollingStockCard.rollingStockImg</code>.</p><h4 id=css-modules>CSS Modules</h4><p>Les CSS modules permettent de scoper les styles CSS à un composant spécifique, évitant ainsi les conflits de noms de classe globaux.</p><p>Vite prend en charge nativement les CSS modules. Assurez-vous que votre fichier CSS a l&rsquo;extension <code>.module.css</code>. Par exemple, <code>styles.module.css</code>.</p><h5 id=utilisation-des-css-modules-dans-les-composants>Utilisation des CSS modules dans les composants</h5><ol><li><strong>Créez un fichier SCSS avec l&rsquo;extension <code>.module.scss</code></strong> :</li></ol><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span><span style=color:#8f5902;font-style:italic>/* MyComponent.module.scss */</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>.</span><span style=color:#000>container</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>background-color</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>white</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>.</span><span style=color:#000>title</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>font-size</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>24</span><span style=color:#204a87;font-weight:700>px</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>color</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>#333</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><ol start=2><li><strong>Utilisez les classes dans votre composant React</strong> :</li></ol><p>Vite transforme les classes en objets qui contiennent les classes hashées (exemple <code>_container_h3d8bg</code>) et les utilise au moment de la génération du bundle, rendant ainsi les classes uniques.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>React</span> <span style=color:#204a87;font-weight:700>from</span> <span style=color:#4e9a06>&#34;react&#34;</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>styles</span> <span style=color:#204a87;font-weight:700>from</span> <span style=color:#4e9a06>&#34;./MyComponent.module.scss&#34;</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>export</span> <span style=color:#204a87;font-weight:700>function</span> <span style=color:#000>MyComponent() {</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>div</span> <span style=color:#c4a000>className</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000;font-weight:700>{</span><span style=color:#000>styles</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>container</span><span style=color:#000;font-weight:700>}&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>h1</span> <span style=color:#c4a000>className</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000;font-weight:700>{</span><span style=color:#000>styles</span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;title&#34;</span><span style=color:#000;font-weight:700>]}&gt;</span><span style=color:#000>Mon</span> <span style=color:#000>Titre</span><span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>h1</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>div</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>Pour plus d&rsquo;information, vous pouvez regarder la <a href=https://vitejs.dev/guide/features.html#css-modules>documentation</a> de vite.js</p><h4 id=noms-de-classes-utilisation-de-cx>Noms de classes, utilisation de <code>cx()</code></h4><p>Les classes sont ajoutées les unes à la suite des autres, normalement, dans la propriété <code>className=""</code>.</p><p>Cependant, quand cela est nécessaire — tests pour l&rsquo;utilisation d&rsquo;une classe, concaténation, etc. — nous utilisons la bibliothèque <a href=https://github.com/JedWatson/classnames>classnames</a> qui préconise l&rsquo;usage suivant :</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>div</span> <span style=color:#c4a000>className</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;rollingStockSelector&#34;</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>div</span> <span style=color:#c4a000>className</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;rollingStockList&#34;</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>div</span> <span style=color:#c4a000>className</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;rollingStockCard w-100 my-2&#34;</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>img</span>
</span></span><span style=display:flex><span>        <span style=color:#c4a000>className</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000;font-weight:700>{</span><span style=color:#000>cx</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;rollingStockImg&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;m-2&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;p-1&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;bg-white&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>          <span style=color:#000>valid</span>: <span style=color:#204a87;font-weight:700>isValid</span><span style=color:#000;font-weight:700>(),</span>
</span></span><span style=display:flex><span>          <span style=color:#000>selected</span>: <span style=color:#204a87;font-weight:700>rollingStockID</span> <span style=color:#ce5c00;font-weight:700>===</span> <span style=color:#000>selectedRollingStockID</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>})}</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>div</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>div</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>div</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span></code></pre></div><p>Les classes sont <strong>séparées</strong> chacune dans un <code>string</code> et les opérations booléennes ou autres sont réalisées dans un objet qui retournera — ou pas — le nom de propriété comme nom de classe à utiliser dans le CSS.</p><h3 id=storeredux>Store/Redux</h3><p>Tout ce qui est <em>selector</em> est géré par la <strong>vue</strong> et passé en props aux composants et sous-composants.</p><p>Par conséquent les appels au store en lecture et en écriture doivent être passés un niveau de la vue, en irrigant par des <em>props</em> et <em>states</em> les composants proposées par la vue.</p><h3 id=rtk>RTK</h3><p>Utiliser les endpoints générés à partir des fichiers <code>openapi.yaml</code> pour consommer le backend.</p><h4 id=fonctionnement-du-cache-dans-rtk-query>Fonctionnement du cache dans RTK Query</h4><p>Lorsque de la donnée est récupérée depuis le back, RTK va mettre cette donnée en cache dans le store. Si le même endpoint est appelé avec les même paramètres, RTK va réutiliser la donnée dans le cache plutôt que de rappeler le back.</p><p>Dans le store, vous verrez cette clé <code>editoastApi</code> qui contient la donnée en cache de tous les endpoints editoast :</p><p><img src=/images/docs/contribute/store-redux-main.png alt="store Redux"></p><p>Ici par exemple l’endpoint <code>getProjects</code> a été appelé.</p><p>RTK stocke le nom de l’endpoint, ainsi que les paramètres d’appel, pour former une clé unique <code>nomDuEndpoint({ paramètres })</code>. (ici <code>getProjects({"ordering":"LastModifiedDesc","pageSize":1000})</code>).</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#4e9a06>&#39;getProjectsByProjectIdStudiesAndStudyId({&#34;projectId&#34;:13,&#34;studyId&#34;:16})&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>status</span> <span style=color:#ce5c00;font-weight:700>:</span><span style=color:#4e9a06>&#34;fulfilled&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#000>etc</span><span style=color:#a40000>…</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>  <span style=color:#4e9a06>&#39;getProjectsByProjectIdStudiesAndStudyId({&#34;projectId&#34;:13,&#34;studyId&#34;:14})&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#a40000>…</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>Dans ce deuxième exemple, le même endpoint a été appelé avec le même paramètre <code>projectId</code>, mais un paramètre <code>studyId</code> différent.</p><h5 id=sérialisation-des-clés-dans-le-cache>Sérialisation des clés dans le cache</h5><p>Les string utilisées comme clé dans le cache sont à peu de choses près l’objet paramètre passé à la moulinette <code>JSON.stringify</code> que transforme un object JS en string (donc sérialisé).</p><p>Normalement La sérialisation ne conserve pas l’ordre des clés des objets. Par exemple, <code>JSON.stringify</code> ne produira pas la même string avec ces deux objets: <code>{ a: 1, b: 2 }</code> et <code>{ b: 2, a: 1 }</code>.</p><p>RTK va optimiser la mise en cache en faisant en sorte que le résultat d’un appel avec <code>{"projectId":13,"studyId":16}</code> ou <code>{"studyId":16, "projectId":13}</code> soient stockées dans la même clé dans le cache.</p><p>Pour voir le fonctionnement en détail, voici le code de cette fonction de sérialisation :</p><details><summary>Fonction de sérialisation RTK</summary><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>defaultSerializeQueryArgs</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>SerializeQueryArgs</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>any</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>({</span>
</span></span><span style=display:flex><span>    <span style=color:#000>endpointName</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#000>queryArgs</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>})</span> <span style=color:#000;font-weight:700>=&gt;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>let</span> <span style=color:#000>serialized</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#39;&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>cached</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>cache</span><span style=color:#ce5c00;font-weight:700>?</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>queryArgs</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>typeof</span> <span style=color:#000>cached</span> <span style=color:#ce5c00;font-weight:700>===</span> <span style=color:#4e9a06>&#39;string&#39;</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#000>serialized</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>cached</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span> <span style=color:#204a87;font-weight:700>else</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>stringified</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>JSON</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>stringify</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>queryArgs</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>value</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>=&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#000>isPlainObject</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>value</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>          <span style=color:#ce5c00;font-weight:700>?</span> <span style=color:#204a87>Object</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>keys</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>value</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>              <span style=color:#000;font-weight:700>.</span><span style=color:#000>sort</span><span style=color:#000;font-weight:700>()</span> <span style=color:#8f5902;font-style:italic>// les clés sont remises dans l’ordre ici
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>              <span style=color:#000;font-weight:700>.</span><span style=color:#000>reduce</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>any</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000;font-weight:700>((</span><span style=color:#000>acc</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>=&gt;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                <span style=color:#000>acc</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>value</span> <span style=color:#000>as</span> <span style=color:#000>any</span><span style=color:#000;font-weight:700>)[</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>acc</span>
</span></span><span style=display:flex><span>              <span style=color:#000;font-weight:700>},</span> <span style=color:#000;font-weight:700>{})</span>
</span></span><span style=display:flex><span>          <span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>value</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>isPlainObject</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>queryArgs</span><span style=color:#000;font-weight:700>))</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>cache</span><span style=color:#ce5c00;font-weight:700>?</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>set</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>queryArgs</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>stringified</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>      <span style=color:#000>serialized</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>stringified</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// Sort the object keys before stringifying, to prevent useQuery({ a: 1, b: 2 }) having a different cache key than useQuery({ b: 2, a: 1 })
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#4e9a06>`</span><span style=color:#4e9a06>${</span><span style=color:#000>endpointName</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>(</span><span style=color:#4e9a06>${</span><span style=color:#000>serialized</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>)`</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div></details><h5 id=souscriptions-à-la-donnée>Souscriptions à la donnée</h5><p>Dans la terminologie de RTK query, Lorsqu’un composant react appelle un endpoint défini dans RTK Query, il <em>souscrit</em> à la donnée.</p><p>RTK compte le nombre de référence à la même paire (endpoint,{paramètres}). Lorsque deux composants souscrivent à la même donnée. Ils partagent la même clé dans le cache.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>osrdEditoastApi</span> <span style=color:#000;font-weight:700>}</span> <span style=color:#204a87;font-weight:700>from</span> <span style=color:#4e9a06>&#34;./api.ts&#34;</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>function</span> <span style=color:#000>Component1() {</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// component subscribes to the data
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>data</span> <span style=color:#000;font-weight:700>}</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>osrdEditoastApi</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>useGetXQuery</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>div</span><span style=color:#000;font-weight:700>&gt;...&lt;/</span><span style=color:#204a87;font-weight:700>div</span><span style=color:#000;font-weight:700>&gt;;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>function</span> <span style=color:#000>Component2() {</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// component subscribes to the data
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>data</span> <span style=color:#000;font-weight:700>}</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>osrdEditoastApi</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>useGetXQuery</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>div</span><span style=color:#000;font-weight:700>&gt;...&lt;/</span><span style=color:#204a87;font-weight:700>div</span><span style=color:#000;font-weight:700>&gt;;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>function</span> <span style=color:#000>Component3() {</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// component subscribes to the data
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>data</span> <span style=color:#000;font-weight:700>}</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>osrdEditoastApi</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>useGetXQuery</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>div</span><span style=color:#000;font-weight:700>&gt;...&lt;/</span><span style=color:#204a87;font-weight:700>div</span><span style=color:#000;font-weight:700>&gt;;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>function</span> <span style=color:#000>Component4() {</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// component subscribes to the *same* data as ComponentThree,
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#8f5902;font-style:italic>// as it has the same query parameters
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>data</span> <span style=color:#000;font-weight:700>}</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>osrdEditoastApi</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>useGetXQuery</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>div</span><span style=color:#000;font-weight:700>&gt;...&lt;/</span><span style=color:#204a87;font-weight:700>div</span><span style=color:#000;font-weight:700>&gt;;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>Ici <code>Component3</code> et <code>Component4</code> ne vont générer qu’un seul appel vers le back. Ils souscrivent à la même donnée (même endpoint et même paramètre <code>3</code>). Ils vont partager la même clé dans le cache.</p><p>Au total ici il y aura trois appels vers le back, avec les paramètres <code>1</code>, <code>2</code>, <code>3</code>.</p><p>Tant qu’il existe au moins un composant react monté, qui appelle le hook <code>osrdEditoastApi.endpoints.getProjectsByProjectId.useQuery</code> par exemple, la donnée sera conservée dans le cache.</p><p>Dès que le dernier composant est démonté, la donnée est supprimée du cache au bout de 60 secondes (valeur par défaut).</p><h3 id=traduction-de-lapplication>Traduction de l&rsquo;application</h3><p>La traduction de l&rsquo;application est effectuée sur <a href=https://explore.transifex.com/osrd/osrd/>Transifex</a>. La langue par défaut est le français.
A noter que si l&rsquo;on doit corriger une traduction, il est recommandé de passer par Transifex. En revanche, si on ajoute une nouvelle clé de traduction, celle-ci peut être ajoutée dans le code directement, dans toutes les langues disponibles.</p><h2 id=lois-et-éléments-importants>Lois et éléments importants</h2><h4 id=aucun-composant-ne-doit-détenir-la-responsabilité-de-mise-à-jour-de-la-donnée-quil-utilise>Aucun composant ne doit détenir la responsabilité de mise à jour de la donnée qu&rsquo;il utilise</h4><p>Seules <u>les vues</u> contiennent les sélecteurs du store, donnés ensuite en props aux composants du module lié à la vue.</p><h4 id=le-scss-nest-pas-scopé>Le SCSS n&rsquo;est pas scopé</h4><p>Un fichier <code>.scss</code> enfoui dans l&rsquo;arborescence ne vous garantit pas que les classes contenues soient seulement accessibles à cet endroit, y compris par import react (formellement interdit au passage : vous devez utiliser l&rsquo;import SCSS), toutes les classes déclarées sont accessibles partout.</p><p>Préférez un choix judicieux de nom de classe racine pour un module donné et utilisez l&rsquo;arborescence possible dans le fichier SCSS.</p><h4 id=les-imports-doivent-être-triés-dune-certaine-manière>Les imports doivent être triés d&rsquo;une certaine manière</h4><p>ESLint est configuré pour trier automatiquement les imports en 4 groupes, chacun trié alphabétiquement :</p><ul><li>React</li><li>Librairies externes</li><li>Fichiers internes en chemin absolu</li><li>Fichiers internes en chemin relatif</li></ul><p>Chacun de ces groupes est séparé par une ligne vide.</p><p>ESLint déclenchera un avertissement si ces recommandations ne sont pas respectées.</p><h4 id=les-liens-des-imports-doivent-être-absolus>Les liens des imports doivent être absolus</h4><p>Vous devez utiliser le <u>chemin complet</u> pour tous vos imports.</p><blockquote><p>Le chemin peut être relatif seulement si le fichier à importer est dans le même répertoire.</p></blockquote><h2 id=typescript>TypeScript</h2><h3 id=import--export>import & export</h3><p>ESLint et Typescript sont configurés pour imposer l&rsquo;<code>import type</code> pour un import de type.</p><p>Ceci permet de :</p><ul><li>Automatiquement ajouter <code>type</code> devant l&rsquo;import quand on ajoute un type avec l&rsquo;autocomplétion dans un fichier.</li><li>Afficher 2 erreurs de chacun de ces packages demandant d&rsquo;ajouter <code>type</code> devant l&rsquo;import si vous ne l&rsquo;avez pas fait.</li></ul><p>Lorsque qu’un <code>import</code> ou un <code>export</code> ne comporte que des types, il faut l’indiquer par le mot clé <code>type</code>.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#204a87;font-weight:700>export</span> <span style=color:#204a87;font-weight:700>type</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>Direction</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>DirectionalTrackRange</span> <span style=color:#204a87;font-weight:700>as</span> <span style=color:#000>TrackRange</span> <span style=color:#000;font-weight:700>};</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#204a87;font-weight:700>type</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>typedEntries</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>ValueOf</span> <span style=color:#000;font-weight:700>}</span> <span style=color:#204a87;font-weight:700>from</span> <span style=color:#4e9a06>&#34;utils/types&#34;</span><span style=color:#000;font-weight:700>;</span>
</span></span></code></pre></div><p>Quand un import ne contient pas que des types, il sera agencé de cette manière, par ordre alphabétique.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>osrdEditoastApi</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>ScenarioCreateForm</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span> <span style=color:#204a87;font-weight:700>from</span> <span style=color:#4e9a06>&#34;common/api/osrdEditoastApi&#34;</span><span style=color:#000;font-weight:700>;</span>
</span></span></code></pre></div><p>Cette pratique permet de :</p><ul><li>Améliorer les performances et le travail d’analyse du compilateur et du linter.</li><li>Rendre ces déclarations plus lisibles, on voit clairement ce qu’on est en train d’importer.</li><li>Éviter des cycles de dépendances :</li></ul><p><img src=/images/docs/contribute/dependency-cycle.png alt="dependency cycle"></p><p>L’erreur disparaît avec le mot clé <code>type</code></p><p><img src=/images/docs/contribute/dependency-cycle-gone.png alt="dependency cycle"></p><ul><li>Alléger le bundle final (tous les types disparaissent à la compilation).</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-baa7dfe57fa41f763127154fe6dc4e7b>1.3.4 - Écrire du code</h1><div class=lead>Apporter des modifications au code d&rsquo;OSRD</div><ol><li><p>Si vous n&rsquo;être pas un habitué de Git, <a href=https://learngitbranching.js.org/>suivez ce tutoriel</a></p></li><li><p><strong>Créez une branche</strong><br>Si vous comptez contribuer régulièrement, vous pouvez demander accès au <a href=https://github.com/osrd-project/osrd>dépot principal</a>. Sinon, <a href=https://github.com/osrd-project/osrd/fork>créez un fork</a>.</p></li><li><p><strong>Ajoutez des changements sur votre branche</strong><br>Essayez de découper votre travail en étapes macroscopiques, et sauvegardez vos changements dans un commit à la fin de chaque étape. Essayez de suivre <a href=../conventions/>les conventions du projet</a>.</p></li><li><p><strong>Conservez votre branche à jour</strong></p><pre tabindex=0><code>git switch &lt;your_branch&gt;
git fetch
git rebase origin/dev
</code></pre></li></ol><p><em><a href=https://osrd.fr/fr/docs/guides/contribute/contribute-code/commit-style/>Continuer vers le style des commits ‣</a></em></p></div><div class=td-content style=page-break-before:always><h1 id=pg-80dcad7e2ed14ec6eb09c46a711ae15f>1.3.5 - Style des commits</h1><div class=lead>Quelques bonnes pratiques et règles pour les messages de commits</div><p>Le format général des commits est le suivant :</p><pre tabindex=0><code>composant1, composant2: description du changement à l&#39;impératif

Description détaillée ou technique du contenu et de la motivation du
changement, si le titre n&#39;est pas complètement évident.
</code></pre><ul><li><strong>le message comme le code doit être en anglais</strong> (seulement des caractères ASCII pour le titre)</li><li>il peut y avoir plusieurs composants, séparés par des <code>:</code> quand il y a une relation hiérarchique, ou des <code>,</code> sinon</li><li>les composants sont en minuscule, avec éventuellement <code>-</code>, <code>_</code> ou <code>.</code></li><li>la description du changement à l&rsquo;impératif commence par un verbe en minuscule</li><li>le titre ne doit pas comporter de lien (<code>#</code> est interdit)</li></ul><p>Idéalement :</p><ul><li>le titre doit être autonome : pas besoin de lire autre chose pour le comprendre</li><li>le titre du commit est entièrement en minuscule</li><li>le titre est clair pour une personne étrangère au code</li><li>le corps du commit contient une description du changement</li></ul><div class="alert alert-info" role=alert>Une vérification automatique est effectuée pour vérifier autant que possible ce formatage.</div><h3 id=contre-exemples-de-titres-de-commit>Contre-exemples de titres de commit</h3><p>A éviter absolument:</p><ul><li><code>component: update ./some/file.ext</code> : préciser la mise à jour en question plutôt que le fichier,
les fichiers sont des éléments techniques bienvenus dans le <em>corps</em> du commit</li><li><code>component: fix #42</code> : préciser le problème corrigé, les liens (vers l&rsquo;issue, etc.) sont
encouragés dans le <em>corps</em> du commit</li><li><code>wip</code> : décrire le travail (et le finir)</li></ul><p>Bienvenus pour faciliter la relecture, mais ne pas merger:</p><ul><li><code>fixup! previous commit</code> : un <a href=../share-changes>autosquash</a> devra être lancé avant le merge</li><li><code>Revert "previous commit of the same PR"</code> : les deux commits devront être retirés avant merge</li></ul><p><em><a href=https://osrd.fr/fr/docs/guides/contribute/contribute-code/share-changes/>Continuer vers le partage des changements ‣</a></em></p></div><div class=td-content style=page-break-before:always><h1 id=pg-6334dadf8018c47abf554cd3015be6bd>1.3.6 - Partagez vos changements</h1><div class=lead>Comment soumettre votre code pour qu&rsquo;il soit vérifié ?</div><p>L&rsquo;auteur d&rsquo;une <em>pull request (PR)</em> est responsable de son « cycle de vie ». Il se charge de contacter les différents acteurs, de suivre la revue de code, répondre aux commentaires et corriger le code suite à la revue de code (vous pouvez également consulter la <a href=https://osrd.fr/fr/docs/guides/contribute/code-review/>page dédiée à la revue de code</a>).</p><blockquote><p>En cas de PR conséquente, ne pas hésiter à solliciter plusieurs reviewers qui pourront s&rsquo;organiser, voire de faire la review ensemble, reviewers et auteur.</p></blockquote><ol><li><p><strong>Ouvrez une <em>pull request</em></strong><br>Une fois que vos changements sont prêts, il est temps de proposer de les intégrer à la branche <code>dev</code>.
Cela se fait <a href=https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/creating-a-pull-request>dans l&rsquo;interface web de Github</a>.</p><p>Si possible :</p><ul><li>Faites des PRs d&rsquo;unités logiques et atomiques également (évitez de mélanger le refactoring, les nouvelles fonctionnalités et la correction de bugs en même temps).</li><li>Ajoutez une description aux PR pour expliquer ce qu&rsquo;elles font et pourquoi.</li><li>Aidez le relecteur en suivant les conseils donnés dans <a href=https://mtlynch.io/code-review-love/>l&rsquo;article de mtlynch</a>.</li><li>Ajoutez les balises <code>area:&lt;affected_area></code> pour montrer quelle partie de l&rsquo;application a été impactée. Cela peut être fait via <a href=https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/creating-a-pull-request>l&rsquo;interface web</a>.</li></ul></li><li><p><strong>Prenez en compte les retours</strong><br>Une fois que votre PR est ouverte, <a href=https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/about-pull-request-reviews>d&rsquo;autres contributeurs doivent donner leur avis sur votre proposition</a> :</p><ul><li>N&rsquo;importe qui peut donner son avis.</li><li>Il est nécessaire d&rsquo;obtenir l&rsquo;approbation d&rsquo;un <a href=https://github.com/osrd-project/osrd/blob/dev/.github/CODEOWNERS>contributeur familier avec le code</a>.</li><li>Il est d&rsquo;usage de prendre en compte tous les commentaires critiques.</li><li>Les commentaires sont souvent écrits dans un style plutôt direct, dans le soucis de collaborer efficacement vers une solution acceptable par tous.</li><li>Une fois que tous les commentaires ont été pris en compte, un mainteneur intègre le changement.</li></ul></li></ol><blockquote><p>Sur les PR conséquentes et vouées à évoluer dans le temps, conserver les <em>corrections</em> suite à la
relecture dans des <em>commits séparés</em> facilite le travail de relecture. En cas de <code>rebase</code> et de
relectures multiples par la même personne ils sont le moyen d&rsquo;économiser une nouvelle relecture
complète (demandez de l&rsquo;aide au besoin) :</p><ul><li><em>Ajoutez des commits de fixup</em>, amend, squash ou reword à l&rsquo;aide de la
<a href=https://git-scm.com/docs/git-commit#Documentation/git-commit.txt---fixupamendrewordltcommitgt>documentation dédiée à git commit</a>.</li><li><em>Fusionnez automatiquement les corrections</em> dans les commits originaux de votre PR et vérifier le résultat , à l&rsquo;aide de
<a href=https://git-scm.com/docs/git-rebase#Documentation/git-rebase.txt---autosquash><code>git rebase -i --autosquash origin/dev</code></a>
(juste avant le merge et une fois les relectures terminées).</li><li><em>Poussez vos changements</em> avec
<a href=https://git-scm.com/docs/git-push#Documentation/git-push.txt---no-force-with-lease><code>git push --force-with-lease</code></a>
car vous ne poussez pas seulement de nouveaux commits, mais bien un changement des commits existants.</li></ul></blockquote><ol start=3><li><strong>N&rsquo;hésitez pas à relancer vos interlocuteurs, plusieurs fois si besoin : vous êtes responsable de la vie de votre <em>pull request</em></strong>.</li></ol><h2 id=proposition-de-fonctionnement>Proposition de fonctionnement</h2><p>Voici une proposition de flux de travail.</p><p><strong>Il est nécessaire de communiquer par messagerie instantanée (Matrix, Slack, etc.) afin de garantir le fonctionnement du flux de la validation d&rsquo;une PR.</strong></p><pre class=mermaid>sequenceDiagram
  actor A as Auteur PR
  actor R as Reviewer/mainteneur
  
  A-&gt;&gt;R: Demande une review en notifiant spéciquement quelques personnes
  R-&gt;&gt;A: Répond à la demande par oui ou non
  
  loop Boucle entre auteur et reviewer
    R--&gt;&gt;A: Commente, demande des changements
    A--&gt;&gt;R: Répond à chaque commentaire/requested changes
    A--&gt;&gt;R: Corrige le code si nécessaire dans des « fixups » dédiés
    R--&gt;&gt;A: Vérifie et commente à nouveau le code
    R--&gt;&gt;A: Résoud les conversations/requested changes le cas échéant
  end
 
  A-&gt;&gt;R: Rebase si nécessaire
  R-&gt;&gt;A: Vérifie l&#39;historique des commits
  R-&gt;&gt;A: Approuve ou ferme la PR
  Note left of R: Et fusionne si mainteneur</pre><p><em><a href=https://osrd.fr/fr/docs/guides/contribute/contribute-code/tests/>Continuer enfin vers les tests ‣</a></em></p></div><div class=td-content style=page-break-before:always><h1 id=pg-c9ed9175ac241f91b9cc8c4412a1e488>1.3.7 - Tests</h1><div class=lead>Recommandations pour les tests</div><h2 id=back-end>Back-end</h2><ul><li>Les tests d&rsquo;intégration sont écrits avec <a href=https://docs.pytest.org/>pytest</a> dans le dossier <code>/tests</code>.</li><li>Chaque route décrite dans les fichiers <code>openapi.yaml</code> doit avoir un test d&rsquo;intégration.</li><li>Le test doit vérifier à la fois le format et le contenu des réponses valides et invalides.</li></ul><h2 id=front-end>Front-end</h2><p>L&rsquo;écriture fonctionnelle des tests est réalisée avec les <em>Product Owners</em>, et les développeurs choisissent une implémentation technique qui répond précisément aux besoins exprimés et qui s&rsquo;intègre dans les recommandations présentes ici.</p><p>Nous utilisons <a href=https://playwright.dev/>Playwright</a> pour écrire les tests bout en bout, et <a href=https://vitest.dev/>vitest</a> pour écrire les tests unitaires.</p><p>Les navigateurs testés sont pour l&rsquo;instant <a href=https://www.mozilla.org/fr/firefox/switch/>Firefox</a> et Chromium.</p><h3 id=principes-de-base>Principes de base</h3><ul><li>Les tests doivent être <strong>courts</strong> (1min max) et aller <strong>droit au but</strong>.</li><li>Les timeout arbitraires sont proscrits, un test doit systématiquement attendre un évènement spécifique. Il est possible d&rsquo;utiliser le <em>polling</em> (retenter une action — un clic par exemple — au bout d&rsquo;un certain temps) proposé dans l&rsquo;API de <a href=https://playwright.dev/>Playwright</a>.</li><li>Les tests doivent tous pouvoir être parallélisables.</li><li>Les tests ne doivent pas pointer/attendre des éléments de texte issus de la traduction, préférer l&rsquo;arborescence du <em>DOM</em> ou encore placer des <code>id</code> spécifiques.</li><li>On ne teste pas les données mais l&rsquo;application et ses fonctionnalités. Des tests spécifiques aux données sont à élaborer par ailleurs.</li></ul><h4 id=données>Données</h4><p><strong>Les données testées doivent impérativement être des données publiques.</strong>
Les données nécessaires (infrastructure et matériel) aux tests sont proposées dans des fichiers <code>json</code> de l&rsquo;application, <em>injectées</em> au début de chaque test et effacées à la fin peu importe son résultat ou la manière d&rsquo;être stoppé, y compris par <code>CTRL+C</code>.</p><p>Cela se fait par des appels API en typescript avant de lancer le test à proprement parler.</p><p>Les données testées sont les mêmes en local ou via l&rsquo;intégration continue.</p><h4 id=atomicité-dun-test>Atomicité d&rsquo;un test</h4><p>Chaque test doit être <strong>atomique</strong> : il se suffit à lui même et ne peut pas être divisé.</p><p>Un test va cibler une fonctionnalité ou un composant, si ce dernier n&rsquo;est pas trop gros. Un test ne testera pas tout un module ou tout une application, ce sera forcément un ensemble de tests afin de préserver l&rsquo;atomicité des tests.</p><p>Si un test a besoin que des éléments soient créés ou ajoutés, ces opérations doivent être opérées par des appels API en typescript en amont du test, à l&rsquo;instar de ce qui est fait pour l&rsquo;ajout de données. Ces éléments doivent être supprimés à l&rsquo;issue du test, peu importe son résultat ou la manière d&rsquo;être stoppé, y compris par <code>CTRL+C</code>.</p><p>Cela permettra notamment la parallélisation des tests.</p><p>Un test peut cependant, dans certains cas de figure où cela est pertinent, contenir plusieurs sous-divisions de test, clairement explicitées, et justifiées (plusieurs <code>test()</code> dans un seul <code>describe()</code>).</p><h3 id=exemple-de-test>Exemple de test</h3><p>Le besoin : « nous voulons tester l&rsquo;ajout d&rsquo;un train dans une grille horaire ».</p><ol><li>ajouter l&rsquo;infrastructure et le matériel roulant de test dans la base de données <strong>par appels API</strong></li><li>créer projet, étude et scénario avec choix de l&rsquo;infra de test <strong>par appels API</strong></li><li>début du test qui clique sur « ajouter un ou plusieurs trains » jusqu&rsquo;à la vérification de la présence des trains dans la grille horaire</li><li>le test a réussi, a échoué, ou est stoppé, le projet, l&rsquo;étude et le scénario sont effacés, ainsi que le matériel roulant et et l&rsquo;infrastructure de test <strong>par appels API</strong></li></ol><p><em>NB : le test ne va pas tester toutes les possibilités offertes par l&rsquo;ajout de trains, cela relève d&rsquo;un test spécifique qui testerait la réponse de l&rsquo;interface pour tous les cas de figure sans ajouter de trains.</em></p><p><em><a href=https://osrd.fr/fr/docs/guides/contribute/contribute-code/write-code/>Continuer vers l&rsquo;écriture de code ‣</a></em></p></div><div class=td-content style=page-break-before:always><h1 id=pg-f29e34723cf01ba920bd21548bdf1c2e>1.4 - Revue de code</h1><div class=lead>Comment faire des retours constructifs</div><p>Le reviewer/mainteneur s&rsquo;engage à effectuer la revue de code rapidement, c&rsquo;est aussi à lui qu&rsquo;appartient de fermer les « <em>request changes</em> », de bien vérifier l&rsquo;historique des commits, et de fusionner la « <em>pull request</em> » s&rsquo;il en a les droits.</p><p>Nous vous soumettons quelques conseils et recommandations qui nous semblent pertinentes pour une revue de code humaine, pertinente et enrichissante pour tous ses contributeurs :</p><ul><li><a href=https://mtlynch.io/code-review-love/>How to Make Your Code Reviewer Fall in Love with You?</a> par Michael Lynch.</li><li><a href=https://mtlynch.io/human-code-reviews-1/>How to Do Code Reviews Like a Human? </a>par Michael Lynch.</li></ul><p>Voici une proposition de flux de travail.</p><p><strong>Il est nécessaire de communiquer par messagerie instantanée (Matrix, Slack, etc.) afin de garantir le fonctionnement du flux de la validation d&rsquo;une PR.</strong></p><pre class=mermaid>sequenceDiagram
  actor A as Auteur PR
  actor R as Reviewer/mainteneur
  
  A-&gt;&gt;R: Demande une review en notifiant spéciquement quelques personnes
  R-&gt;&gt;A: Répond à la demande par oui ou non
  
  loop Boucle entre auteur et reviewer
    R--&gt;&gt;A: Commente, demande des changements
    A--&gt;&gt;R: Répond à chaque commentaire/requested changes
    A--&gt;&gt;R: Corrige le code si nécessaire dans des « fixups » dédiés
    R--&gt;&gt;A: Vérifie et commente à nouveau le code
    R--&gt;&gt;A: Résoud les conversations/requested changes le cas échéant
  end
 
  A-&gt;&gt;R: Rebase si nécessaire
  R-&gt;&gt;A: Vérifie l&#39;historique des commits
  R-&gt;&gt;A: Approuve ou ferme la PR
  Note left of R: Et fusionne si mainteneur</pre><blockquote><p>Si la personne qui fait la revue de code n&rsquo;est pas mainteneur, c&rsquo;est à l&rsquo;auteur de PR de trouver un mainteneur pour pouvoir fusionner sa PR avec le code. Dans certains cas particuliers (notamment juste avant le gel des fusions en fin d&rsquo;itération), le mainteneur doit être averti plus tôt.</p></blockquote><h2 id=la-pyramide-de-la-revue-de-code>La pyramide de la revue de code</h2><figure><a href=https://www.morling.dev/blog/the-code-review-pyramid/><img src=/images/docs/contribute/code_review_pyramid.svg></a></figure></div><div class=td-content style=page-break-before:always><h1 id=pg-987ae2aead487e6aad8654531bf0e679>1.5 - Signaler des problèmes</h1><div class=lead>Comment signaler un bug ou suggérer une amélioration</div><p><strong>N&rsquo;hésitez pas à signaler tout ce qui vous semble important !</strong></p><p>Notre outil de suivi des bugs est <a href=https://github.com/osrd-project/osrd/issues>github</a>. Il est nécessaire de s&rsquo;inscrire pour signaler un bug.</p><p>Suivez <a href=https://github.com/osrd-project/osrd/issues/new/choose>ce lien</a> et choisissez le modèle qui correspond à votre cas de figure.</p><h3 id=bugs>Bugs</h3><ul><li>Le bug doit avoir une description correcte et le modèle du bug doit être rempli avec soin.</li><li>Le bug doit être étiqueté avec (<em>pour les membres de l&rsquo;équipe</em>) :<ul><li><code>kind:bug</code></li><li>une ou plusieurs <code>area:&lt;affected_area></code> si possible (si la zone affectée n&rsquo;est pas connue, laissez-la vide et elle sera ajoutée plus tard par un autre membre de l&rsquo;équipe).</li><li>un <code>severity:&lt;bug_severity></code> si possible (si la sévérité n&rsquo;est pas connue, laissez-la vide et elle sera ajoutée plus tard par un autre membre de l&rsquo;équipe).<ul><li><code>severity:minor</code> : L&rsquo;utilisateur peut encore utiliser la fonctionnalité.</li><li><code>severity:major</code> : L&rsquo;utilisateur ne peut parfois pas utiliser la fonctionnalité.</li><li><code>severity:critical</code> : L&rsquo;utilisateur ne peut pas utiliser la fonctionnalité.</li></ul></li></ul></li><li>Les membres de l&rsquo;équipe OSRD peuvent modifier les étiquettes des problèmes (gravité, domaine, type, &mldr;).
Vous pouvez laisser un commentaire pour expliquer les changements.</li><li>Si vous travaillez sur un bug ou planifiez de travailler sur un bug, assignez vous au bug.</li><li>Les PRs qui résolvent des bugs doivent ajouter des tests de régression pour s&rsquo;assurer que le bug ne reviendra pas dans le futur.</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-a6b5ed2313c4aa287c4250d8f8de644d>1.6 -</h1><p>Voici une proposition de flux de travail.</p><p><strong>Il est nécessaire de communiquer par messagerie instantanée (Matrix, Slack, etc.) afin de garantir le fonctionnement du flux de la validation d&rsquo;une PR.</strong></p><pre class=mermaid>sequenceDiagram
  actor A as Auteur PR
  actor R as Reviewer/mainteneur
  
  A-&gt;&gt;R: Demande une review en notifiant spéciquement quelques personnes
  R-&gt;&gt;A: Répond à la demande par oui ou non
  
  loop Boucle entre auteur et reviewer
    R--&gt;&gt;A: Commente, demande des changements
    A--&gt;&gt;R: Répond à chaque commentaire/requested changes
    A--&gt;&gt;R: Corrige le code si nécessaire dans des « fixups » dédiés
    R--&gt;&gt;A: Vérifie et commente à nouveau le code
    R--&gt;&gt;A: Résoud les conversations/requested changes le cas échéant
  end
 
  A-&gt;&gt;R: Rebase si nécessaire
  R-&gt;&gt;A: Vérifie l&#39;historique des commits
  R-&gt;&gt;A: Approuve ou ferme la PR
  Note left of R: Et fusionne si mainteneur</pre></div><div class=td-content style=page-break-before:always><h1 id=pg-a7477eb2cac20a1a28f231b721e007c4>2 - Déployer OSRD</h1><div class=lead>Apprenez à déployer OSRD dans différents environnements</div><p>Tout d&rsquo;abord, nous recommandons de se familiariser sur <a href=https://osrd.fr/fr/docs/explanation/containers-architecture/>l&rsquo;architecture des conteneurs d&rsquo;OSRD</a>.</p><p>Nous allons couvrir comment déployer OSRD dans les configurations suivantes :</p><ul><li><a href=https://osrd.fr/fr/docs/guides/deploy/docker-compose/>Utiliser docker compose</a> sur un seul nœud.</li><li><a href=https://osrd.fr/fr/docs/guides/deploy/docker-compose/>Utiliser helm</a> sur un cluster kubernetes.</li></ul><p>Il est également possible de déployer manuellement chaque service d&rsquo;OSRD sur un système, mais nous ne couvrirons pas ce sujet dans ce guide.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-d98b9298aa16e9c1e5843fabc1ffaf57>2.1 - Docker Compose</h1><div class=lead>Utiliser docker compose pour un déploiement sur un seul nœud</div><p>Le projet OSRD inclut un fichier docker-compose.yml conçu pour faciliter le déploiement d&rsquo;un environnement OSRD pleinement fonctionnel. Initialement destiné à des fins de développement, ce Docker Compose peut également être adapté pour des déploiements rapides sur un seul nœud.</p><h2 id=prérequis>Prérequis</h2><p>Avant de procéder au déploiement, assurez-vous que vous avez installé :</p><ul><li>Docker</li><li>Docker Compose</li></ul><h2 id=vue-densemble-de-la-configuration>Vue d&rsquo;ensemble de la configuration</h2><p>Le fichier <code>docker-compose.yml</code> définit les services suivants :</p><ol><li><strong>PostgreSQL</strong> : Une base de données PostgreSQL avec l&rsquo;extension PostGIS.</li><li><strong>Redis</strong> : Un serveur Redis pour le cache.</li><li><strong>Core</strong> : Le service central OSRD.</li><li><strong>Front</strong> : Le service front-end pour OSRD.</li><li><strong>Editoast</strong> : Un service OSRD responsable de diverses fonctions d&rsquo;édition.</li><li><strong>Gateway</strong> : Sert de passerelle pour les services OSRD.</li><li><strong>Wait-Healthy</strong> : Un service utilitaire pour s&rsquo;assurer que tous les services sont sains avant de procéder.</li></ol><p>Chaque service est configuré avec des contrôles de santé, des montages de volumes et les variables d&rsquo;environnement nécessaires.</p><h2 id=étapes-du-déploiement>Étapes du déploiement</h2><ol><li><strong>Cloner le dépôt</strong> : Tout d&rsquo;abord, clonez le dépôt OSRD sur votre machine locale.</li><li><strong>Variables d&rsquo;environnement</strong> (facultatif) : Définissez les variables d&rsquo;environnement nécessaires si vous devez ajuster certaines configurations.</li><li><strong>Construire et exécuter</strong> : Naviguez vers le répertoire contenant <code>docker-compose.yml</code> et exécutez :</li></ol><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker-compose up --build
</span></span></code></pre></div><p>Cette commande construit les images et démarre les services définis dans le fichier Docker Compose.</p><h2 id=accès-aux-services>Accès aux services</h2><p>Bien que tous les services HTTP soient utilisés via la passerelle (<code>http://localhost:4000</code>), vous pouvez accéder directement à chaque service en utilisant leurs ports exposés :</p><ul><li><strong>PostgreSQL</strong> : Accessible sur <code>localhost:5432</code>.</li><li><strong>Redis</strong> : Accessible sur <code>localhost:6379</code>.</li><li><strong>Service Core</strong> : Accessible sur <code>localhost:8080</code>.</li><li><strong>Front-End</strong> : Accessible sur <code>localhost:3000</code>.</li><li><strong>Editoast</strong> : Accessible sur <code>localhost:8090</code>.</li></ul><h2 id=notes-et-considérations>Notes et considérations</h2><ul><li>Cette configuration est conçue pour le développement et les déploiements rapides. Pour les environnements de production, des considérations supplémentaires en matière de sécurité, de scalabilité et de fiabilité doivent être abordées.</li><li>Assurez-vous que le <code>POSTGRES_PASSWORD</code> et d&rsquo;autres identifiants sensibles sont gérés en toute sécurité, en particulier dans les déploiements de production.</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-451841523141af64d1cb529ab5abd2ae>2.2 - Kubernetes avec Helm</h1><div class=lead>Utilisation de Helm pour les déploiements Kubernetes</div><p>La Helm Chart du projet OSRD fournit une solution pour déployer les services OSRD dans un environnement Kubernetes de manière standardisée. Ce document décrit les options de configuration disponibles dans le Helm Chart.</p><h2 id=prérequis>Prérequis</h2><p>Avant de procéder au déploiement, assurez-vous que vous avez installé :</p><ul><li>Un cluster Kubernetes opérationnel</li><li>Une base de données PostgreSQL avec PostGIS</li><li>Un serveur Redis (utilisé pour le cache)</li></ul><h2 id=le-serveur-de-tuiles>Le serveur de tuiles</h2><p>Le serveur de tuiles est le composant responsable de la génération des tuiles cartographiques vectorielles. Il est recommandé de le séparer du Editoast standard lors de l&rsquo;exécution d&rsquo;une configuration de production, car Editoast ne peut pas être mis à l&rsquo;échelle horizontalement (il est stateful).</p><p>Vous pouvez visualiser le déploiement recommandé ici :</p><pre class=mermaid>flowchart TD
    gw[&#34;gateway&#34;]
    front[&#34;fichier statiques front-end&#34;]
    gw -- fichier local --&gt; front
    
    navigateur --&gt; gw
    gw -- HTTP --&gt; editoast
    gw -- HTTP --&gt; tileserver-1
    gw -- HTTP --&gt; tileserver-2
    gw -- HTTP --&gt; tileserver-n...
    editoast -- HTTP --&gt; core</pre><p>Le Helm Chart utilise le<a href=https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/>HorizontalPodAutoscaler</a> de Kubernetes pour lancer autant de serveurs de tuiles que nécessaire en fonction de la charge de travail.</p><h2 id=configuration-de-la-helm-chart-values>Configuration de la Helm Chart (values)</h2><p>Le Helm Chart est configurable à travers les valeurs suivantes :</p><h3 id=service-core>Service Core</h3><ul><li><code>core</code> : Configuration pour le service central OSRD.<ul><li><code>internalUrl</code> : URL interne pour la communication entre services.</li><li><code>image</code> : Image Docker à utiliser.</li><li><code>pullPolicy</code> : Politique de récupération de l&rsquo;image.</li><li><code>replicaCount</code> : Nombre de réplicas.</li><li><code>service</code> : Type de service et configuration des ports.</li><li><code>resources</code>, <code>env</code>, <code>annotations</code>, <code>labels</code>, <code>nodeSelector</code>, <code>tolerations</code>, <code>affinity</code> : Diverses options de déploiement Kubernetes.</li></ul></li></ul><h3 id=service-editoast>Service Editoast</h3><ul><li><code>editoast</code> : Configuration pour le service Editoast.<ul><li>Comprend des options similaires à <code>core</code> pour le déploiement Kubernetes.</li><li><code>init</code> : Configuration d&rsquo;initialisation.</li></ul></li></ul><h3 id=serveur-de-tuiles>Serveur de tuiles</h3><ul><li><code>tileServer</code> : Service Editoast spécialisé qui sert uniquement des tuiles cartographiques vectorielles.<ul><li><code>enabled</code> : Définir sur <code>true</code> pour activer la fonctionnalité de serveur de tuiles.</li><li><code>image</code> : Image Docker à utiliser (généralement la même que Editoast).</li><li><code>replicaCount</code> : Nombre de réplicas, permettant la mise à l&rsquo;échelle horizontale.</li><li><code>hpa</code> : Configuration de l&rsquo;Horizontal Pod Autoscaler.</li><li>Autres options standard de déploiement Kubernetes.</li></ul></li></ul><h3 id=gateway>Gateway</h3><ul><li><code>gateway</code> : Configuration pour le gateway OSRD.<ul><li>Comprend des options de service, d&rsquo;ingress et d&rsquo;autres options de déploiement Kubernetes.</li><li><code>config</code> : Configurations spécifiques pour l&rsquo;authentification et les proxys de confiance.</li></ul></li></ul><h2 id=déploiement>Déploiement</h2><p>Le chart est disponible dans le dépôt OCI ghcr. Vous pouvez trouver 2 versions de la chart :</p><ul><li><a href=https://github.com/osrd-project/osrd-chart/pkgs/container/charts%2Fosrd>Charts stables</a> : <code>oci://ghcr.io/osrd-project/charts/osrd</code></li><li><a href=https://github.com/osrd-project/osrd-chart/pkgs/container/charts%2Fosrd-dev>Charts de développement</a> : <code>oci://ghcr.io/osrd-project/charts/osrd-dev</code></li></ul><p>Pour déployer les services OSRD en utilisant Helm :</p><ol><li><p><strong>Configurer les valeurs</strong> : Ajustez les valeurs selon vos besoins de déploiement.</p></li><li><p><strong>Installer le Chart</strong> : Utilisez la commande <code>helm install</code> pour installer la chart dans votre cluster Kubernetes.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>helm install osrd oci://ghcr.io/osrd-project/charts/osrd -f values.yml
</span></span></code></pre></div></li></ol></div><div class=td-content style=page-break-before:always><h1 id=pg-039d53e90f0ffa3df56e680b1c43ff0d>3 - Le design d'OSRD</h1><div class=lead>Les couleurs, la police, les usages&mldr;</div><p>Tout est présenté dans un site dédié <a href=https://design.osrd.fr>https://design.osrd.fr</a></p><p>Un « design system » est en cours d&rsquo;élaboration.</p><figure><a href=https://design.osrd.fr><img src=/fr/docs/guides/design/images/design.webp></a></figure></div><div class=td-content style=page-break-before:always><h1 id=pg-0ca426c482c7385f8680e30bae2a99d6>4 - Le logo</h1><div class=lead>Le logo d&rsquo;OSRD, ses variantes, et son usage</div><p>Vous pouvez télécharger chaque logo indépendamment en cliquant directement dessus, ou <a href=pictures/logo-osrd.zip>tous les logos compressés dans un fichier zip</a>.</p><p>Il est conseillé de bien choisir le logo à utiliser en fonction du fond sur lequel vous voulez l&rsquo;afficher.</p><p>La modification, ajout ou suppression de l&rsquo;<strong>ombrage</strong> autre que tel que présenté dans les logos <strong>ne sont pas autorisés</strong> (cela est valable plus globalement dans tout le design, le choix de mettre des ombres portées fait partie des réflexions de design, ce n&rsquo;est pas un élément variable).</p><h3 id=officiel>Officiel</h3><div style=display:inline-block;padding:16px;background-color:#fff><a target=_blank href=pictures/logo-osrd-color-black.svg><img src=pictures/logo-osrd-color-black.svg width=256></a></div><h3 id=officiel-pour-les-fonds-sombres>Officiel pour les fonds sombres</h3><div style=display:inline-block;padding:16px;background-color:#333><a target=_blank href=pictures/logo-osrd-color-white.svg><img src=pictures/logo-osrd-color-white.svg width=256></a></div><h3 id=blanc>Blanc</h3><div style=display:inline-block;padding:16px;background-color:#333><a target=_blank href=pictures/logo-osrd-white.svg><img src=pictures/logo-osrd-white.svg width=256></a></div><h3 id=noir>Noir</h3><div style=display:inline-block;padding:16px;background-color:#fff><a target=_blank href=pictures/logo-osrd-black.svg><img src=pictures/logo-osrd-black.svg width=256></a></div><h3 id=favicons-logos-seuls>Favicons, logos seuls</h3><div style=display:inline-block;padding:16px;background-color:#fff><a target=_blank href=pictures/fav-osrd-color.svg><img src=pictures/fav-osrd-color.svg width=64></a></div><div style=display:inline-block;padding:16px;background-color:#fff;margin-left:16px><a target=_blank href=pictures/fav-osrd-black.svg><img src=pictures/fav-osrd-black.svg width=64></a></div><div style=display:inline-block;padding:16px;background-color:#333;margin-left:16px><a target=_blank href=pictures/fav-osrd-white.svg><img src=pictures/fav-osrd-white.svg width=64></a></div><h2 id=-ce-quon-ne-doit-pas-faire>🚫 Ce qu&rsquo;on ne doit <strong>pas</strong> faire</h2><h4 id=trop-petit--16px-de-hauteur>Trop petit (&lt; 16px de hauteur)</h4><img src=pictures/dont/dont5.svg style=height:32px><h4 id=disproportion>Disproportion</h4><img src=pictures/dont/dont1.svg style=margin-left:16px;height:64px><h4 id=changer-la-couleur-du-texte-ou-lombre-portée>Changer la couleur du texte ou l&rsquo;ombre portée</h4><img src=pictures/dont/dont2.svg style=height:64px><h4 id=changer-le-sens>Changer le sens</h4><img src=pictures/dont/dont3.svg style=margin-left:16px;height:64px><h4 id=déformation>Déformation</h4><img src=pictures/dont/dont4.svg style=height:64px><h2 id=-ce-quon-peut-faire>✅ Ce qu&rsquo;on peut faire</h2><h4 id=modification-de-la-couleur-interne-pour-un-évènement>Modification de la couleur interne pour un évènement</h4><div><a style=display:inline-block;padding:8px;background-color:#fff href=pictures/events/xmas-fav-osrd-color.svg target=_blank><img src=pictures/events/xmas-fav-osrd-color.svg style=height:32px>
</a><a style=display:inline-block;margin-left:8px;padding:8px;background-color:#fff href=pictures/events/xmas-logo-osrd-color-black.svg target=_blank><img src=pictures/events/xmas-logo-osrd-color-black.svg style=height:32px>
</a><a style=display:inline-block;margin-left:8px;padding:8px;background-color:#333 href=pictures/events/xmas-logo-osrd-color-white.svg><img src=pictures/events/xmas-logo-osrd-color-white.svg style=height:32px></a></div><div style=margin-top:8px><a style=display:inline-block;padding:8px;background-color:#fff href=pictures/events/proud-fav-osrd-color.svg target=_blank><img src=pictures/events/proud-fav-osrd-color.svg style=height:32px>
</a><a style=display:inline-block;margin-left:8px;padding:8px;background-color:#fff href=pictures/events/proud-logo-osrd-color-black.svg target=_blank><img src=pictures/events/proud-logo-osrd-color-black.svg style=height:32px>
</a><a style=display:inline-block;margin-left:8px;padding:8px;background-color:#333 href=pictures/events/proud-logo-osrd-color-white.svg><img src=pictures/events/proud-logo-osrd-color-white.svg style=height:32px></a></div><h4 id=utilisation-seule-du-logo-sans-le-texte>Utilisation seule du logo (sans le texte)</h4><div style=display:inline-block><img src=pictures/fav-osrd-color.svg style=height:64px></div><h2 id=les-couleurs>Les couleurs</h2><blockquote><p>Ces couleurs sont <strong>celles du logo</strong>, elles ne sont pas à confondre avec celles du design global de l&rsquo;interface d&rsquo;OSRD.</p></blockquote><p><span style=display:inline-block;background-color:#786abf;width:128px;height:128px;color:#fff;font-weight:700;padding:16px;margin-top:16px>#786ABF</span>
<span style=display:inline-block;background-color:#c7b2de;width:128px;height:128px;color:#fff;font-weight:700;padding:16px;margin-top:16px;margin-left:16px>#C7B2DE</span></p></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="col-6 col-sm-4 text-xs-center order-sm-2"></div><div class="col-6 col-sm-4 text-end text-xs-center order-sm-3"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=GitHub aria-label=GitHub><a target=_blank rel=noopener href=https://github.com/osrd-project/osrd aria-label=GitHub><i class="fab fa-github"></i></a></li></ul></div><div class="td-footer__copyright-etc col-12 col-sm-4 text-center py-2 order-sm-2"><span>&copy; 2024 Contributeurs à OSRD. Tous droits réservés</span></div></div></div></footer></div><style>.markmap>svg{width:100%;height:300px}</style><script>window.markmap={autoLoader:{manual:!0,onReady(){const{autoLoader:e,builtInPlugins:t}=window.markmap;e.transformPlugins=t.filter(e=>e.name!=="prism")}}}</script><script src=https://cdn.jsdelivr.net/npm/markmap-autoloader></script><script src=https://cdn.jsdelivr.net/npm/mermaid@9.3.0/dist/mermaid.min.js integrity="sha512-ku2nmBrzAXY5YwohzTqLYH1/lvyMrpTVxgQKrvTabd/b/uesqltLORdmpVapYv6QhZVCLUX6wkvFaKOAY4xpUA==" crossorigin=anonymous></script><script src=/js/main.min.4261519102c0270f3bdd4edcd2b45867ee7a584a0ea82c94f59e4f991c6337a1.js integrity="sha256-QmFRkQLAJw873U7c0rRYZ+56WEoOqCyU9Z5PmRxjN6E=" crossorigin=anonymous></script><script defer src=/js/click-to-copy.min.f724d3de49218995223b7316aa2e53e2b34bf42026bf399ebb21bb02212402d1.js integrity="sha256-9yTT3kkhiZUiO3MWqi5T4rNL9CAmvzmeuyG7AiEkAtE=" crossorigin=anonymous></script><script src=/js/tabpane-persist.js></script></body></html>