<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>OSRD – Explications</title><link>https://osrd.fr/fr/docs/explanation/</link><description>Recent content in Explications on OSRD</description><generator>Hugo -- gohugo.io</generator><language>fr</language><atom:link href="https://osrd.fr/fr/docs/explanation/index.xml" rel="self" type="application/rss+xml"/><item><title>Docs: Architecture des conteneurs</title><link>https://osrd.fr/fr/docs/explanation/containers-architecture/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://osrd.fr/fr/docs/explanation/containers-architecture/</guid><description>
&lt;p>Il y a 3 principaux conteneurs déployés dans une configuration OSRD standard :&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Gateway&lt;/strong> &lt;em>(inclut le frontend)&lt;/em> : Sert le front-end, gère l&amp;rsquo;authentification et proxy les requêtes vers le backend.&lt;/li>
&lt;li>&lt;strong>Editoast&lt;/strong> : Agit comme le backend qui interagit avec le front-end.&lt;/li>
&lt;li>&lt;strong>Core&lt;/strong> : Gère les calculs et la logique métier, appelé par Editoast.&lt;/li>
&lt;/ul>
&lt;h2 id="déploiement-standard">Déploiement standard&lt;/h2>
&lt;p>Le déploiement standard peut être représenté par le diagramme suivant.&lt;/p>
&lt;pre class="mermaid">flowchart TD
gw[&amp;#34;gateway&amp;#34;]
front[&amp;#34;fichiers statiques front-end&amp;#34;]
gw -- fichier local --&amp;gt; front
navigateur --&amp;gt; gw
gw -- HTTP --&amp;gt; editoast
editoast -- HTTP --&amp;gt; core&lt;/pre>
&lt;p>Les requêtes externes sont reçues par le gateway. Si le chemin demandé commence par &lt;code>/api&lt;/code>, il sera transféré en utilisant HTTP vers editoast, sinon il servira un fichier avec le chemin demandé. Editoast atteint le core en utilisant HTTP si nécessaire.&lt;/p>
&lt;p>Le gateway n&amp;rsquo;est pas seulement un proxy inverse avec le bundle front-end inclus, il fournit également tous les mécanismes d&amp;rsquo;authentification : utilisant OIDC ou des tokens.&lt;/p></description></item><item><title>Docs: Modèles</title><link>https://osrd.fr/fr/docs/explanation/models/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://osrd.fr/fr/docs/explanation/models/</guid><description/></item><item><title>Docs: Calcul de marche</title><link>https://osrd.fr/fr/docs/explanation/running_time_calculation/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://osrd.fr/fr/docs/explanation/running_time_calculation/</guid><description>
&lt;p>OSRD peut être utilisé pour effectuer deux types de calculs :&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Calcul de marche&lt;/strong> (standalone train simulation) : calcul du temps de parcours d&amp;rsquo;un train sur un trajet donné, effectué sans interaction entre le train et le système de signalisation.&lt;/li>
&lt;li>&lt;strong>Simulation&lt;/strong> : calcul &amp;ldquo;dynamique&amp;rdquo; de plusieurs trains interagissant entre eux via le système de signalisation.&lt;/li>
&lt;/ul>
&lt;h4 id="1---les-données-dentrée">1 - Les données d&amp;rsquo;entrée&lt;/h4>
&lt;p>Un calcul de marche est basé sur 5 entrées :&lt;/p>
&lt;ul>
&lt;li>&lt;strong>L&amp;rsquo;infrastructure :&lt;/strong> Topologie des lignes et des voies, position des gares et bâtiments voyageurs, position et type des aiguilles, signaux, vitesses maximales de ligne, profil de ligne corrigée (pentes, rampes et virages).&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="infrastructure.png" alt="Infrastructure">&lt;/p>
&lt;blockquote>
&lt;p>L’histogramme bleu est une représentation des déclivités en [‰] par position en [m]. Les déclivités sont positives pour les rampes et négatives pour les pentes.&lt;/p>
&lt;p>La ligne orange représente le profil cumulé, c&amp;rsquo;est-à-dire l&amp;rsquo;altitude relative par rapport au point de départ.&lt;/p>
&lt;p>La ligne bleue est une représentation des virages en termes de rayons des courbures en [m].&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>&lt;strong>Le matériel roulant :&lt;/strong> Dont les caractéristiques nécessaires pour effectuer la simulation sont représentées ci-dessous.&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="../models/realistic-rolling-stocks/high-speed-rolling-stock.fr.png" alt="Matériel roulant">&lt;/p>
&lt;blockquote>
&lt;p>La courbe orange, appelée courbe effort-vitesse du matériel, représente l&amp;rsquo;effort moteur maximal en fonction de la
vitesse de circulation.&lt;/p>
&lt;p>La longueur, la masse, et la vitesse max du train sont représentées en bas de l&amp;rsquo;encadré.&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>
&lt;p>&lt;strong>L&amp;rsquo;horaire de départ&lt;/strong> permettant ensuite de calculer les horaires de passage aux différents points remarquables (dont gares).&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Les marges :&lt;/strong> Temps ajouté au trajet du train pour détendre sa marche (voir &lt;a href="./allowances">page sur les marges&lt;/a>).&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="marges.png" alt="Marge">&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Le pas de temps&lt;/strong> pour le calcul de &lt;a href="./numerical_integration">l&amp;rsquo;intégration numérique&lt;/a>.&lt;/li>
&lt;/ul>
&lt;h4 id="2---les-résultats">2 - Les résultats&lt;/h4>
&lt;p>Les résultats d&amp;rsquo;un calcul de marche peuvent se représenter sous différentes formes :&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Le graphique espace/temps (GET) :&lt;/strong> représente le parcours des trains dans l&amp;rsquo;espace et dans le temps, sous la forme de traits globalement diagonaux dont la pente est la vitesse. Les arrêts apparaissent sous la forme de plateaux horizontaux.&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="graph_espace_temps.jpg" alt="Graphique Espace/Temps">&lt;/p>
&lt;blockquote>
&lt;p>Exemple de GET avec plusieurs trains espacés d&amp;rsquo;environ 30mn.&lt;/p>
&lt;p>L’axe &lt;strong>x&lt;/strong> est l’horaire de passage du train, l’axe &lt;strong>y&lt;/strong> est la position du train en [m].&lt;/p>
&lt;p>La ligne bleue représente le calcul de marche le plus tendu pour le train, la ligne verte représente un calcul de marche détendu, dit « économique ».&lt;/p>
&lt;p>Les rectangles pleins entourant les trajets représentent les portions de la voie successivement réservées au passage du train (appelées cantons).&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>&lt;strong>Le graphique espace/vitesse (GEV) :&lt;/strong> représente le parcours d&amp;rsquo;un seul train, cette fois-ci en termes de vitesse. Les arrêts apparaissent donc sous forme de décrochages de la courbe jusqu&amp;rsquo;à zéro, suivis d&amp;rsquo;un ré-accélération.&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="graph_espace_vitesse.png" alt="Graphique Espace/Vitesse">&lt;/p>
&lt;blockquote>
&lt;p>L’axe &lt;strong>x&lt;/strong> est la position du train en [m], l’axe &lt;strong>y&lt;/strong> est la vitesse du train en [km/h] .&lt;/p>
&lt;p>La ligne violette représente la vitesse maximale autorisée.&lt;/p>
&lt;p>La ligne bleue représente la vitesse dans le cas du calcul de marche le plus tendu.&lt;/p>
&lt;p>La ligne verte représente la vitesse dans le cas du calcul de marche « économique ».&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>&lt;strong>Les horaires de passage du train aux différents points remarquables&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="timetables.png?style=time" alt="Horaire de départ">&lt;/p>
&lt;style>
img[src$="time"] {
height: 70%;
width: 70%;
}
&lt;/style></description></item><item><title>Docs: Netzgrafik-Editor</title><link>https://osrd.fr/fr/docs/explanation/netzgrafik-editor/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://osrd.fr/fr/docs/explanation/netzgrafik-editor/</guid><description>
&lt;p>Netzgrafik-Editor (NGE) est un logiciel open-source qui permet la création, la modification et l&amp;rsquo;analyse d&amp;rsquo;horaires à intervalles réguliers, à un niveau de détail macroscopique, développé par les Chemins de Fer Fédéraux suisses (SBB CFF FFS). Voir les dépôts &lt;a href="https://github.com/SchweizerischeBundesbahnen/netzgrafik-editor-frontend">front-end&lt;/a> et &lt;a href="https://github.com/SchweizerischeBundesbahnen/netzgrafik-editor-backend">back-end&lt;/a>.&lt;/p>
&lt;p>OSRD et NGE sont sémantiquement différents: le premier fonctionne à un niveau de détail microscopique, est basé sur une infrastructure définie en qualité et représente une grille horaire composée d&amp;rsquo;instances uniques de trains, alors que le second fonctionne à un niveau de détail macroscopique, sans infrastructure explicite et représente un plan de transport composé de lignes de train cadencées. Cependant, ces différences, suffisamment proches, peuvent être manipulées pour fonctionner ensemble.&lt;/p>
&lt;p>La compatibilité entre NGE et OSRD a été testée à travers une preuve de concept, en exécutant les deux applications comme services distincts sans synchronisation automatisée.&lt;/p>
&lt;p>L&amp;rsquo;idée est de fournir à OSRD un outil graphique pour éditer (créer, mettre à jour et supprimer les horaires des trains) une grille horaire à partir d&amp;rsquo;un scénario d&amp;rsquo;étude opérationnelle, et obtenir en même temps des informations analytiques. Utiliser des niveaux de détail microscopique et macroscopique permet un second bénéfice : les calculs microscopiques d&amp;rsquo;OSRD étendent le périmètre de NGE, ses fonctionnalités et les informations fournies, comme par exemple les simulations microscopiques ou l&amp;rsquo;outil de détection de conflits.&lt;/p>
&lt;p>L&amp;rsquo;objectif transversal de cette fonctionnalité est de faire collaborer deux projets open-source de deux grands gestionnaires d&amp;rsquo;infrastructure ferroviaire pour atteindre le même objectif, celui d&amp;rsquo;assurer une continuité numérique à différentes échelles temporelles pour les études d&amp;rsquo;exploitations ferroviaires.&lt;/p>
&lt;h4 id="1---intégration-dans-osrd">1 - Intégration dans OSRD&lt;/h4>
&lt;p>OSRD a développé une version &lt;code>standalone&lt;/code> de NGE, intégrée au code source, qui permet à NGE de fonctionner sans back-end. Ainsi, à des fins d&amp;rsquo;utilisation externe, un &lt;a href="https://www.npmjs.com/package/netzgrafik-frontend">build de NGE &lt;code>standalone&lt;/code> est disponible sur NPM&lt;/a>, et est publié à chaque release. Enfin, pour répondre à des besoins spécifiques à OSRD, OSRD utilise un &lt;a href="https://github.com/osrd-project/netzgrafik-editor-frontend">fork&lt;/a> de NGE (dont le &lt;a href="https://www.npmjs.com/package/@osrd-project/netzgrafik-frontend">build, NGE &lt;code>standalone&lt;/code>, est aussi disponible sur NPM&lt;/a>), en restant le plus proche possible du répertoire officiel.&lt;/p>
&lt;p>Malgré l&amp;rsquo;utilisation de frameworks JavaScript différents (ReactJS pour OSRD et Angular pour NGE), ce build permet à OSRD d&amp;rsquo;intégrer NGE au sein d&amp;rsquo;un &lt;a href="https://developer.mozilla.org/fr/docs/Web/HTML/Element/iframe">&lt;code>iframe&lt;/code>&lt;/a>. Cet &lt;code>iframe&lt;/code> instancie un &lt;a href="https://developer.mozilla.org/fr/docs/Web/API/Web_components/Using_custom_elements">&lt;code>Custom Element&lt;/code>&lt;/a>, qui est l&amp;rsquo;interface de communication entre les deux applications et démarre le build de NGE.&lt;/p>
&lt;p>Une alternative pour répondre au problème d&amp;rsquo;intégration aurait été de réécrire NGE en &lt;a href="https://developer.mozilla.org/fr/docs/Web/API/Web_components">&lt;code>web-components&lt;/code>&lt;/a>, pour les importer dans OSRD, mais cette solution a été abandonnée compte tenu de la quantité de travail que cela représenterait.&lt;/p>
&lt;p>NGE, sous sa version &lt;code>standalone&lt;/code>, communique avec OSRD à travers l&amp;rsquo;&lt;code>iframe&lt;/code> grâce à des propriétés d&amp;rsquo;éléments du DOM :&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://github.com/SchweizerischeBundesbahnen/netzgrafik-editor-frontend/blob/fe3e788499e18054e260c05e714419aeeafc44e1/src/app/app.component.ts#L75">&lt;code>@Input&lt;/code>&lt;/a>: avec la propriété &lt;code>netzgrafikDto&lt;/code>, déclenchée à la mise à jour du contenu du scénario depuis OSRD.&lt;/li>
&lt;li>&lt;a href="https://github.com/SchweizerischeBundesbahnen/netzgrafik-editor-frontend/blob/fe3e788499e18054e260c05e714419aeeafc44e1/src/app/app.component.ts#L84">&lt;code>@Output&lt;/code>&lt;/a>: avec la propriété &lt;a href="https://github.com/SchweizerischeBundesbahnen/netzgrafik-editor-frontend/blob/main/documentation/STANDALONE.md">&lt;code>operations&lt;/code>&lt;/a>, déclenchée à l&amp;rsquo;utilisation de NGE.&lt;/li>
&lt;/ul>
&lt;p>NGE est alors capable d&amp;rsquo;obtenir la grille horaire OSRD dès qu&amp;rsquo;un changement est effectué du côté d&amp;rsquo;OSRD, et OSRD est capable d&amp;rsquo;obtenir les modifications effectuées du côté de NGE.&lt;/p>
&lt;p>&lt;img src="osrd_nge_concept_diagram.png" alt="Diagramme conceptuel">&lt;/p>
&lt;p>Il est important de noter que dans sa version &lt;code>standalone&lt;/code>, NGE se repose alors ici sur le front-end d&amp;rsquo;OSRD, lui-même mis à jour par le back-end d&amp;rsquo;OSRD. De nouvelles tables en base de données, des modifications et de nouvelles routes sont alors nécessaires pour persister les informations macroscopiques d&amp;rsquo;un scénario.&lt;/p>
&lt;h4 id="2---convertisseurs">2 - Convertisseurs&lt;/h4>
&lt;p>Pour surpasser les différences sémantiques et adapter les modèles de données, deux convertisseurs sont implémentés :&lt;/p>
&lt;ul>
&lt;li>&lt;strong>[OSRD -&amp;gt; NGE]&lt;/strong> un convertisseur qui transforme une grille horaire OSRD en un modèle NGE. Les nœuds sont les points de passage décrits par les circulations, et dont les informations macroscopiques (position sur le réticulaire) sont stockés en base de données. Les circulations OSRD, &lt;code>TrainSchedule&lt;/code>, représentent alors des lignes de train cadencées dans NGE, &lt;code>Trainrun&lt;/code>. Un concept de lignes de trains cadencées, sera bientôt implémenté pour permettre la convergence conceptuelle entre OSRD et NGE.&lt;/li>
&lt;li>&lt;strong>[OSRD &amp;lt;- NGE]&lt;/strong> un gestionnaire d&amp;rsquo;événements, qui transforme une action NGE en mise à jour de la base de données OSRD.&lt;/li>
&lt;/ul>
&lt;h4 id="3---open-source-coopération--contribution">3 - Open-source (coopération / contribution)&lt;/h4>
&lt;p>Pour rendre NGE compatible avec OSRD, certaines modifications ont été demandées (désactivation du back-end, création de hooks sur les événements) et directement implémentées dans le &lt;a href="https://github.com/SchweizerischeBundesbahnen/netzgrafik-editor-frontend">répertoire officiel de NGE&lt;/a>, avec l&amp;rsquo;accord et l&amp;rsquo;aide de l&amp;rsquo;équipe NGE.&lt;/p>
&lt;p>Les contributions d&amp;rsquo;un projet à l&amp;rsquo;autre, de part et d&amp;rsquo;autre, sont précieuses et seront encouragées à l&amp;rsquo;avenir.&lt;/p>
&lt;p>Cette fonctionnalité montre également que la coopération open-source est puissante et constitue un gain de temps considérable dans le développement de logiciels.&lt;/p></description></item></channel></rss>