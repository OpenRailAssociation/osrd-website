[{"body":" ","categories":"","description":"R√©f√©rence pour l'API du service API","excerpt":"R√©f√©rence pour l'API du service API","ref":"/fr/docs/reference/apis/api/","tags":"","title":"API"},{"body":" ","categories":"","description":"R√©f√©rence pour l'API du service Chartos","excerpt":"R√©f√©rence pour l'API du service Chartos","ref":"/fr/docs/reference/apis/chartos/","tags":"","title":"Chartos"},{"body":" ","categories":"","description":"R√©f√©rence pour l'API du service Core","excerpt":"R√©f√©rence pour l'API du service Core","ref":"/fr/docs/reference/apis/core/","tags":"","title":"Core"},{"body":" ","categories":"","description":"R√©f√©rence pour l'API du service Editoast","excerpt":"R√©f√©rence pour l'API du service Editoast","ref":"/fr/docs/reference/apis/editoast/","tags":"","title":"Editoast"},{"body":"Some definitions:\nCapacity Capacity, in this context, is the ability to reserve infrastructure elements to allow the passage of a train.\nCapacity is expressed in both space and time: the reservation of an element can block a specific zone that becomes inaccessible to other trains, and this reservation lasts for a given time interval.\nIt can be displayed on a chart, with the time on the horizontal axis and the distance traveled on the vertical axis.\nExample of a space-time chart displaying the passage of a train.\nThe colors here represent aspects of the signals, but display a consumption of the capacity as well: when these blocks overlap for two trains, they conflict.\nThere is a conflict between two trains when they reserve the same object at the same time, in incompatible configurations.\nExample of a space-time graph with a conflict: the second train is faster than the first one, they are in conflict at the end of the path, when the rectangles overlap.\nWhen simulating this timetable, the second train would be slowed down by the yellow signals, caused by the presence of the first train.\nTrain slots A train slot corresponds to a capacity reservation for the passage of a train. It is fixed in space and time: the departure time and the path taken are known. On the space-time charts in this page, a train slot corresponds to the set of blocks displayed for a train.\nNote: in English-speaking countries, these are often simply called ‚Äútrain paths‚Äù. But in this context, this name would be ambiguous with the physical path taken by the train.\nThe usual procedure is for the infrastructure manager (e.g. SNCF R√©seau) to offers train slots for sale to railway companies (e.g. SNCF Voyageurs).\nAt a given date before the scheduled day of operation, all the train paths are allocated. But there may be enough capacity to fit more trains. Trains can fit between scheduled slots, when they are sufficiently far apart or have not found a buyer.\nThe remaining capacity after the allocation of train paths is called residual capacity. This section explains how OSRD looks for train slots in this residual capacity.\n","categories":"","description":"","excerpt":"Some definitions:\nCapacity Capacity, in this context, is the ability ‚Ä¶","ref":"/en/docs/reference/design-docs/stdcm/domain_context/","tags":"","title":"Business context"},{"body":"Quelques d√©finitions :\nLa capacit√© La capacit√©, dans ce contexte, correspond √† la possibilit√© de r√©server des √©l√©ments d‚Äôinfrastructure pour permettre le passage d‚Äôun train.\nLa capacit√© s‚Äôexprime en fonction de l‚Äôespace et du temps : la r√©servation d‚Äôun √©l√©ment peut bloquer une zone pr√©cise qui devient inaccessible aux autres trains, et cette r√©servation se fait sur un intervalle de temps.\nOn peut la repr√©senter sur un graphique, avec le temps en abscisse et la distance parcourue sur un chemin en ordonn√©e.\nExemple d‚Äôun graphique espace-temps montrant le passage d‚Äôun train.\nLes couleurs repr√©sentent ici les aspects des signaux, mais montrent √©galement une consommation de la capacit√© : quand ces blocs se superposent pour deux trains, ils sont en conflit.\nDeux trains d‚Äôune grille horaire sont en conflit quand ils r√©servent en m√™me temps un m√™me objet, dans des configurations incompatibles.\nExemple d‚Äôun graphique espace-temps avec conflit : le second train est plus rapide que le premier, ils sont en conflit sur la fin du trajet, quand les rectangles se superposent.\nEn essayant de simuler cette grille horaire, le second train serait ralentis par des signaux indiquant de ralentir, provoqu√©s par la pr√©sence du premier train.\nLa consommation de capacit√© est souvent repr√©sent√©e sous la forme de rectangles car, dans les syst√®mes de signalisation les plus simples, il s‚Äôagit de r√©servations d‚Äôune zone fixe dans l‚Äôespace pendant un intervalle de temps donn√©.\nLes sillons horaires Un sillon correspond √† une r√©servation de capacit√© pour le passage d‚Äôun train. Il est fix√© dans l‚Äôespace et dans le temps : le temps de d√©part et le chemin emprunt√© sont connus. Sur les graphiques espace-temps de cette page, un sillon correspond √† l‚Äôensemble des blocs pour un train.\nDans un fonctionnement habituel, le gestionnaire d‚Äôinfrastructure (ex : SNCF R√©seau) propose des sillons √† la vente pour les entreprises ferroviaires (ex : SNCF Voyageurs).\n√Ä une date donn√©e avant le jour de circulation pr√©vu, tous les sillons sont attribu√©s. Mais il peut rester assez de capacit√© pour faire rouler plus de trains. Il est possible de placer des trains entre les sillons d√©j√† √©tablis, quand ces derniers sont suffisamment espac√©s ou n‚Äôont pas trouv√© d‚Äôacheteurs.\nLa capacit√© restante apr√®s l‚Äôattribution des sillons est appel√©e la capacit√© r√©siduelle. Le probl√®me trait√© ici est la recherche de sillons dans celle-ci.\n","categories":"","description":"","excerpt":"Quelques d√©finitions :\nLa capacit√© La capacit√©, dans ce contexte, ‚Ä¶","ref":"/fr/docs/reference/design-docs/stdcm/domain_context/","tags":"","title":"Contexte m√©tier"},{"body":"Ce module prend plusieurs entr√©es pour effectuer une recherche de chemin :\nUn graphe d√©crivant l‚Äôinfrastructure physique Des zones non disponibles selon des intervalles de temps Des points de d√©part et d‚Äôarriv√©e Une fen√™tre de d√©part Un temps de parcours maximal Des donn√©es de simulation (mat√©riel roulant, time step, marges, etc) Parmi ces entr√©es, les deux premi√®res m√©ritent d‚Äô√™tre d√©taill√©es.\nGraphe d‚Äôinfrastructure Aujourd‚Äôhui, le graphe donn√© en entr√©e correspond au graphe des SignalingRoutes. Mais il peut s‚Äôagir de n‚Äôimporte quel graphe orient√© permettant de naviguer l‚Äôinfrastructure physique.\nLes seules contraintes sont : les ar√™tes doivent avoir une longueur, et il doit √™tre possible d‚Äôeffectuer un calcul de marche sur des sections d‚Äôar√™tes.\nZones non disponibles Cette entr√©e repr√©sente les zones inaccessibles √† cause de contraintes de capacit√©.\n√Ä chaque ar√™te du graphe est associ√© un ensemble de ‚Äúbloc d‚Äôoccupation‚Äù. Un bloc est compos√© d‚Äôune distance de d√©but et de fin (relative au d√©but de l‚Äôar√™te), et un temps de d√©but et de fin. Il est consid√©r√© que la t√™te du train ne peut pas se trouver dans cette zone dans l‚Äôintervalle de temps donn√©.\nCes blocs encodent √©galement la marge de grille : s‚Äôil faut rajouter x secondes de marges avant le train, chaque bloc est agrandi de x secondes dans un sens.\nPour donner un exemple, avec la grille horaire suivante, en supposant une ar√™te par canton, un train de 42m et une distance de visibilit√© de 10m :\nL‚Äôoccupation du canton 1 de t=0 √† t=300 le rend non disponible dans sa globalit√© pendant cette p√©riode.\nLes 10 derniers m√®tres du canton 1 sont non disponibles de t=300 √† t=360, car le signal en d√©but de canton 2 doit √™tre vert quand le conducteur le voit. Il est possible de consid√©rer que ce bloc-ci commence √† t=130 (quand le canton du signal suivant n‚Äôaffiche plus de vert), une superposition de blocs n‚Äô√©tant pas probl√©matique.\nL‚Äôoccupation du canton 2 de t=130 √† t=360 le rend non disponible pendant cette p√©riode. Il est √©galement non disponible √† partir de t=0, car la pr√©sence d‚Äôun train provoquerait un avertissement sur le canton 1 quand il est utilis√© par le train d√©j√† planifi√©.\nLes 42 premiers m√®tres du canton 3 sont non disponibles de t=0 √† t=360, car la queue du train doit avoir lib√©r√© le second canton.\nLe reste du canton 3 est non disponible dans sa globalit√© de t=280 √† t=360.\n","categories":"","description":"","excerpt":"Ce module prend plusieurs entr√©es pour effectuer une recherche de ‚Ä¶","ref":"/fr/docs/reference/design-docs/stdcm/pathfinding_module/inputs/","tags":"","title":"Description du format d'entr√©e"},{"body":"This module takes several parameters to find a path:\nA graph describing the physical infrastructure Unavailable sections in time intervals Origin and destination point(s) Departure time interval Maximum run time Simulation parameters (rolling stock, time step, allowances, ‚Ä¶) Among those, the first 3 require more explanations.\nInfrastructure graph Today, the input graph is the SignalingRoutes graph. But it can be any graph that represents the physical infrastructures and the paths that can be used.\nThe only constraints are: the edges must have a length, and it must be possible to compute running time on parts of an edge.\nUnavailable sections This input encodes the areas that are unavailable because of capacity constraints.\nEvery edge has a set of ‚Äúoccupancy block‚Äù. A block is made of these elements:\nStart offset End offset Start time End time Offsets are relative to the start of the edge. Each block means that the head of the train cannot be located in the edge segment during the given interval.\nThese blocks include the grid margin. If the solution needs to have an x seconds margin before the train passage, every block ends x seconds later.\nTo give an example, with the following schedule, a 42m long train, and 10m sight distance:\nThe occupancy of the block 1 from t=0 to t=300 makes it unavailable in its entirety during this time The last 10 meters of block 1 are unavailable from t=300 to t=360, because the signal at the start of block 2 must be green when the conductor sees it. It is possible to consider that this unavailability block starts at t=130 (when the next signal isn‚Äôt green), as blocks can overlap. The occupancy of block 2 from t=130 to t=360 makes it unavailable during this time. It is also unavailable from t=0, as the presence of a train in this block would cause a warning on block 1. The first 42 meters of block 3 are unavailable from t=0 to t=360, because the tail of the train must have left the block 2 at this time. The rest of block 3 is unavailable in its entirety from t=280 to t=360 ","categories":"","description":"","excerpt":"This module takes several parameters to find a path:\nA graph ‚Ä¶","ref":"/en/docs/reference/design-docs/stdcm/pathfinding_module/inputs/","tags":"","title":"Input format"},{"body":" La mod√©lisation physique joue un r√¥le important dans le c≈ìur de calcul d‚ÄôOSRD. C‚Äôest elle qui nous permet de simuler la circulation des trains, et elle doit √™tre aussi r√©aliste que possible.\nBilan des forces Pour calculer le d√©placement du train au cours du temps, il faut d‚Äôabord calculer sa vitesse √† chaque instant. Une mani√®re simple d‚Äôobtenir cette vitesse est de passer par le calcul de l‚Äôacc√©l√©ration. Gr√¢ce au principe fondamental de la dynamique, l‚Äôacc√©l√©ration du train √† chaque instant est directement d√©pendant des diff√©rentes forces qui lui sont appliqu√©es : $$ \\sum \\vec{F}=m\\vec{a} $$\nTraction : La valeur de la force de traction \\(F_{mot}\\) d√©pend de plusieurs facteurs :\ndu mat√©riel roulant de la vitesse du train \\(v^{\\prime}x\\), selon la courbe effort-vitesse ci-dessous : $$ {\\vec{F_{mot}}(v_{x^{\\prime}}, x^{\\prime})=F_{mot}(v_{x^{\\prime}}, x^{\\prime})\\vec{e_x^{\\prime}}} $$\nL‚Äôaxe x repr√©sente la vitesse du train en [km/h], l‚Äôaxe y, la valeur de la force de traction en [kN].\nde l‚Äôaction du conducteur, qui acc√©l√®re plus ou moins fort en fonction de l‚Äôendroit o√π il se trouve sur son trajet Freinage : La valeur de la force de freinage \\(F_{brk}\\) d√©pend elle aussi du mat√©riel roulant et de l‚Äôaction du conducteur mais poss√®de une valeur constante pour un mat√©riel donn√©. Dans l‚Äô√©tat actuel de la mod√©lisation, le freinage est soit nul, soit √† sa valeur maximale. $$ \\vec{F_{brk}}(x^{\\prime})=-F_{brk}(x^{\\prime}){\\vec{e_{x^{\\prime}}}} $$\nUne seconde approche de la mod√©lisation du freinage est l‚Äôapproche dite horaire, car utilis√©e pour la production horaire √† la SNCF. Dans ce cas, la d√©c√©l√©ration est fixe et le freinage ne d√©pend plus des diff√©rentes forces appliqu√©es au train. Les valeurs de d√©c√©l√©ration typiques vont de 0.4 √† 0.7m/s¬≤.\nR√©sistance √† l‚Äôavancement : Pour mod√©liser la r√©sistance √† l‚Äôavancement du train on utilise la formule de Davis qui prend en compte tous les frottements et la r√©sistance a√©rodynamique de l‚Äôair. La valeur de la resistance √† l‚Äôavancement d√©pend de la vitesse \\(v^{\\prime}_x\\). Les coefficients \\(A\\), \\(B\\), et \\(C\\) d√©pendent du mat√©riel roulant. $$ {\\vec{R}(v_{x^{\\prime}})}=-(A+Bv_{x^{\\prime}}+{Cv_{x^{\\prime}}}^2){\\vec{e_{x^{\\prime}}}} $$\nPoids (pentes + virages) : La force du poids donn√©e par le produit entre la masse \\(m\\) du train et la constante gravitationnelle \\(g\\) est projet√©e sur les axes \\(\\vec{e_x}^{\\prime}\\) et \\(\\vec{e_y}^{\\prime}\\).Pour la projection, on utilise l‚Äôangle \\(i(x^{\\prime})\\), qui est calcul√© √† partir de l‚Äôangle de d√©clivit√© \\(s(x^{\\prime})\\) corrig√© par un facteur qui prend en compte l‚Äôeffet du rayon de virage \\(r(x^{\\prime})\\). $$ \\vec{P(x^{\\prime})}=-mg\\vec{e_y}(x^{\\prime})= -mg\\Big[sin\\big(i(x^{\\prime})\\big){\\vec{e_{x^{\\prime}}}(x^{\\prime})}+cos\\big(i(x^{\\prime})\\big){\\vec{e_{{\\prime}}}(x^{\\prime})}\\Big] $$\n$$ i(x^{\\prime})= s(x^{\\prime})+\\frac{800m}{r(x^{\\prime})} $$\nR√©action du sol : La force de r√©action du sol compense simplement la composante verticale du poids, mais n‚Äôa pas d‚Äôimpact sur la dynamique du train car elle n‚Äôa aucune composante selon l‚Äôaxe \\({\\vec{e_x}^{\\prime}}\\). $$ \\vec{R_{gnd}}=R_{gnd}{\\vec{e_{y^{\\prime}}}} $$\nEquilibre des forces L‚Äô√©quation du principe fondamental de la dynamique projet√©e sur l‚Äôaxe \\({\\vec{e_x}^{\\prime}}\\) (dans le r√©f√©rentiel du train) donne l‚Äô√©quation scalaire suivante :\n$$ a_{x^{\\prime}}(t) = \\frac{1}{m}\\Big [F_{mot}(v_{x^{\\prime}}, x^{\\prime})-F_{brk}(x^{\\prime})-(A+Bv_{x^{\\prime}}+{Cv_{x^{\\prime}}}^2)-mgsin(i(x^{\\prime}))\\Big] $$\nCelle-ci est ensuite simplifi√©e en consid√©rant que malgr√© la pente le train se d√©place sur un plan et en amalgamant \\(\\vec{e_x}\\) et \\(\\vec{e_x}^{\\prime}\\). La pente a toujours un impact sur le bilan des forces mais on consid√®re que le train ne se d√©place qu‚Äôhorizontalement, ce qui donne l‚Äô√©quation simplifi√©e suivante :\n$$ a_{x}(t) = \\frac{1}{m}\\Big[F_{mot}(v_{x}, x)-F_{brk}(x)-(A+Bv_{x}+{Cv_{x}}^2)-mgsin(i(x))\\Big] $$\nR√©solution La force motrice et la force de freinage d√©pendent de l‚Äôaction du conducteur (il d√©cide d‚Äôacc√©l√©rer ou de freiner plus ou moins fort en fonction de la situation). Cette d√©pendance se traduit donc par une d√©pendance de ces deux forces √† la position du train. La composante du poids d√©pend elle aussi de la position du train, car provenant directement des pentes et des virages situ√©es sous ce dernier.\nDe plus, la force motrice d√©pend de la vitesse du train (selon la courbe effort vitesse) tout comme la r√©sistance √† l‚Äôavancement.\nCes diff√©rentes d√©pendances rendent impossible la r√©solution analytique de cette √©quation, et l‚Äôacc√©l√©ration du train √† chaque instant doit √™tre calcul√©e par int√©gration num√©rique.\n","categories":"","description":"","excerpt":" La mod√©lisation physique joue un r√¥le important dans le c≈ìur de ‚Ä¶","ref":"/fr/docs/explanation/running_time_calculation/physical_modeling/","tags":"","title":"Mod√©lisation physique"},{"body":" Physical modelling plays an important role in the OSRD core calculation. It allows us to simulate train traffic, and it must be as realistic as possible train traffic, and it must be as realistic as possible.\nForce review To calculate the displacement of the train over time, we must first calculate its speed at each instant. A simple way to obtain this speed is to calculate the acceleration. Thanks to the fundamental principle of dynamics, the acceleration of the train at each instant is directly dependent on the different forces applied to it: $$ \\sum \\vec{F}=m\\vec{a} $$\nTraction: The value of the traction force \\(F_{mot}\\) depends on several factors:\nthe rolling stock the speed of the train, \\(v^{\\prime}x\\) according to the effort-speed curve below: $$ {\\vec{F_{mot}}(v_{x^{\\prime}}, x^{\\prime})=F_{mot}(v_{x^{\\prime}}, x^{\\prime})\\vec{e_x^{\\prime}}} $$\nThe x axis represents the speed of the train in [km/h], the y axis the value of the traction force in [kN].\nthe action of the driver, who accelerates more or less strongly depending on where he is on his journey Braking : The value of the braking force \\(F_{brk}\\) also depends on the rolling stock and the driver‚Äôs action but has a constant value for a given rolling stock. In the current state of modelling, braking is either zero or at its maximum value. $$ \\vec{F_{brk}}(x^{\\prime})=-F_{brk}(x^{\\prime}){\\vec{e_{x^{\\prime}}}} $$\nA second approach to modelling braking is the so-called hourly approach, as it is used for hourly production at SNCF. In this case, the deceleration is fixed and the braking no longer depends on the different forces applied to the train. Typical deceleration values range from 0.4 to 0.7m/s¬≤.\nForward resistance: To model the forward resistance of the train, the Davis formula is used, which takes into account all the friction and aerodynamic resistance of the air. The value of the drag depends on the speed \\(v^{\\prime}_x\\). The coefficients \\(A\\), \\(B\\), et \\(C\\) depend on the rolling stock. $$ {\\vec{R}(v_{x^{\\prime}})}=-(A+Bv_{x^{\\prime}}+{Cv_{x^{\\prime}}}^2){\\vec{e_{x^{\\prime}}}} $$\nWeight (slopes + turns) : The weight force given by the product between the mass \\(m\\) of the train and the gravitational constant \\(g\\) is projected on the axes \\(\\vec{e_x}^{\\prime}\\) and \\(\\vec{e_y}^{\\prime}\\).For projection, we use the angle \\(i(x^{\\prime})\\), which is calculated from the slope angle \\(s(x^{\\prime})\\) corrected by a factor that takes into account the effect of the turning radius \\(r(x^{\\prime})\\). $$ \\vec{P(x^{\\prime})}=-mg\\vec{e_y}(x^{\\prime})= -mg\\Big[sin\\big(i(x^{\\prime})\\big){\\vec{e_{x^{\\prime}}}(x^{\\prime})}+cos\\big(i(x^{\\prime})\\big){\\vec{e_{{\\prime}}}(x^{\\prime})}\\Big] $$\n$$ i(x^{\\prime})= s(x^{\\prime})+\\frac{800m}{r(x^{\\prime})} $$\nGround Reaction : The ground reaction force simply compensates for the vertical component of the weight, but has no impact on the dynamics of the train as it has no component along the axis \\({\\vec{e_x}^{\\prime}}\\). $$ \\vec{R_{gnd}}=R_{gnd}{\\vec{e_{y^{\\prime}}}} $$\nForces balance The equation of the fundamental principle of dynamics projected onto the axis \\({\\vec{e_x}^{\\prime}}\\) (in the train frame of reference) gives the following scalar equation:\n$$ a_{x^{\\prime}}(t) = \\frac{1}{m}\\Big [F_{mot}(v_{x^{\\prime}}, x^{\\prime})-F_{brk}(x^{\\prime})-(A+Bv_{x^{\\prime}}+{Cv_{x^{\\prime}}}^2)-mgsin(i(x^{\\prime}))\\Big] $$\nThis is then simplified by considering that despite the gradient the train moves on a plane and by amalgamating \\(\\vec{e_x}\\) and \\(\\vec{e_x}^{\\prime}\\). The gradient still has an impact on the force balance, but it is assumed that the train is only moving horizontally, which gives the following simplified equation:\n$$ a_{x}(t) = \\frac{1}{m}\\Big[F_{mot}(v_{x}, x)-F_{brk}(x)-(A+Bv_{x}+{Cv_{x}}^2)-mgsin(i(x))\\Big] $$\nResolution The driving force and the braking force depend on the driver‚Äôs action (he decides to accelerate or brake more or less strongly depending on the situation). This dependence is reflected in the dependence of these two forces on the position of the train. The weight component is also dependent on the position of the train, as it comes directly from the slopes and bends below the train.\nIn addition, the driving force depends on the speed of the train (according to the speed effort curve) as does the resistance to forward motion. resistance.\nThese different dependencies make it impossible to solve this equation analytically, and the acceleration of the train at each moment must be calculated by numerical integration.\n","categories":"","description":"","excerpt":" Physical modelling plays an important role in the OSRD core ‚Ä¶","ref":"/en/docs/explanation/running_time_calculation/physical_modeling/","tags":"","title":"Physical modeling"},{"body":"Il y a 3 principaux conteneurs d√©ploy√©s dans une configuration OSRD standard :\nGateway (inclut le frontend) : Sert le front-end, g√®re l‚Äôauthentification et proxy les requ√™tes vers le backend. Editoast : Agit comme le backend qui interagit avec le front-end. Core : G√®re les calculs et la logique m√©tier, appel√© par Editoast. D√©ploiement standard Le d√©ploiement standard peut √™tre repr√©sent√© par le diagramme suivant.\nflowchart TD gw[\"gateway\"] front[\"fichiers statiques front-end\"] gw -- fichier local --\u003e front navigateur --\u003e gw gw -- HTTP --\u003e editoast editoast -- HTTP --\u003e core Les requ√™tes externes sont re√ßues par le gateway. Si le chemin demand√© commence par /api, il sera transf√©r√© en utilisant HTTP vers editoast, sinon il servira un fichier avec le chemin demand√©. Editoast atteint le core en utilisant HTTP si n√©cessaire.\nLe gateway n‚Äôest pas seulement un proxy inverse avec le bundle front-end inclus, il fournit √©galement tous les m√©canismes d‚Äôauthentification : utilisant OIDC ou des tokens.\n","categories":"","description":"Comment les conteneurs fonctionnent ensemble et comment ils sont construits","excerpt":"Comment les conteneurs fonctionnent ensemble et comment ils sont ‚Ä¶","ref":"/fr/docs/explanation/containers-architecture/","tags":"","title":"Architecture des conteneurs"},{"body":"There are 3 main containers deployed in a standard OSRD setup:\nGateway (includes the frontend): Serves the front end, handles authentication and proxies requests to the backend. Editoast: Acts as the backend that interacts with the front end. Core: Handles computation and business logic, called by Editoast. Standard deployment The standard deployment can be represented with the following diagram.\nflowchart TD gw[\"gateway\"] front[\"front-end static files\"] gw -- local file --\u003e front browser --\u003e gw gw -- HTTP --\u003e editoast editoast -- HTTP --\u003e core External requests are received by the gateway. If the path asked starts with /api it will be forwarded using HTTP to editoast, otherwise it will serve a file with the asked path. Editoast reach the core using HTTP if required.\nThe gateway is not only a reverse proxy with the front-end bundle included, it also provides all the authentication mechanisms: using OIDC or tokens.\n","categories":"","description":"How the containers works together and how they are built","excerpt":"How the containers works together and how they are built","ref":"/en/docs/explanation/containers-architecture/","tags":"","title":"Containers architecture"},{"body":"D√©j√†, merci d‚Äôavoir pris le temps de contribuer !\nSi les sections suivantes forment un guide du contributeur, ce n‚Äôest pas pour autant un ensemble de r√®gles strictes. En fait, si vous avez d√©j√† contribu√© √† des gros projets opensource, la suite ne sera pas surprenante. Dans le cas contraire, elle vous sera probablement tr√®s utile !\nCommuniquer Vous pouvez gagner du temps en discutant de votre projet de contribution avec les autres contributeurs :\nRejoignez le salon de messagerie instantan√©e sur IRC √† libera.chat#osrd Cr√©ez une issue pour avoir un endroit un discuter de votre contribution Se renseigner Comme dans tout projet, chaque changement se repose sur ce qui a √©t√© fait par le pass√©. Avant d‚Äôapporter un changement, renseignez-vous sur l‚Äôexistant :\nVous pouvez lire la documentation technique Il est pr√©f√©rable de lire le code source de l‚Äôapplication en rapport avec votre projet Vous pouvez contacter les derniers d√©veloppeurs √† avoir travaill√© sur les zones du code en rapport avec votre projet ","categories":"","description":"Comment apporter sa pierre √† l'√©difice","excerpt":"Comment apporter sa pierre √† l'√©difice","ref":"/fr/docs/guides/contribute/","tags":"","title":"Contribuer √† OSRD"},{"body":"First off, thanks for taking the time to contribute!\nThe following chapters are a set of guidelines for contributing to OSRD1. If you have already contributed to open source projects before, you probably won‚Äôt be surprised. If you have not, it will probably help a lot!\nCommunicate Chatting with other contributors is a great way to speed things up:\nJoin our instant messaging room on IRC at libera.chat#osrd Create an issue to discuss your contribution project Inquire Just like with any project, changes rely on past work. Before making changes, it is best to learn about what‚Äôs already there:\nread technical documentation read the existing source code related to your project chat with developers who last worked on areas you are interested in These guidelines are mostly not strict rules, it‚Äôs probably fine to do things slightly differently.¬†‚Ü©Ô∏é\n","categories":"","description":"Learn about the how we work, and how you can work with us","excerpt":"Learn about the how we work, and how you can work with us","ref":"/en/docs/guides/contribute/","tags":"","title":"Contribute to OSRD"},{"body":"First of all, we recommend learning about the containers architecture of OSRD.\nWe will cover how to deploy OSRD within the following setups:\nUsing docker compose on a single node. Using helm on a kubernetes cluster. It is also possible to deploy each service of OSRD manually on a system, but we will not cover this topic within this guide.\n","categories":"","description":"Learn how to deploy OSRD in various environments","excerpt":"Learn how to deploy OSRD in various environments","ref":"/en/docs/guides/deploy/","tags":"","title":"Deploy OSRD"},{"body":"Tout d‚Äôabord, nous recommandons de se familiariser sur l‚Äôarchitecture des conteneurs d‚ÄôOSRD.\nNous allons couvrir comment d√©ployer OSRD dans les configurations suivantes :\nUtiliser docker compose sur un seul n≈ìud. Utiliser helm sur un cluster kubernetes. Il est √©galement possible de d√©ployer manuellement chaque service d‚ÄôOSRD sur un syst√®me, mais nous ne couvrirons pas ce sujet dans ce guide.\n","categories":"","description":"Apprenez √† d√©ployer OSRD dans diff√©rents environnements","excerpt":"Apprenez √† d√©ployer OSRD dans diff√©rents environnements","ref":"/fr/docs/guides/deploy/","tags":"","title":"D√©ployer OSRD"},{"body":"The OSRD project includes a docker-compose.yml file designed to facilitate the deployment of a fully functional OSRD environment. Primarily intended for development purposes, this Docker Compose configuration can also be adapted for quick, single-node deployments.\nPrerequisites Before proceeding with the deployment, ensure that you have the following installed:\nDocker Docker Compose Configuration Overview The docker-compose.yml file defines the following services:\nPostgreSQL: A PostgreSQL database with PostGIS extension. Redis: A Redis server for caching. Core: The core OSRD service. Front: The front-end service for OSRD. Editoast: A OSRD service responsible for various editorial functions. Gateway: Serves as the gateway for the OSRD services. Wait-Healthy: A utility service to ensure all services are healthy before proceeding. Each service is configured with health checks, volume mounts and necessary environment variables.\nDeployment Steps Clone the Repository: First, clone the OSRD repository to your local machine. Environment Variables (optional): Set necessary environment variables if you need to adjust some configurations. Build and Run: Navigate to the directory containing docker-compose.yml and run: docker-compose up --build This command builds the images and starts the services defined in the Docker Compose file.\nAccessing Services While all HTTP service are used through the gateway (http://localhost:4000), you can access directly each service using their exposed ports:\nPostgreSQL: Accessible on localhost:5432. Redis: Accessible on localhost:6379. Core Service: Accessible on localhost:8080. Front-End: Accessible on localhost:3000. Editoast: Accessible on localhost:8090. Notes and Considerations This setup is designed for development and quick deployments. For production environments, additional considerations for security, scalability and reliability should be addressed. Ensure that the POSTGRES_PASSWORD and other sensitive credentials are securely managed, especially in production deployments. ","categories":"","description":"Using docker compose for single node deployment","excerpt":"Using docker compose for single node deployment","ref":"/en/docs/guides/deploy/docker-compose/","tags":"","title":"Docker Compose"},{"body":"Le projet OSRD inclut un fichier docker-compose.yml con√ßu pour faciliter le d√©ploiement d‚Äôun environnement OSRD pleinement fonctionnel. Initialement destin√© √† des fins de d√©veloppement, ce Docker Compose peut √©galement √™tre adapt√© pour des d√©ploiements rapides sur un seul n≈ìud.\nPr√©requis Avant de proc√©der au d√©ploiement, assurez-vous que vous avez install√© :\nDocker Docker Compose Vue d‚Äôensemble de la configuration Le fichier docker-compose.yml d√©finit les services suivants :\nPostgreSQL : Une base de donn√©es PostgreSQL avec l‚Äôextension PostGIS. Redis : Un serveur Redis pour le cache. Core : Le service central OSRD. Front : Le service front-end pour OSRD. Editoast : Un service OSRD responsable de diverses fonctions d‚Äô√©dition. Gateway : Sert de passerelle pour les services OSRD. Wait-Healthy : Un service utilitaire pour s‚Äôassurer que tous les services sont sains avant de proc√©der. Chaque service est configur√© avec des contr√¥les de sant√©, des montages de volumes et les variables d‚Äôenvironnement n√©cessaires.\n√âtapes du d√©ploiement Cloner le d√©p√¥t : Tout d‚Äôabord, clonez le d√©p√¥t OSRD sur votre machine locale. Variables d‚Äôenvironnement (facultatif) : D√©finissez les variables d‚Äôenvironnement n√©cessaires si vous devez ajuster certaines configurations. Construire et ex√©cuter : Naviguez vers le r√©pertoire contenant docker-compose.yml et ex√©cutez : docker-compose up --build Cette commande construit les images et d√©marre les services d√©finis dans le fichier Docker Compose.\nAcc√®s aux services Bien que tous les services HTTP soient utilis√©s via la passerelle (http://localhost:4000), vous pouvez acc√©der directement √† chaque service en utilisant leurs ports expos√©s :\nPostgreSQL : Accessible sur localhost:5432. Redis : Accessible sur localhost:6379. Service Core : Accessible sur localhost:8080. Front-End : Accessible sur localhost:3000. Editoast : Accessible sur localhost:8090. Notes et consid√©rations Cette configuration est con√ßue pour le d√©veloppement et les d√©ploiements rapides. Pour les environnements de production, des consid√©rations suppl√©mentaires en mati√®re de s√©curit√©, de scalabilit√© et de fiabilit√© doivent √™tre abord√©es. Assurez-vous que le POSTGRES_PASSWORD et d‚Äôautres identifiants sensibles sont g√©r√©s en toute s√©curit√©, en particulier dans les d√©ploiements de production. ","categories":"","description":"Utiliser docker compose pour un d√©ploiement sur un seul n≈ìud","excerpt":"Utiliser docker compose pour un d√©ploiement sur un seul n≈ìud","ref":"/fr/docs/guides/deploy/docker-compose/","tags":"","title":"Docker Compose"},{"body":"Description Chaque √©l√©ment mobile, aiguille ou passage √† niveau, a une liste d‚Äô√©tats possibles. Ces √©tats sont mutuellement exclusifs.\nD√©pendances statique une liste d‚Äô√©lements mobiles statique liste des √©tats possibles de chaque √©l√©ment mobile Op√©rations possibles observer un √©l√©ment mobile verrouiller / d√©verrouiller un √©l√©ment mobile bouger un √©l√©ment mobile ","categories":"","description":"G√®re l'√©tat des organes de commande des aiguilles, passages √† niveau, ‚Ä¶","excerpt":"G√®re l'√©tat des organes de commande des aiguilles, passages √† niveau, ‚Ä¶","ref":"/fr/docs/reference/design-docs/interlocking/movable-elements/","tags":"","title":"√âl√©ments mobiles"},{"body":"La Helm Chart du projet OSRD fournit une solution pour d√©ployer les services OSRD dans un environnement Kubernetes de mani√®re standardis√©e. Ce document d√©crit les options de configuration disponibles dans le Helm Chart.\nPr√©requis Avant de proc√©der au d√©ploiement, assurez-vous que vous avez install√© :\nUn cluster Kubernetes op√©rationnel Une base de donn√©es PostgreSQL avec PostGIS Un serveur Redis (utilis√© pour le cache) Le serveur de tuiles Le serveur de tuiles est le composant responsable de la g√©n√©ration des tuiles cartographiques vectorielles. Il est recommand√© de le s√©parer du Editoast standard lors de l‚Äôex√©cution d‚Äôune configuration de production, car Editoast ne peut pas √™tre mis √† l‚Äô√©chelle horizontalement (il est stateful).\nVous pouvez visualiser le d√©ploiement recommand√© ici :\nflowchart TD gw[\"gateway\"] front[\"fichier statiques front-end\"] gw -- fichier local --\u003e front navigateur --\u003e gw gw -- HTTP --\u003e editoast gw -- HTTP --\u003e tileserver-1 gw -- HTTP --\u003e tileserver-2 gw -- HTTP --\u003e tileserver-n... editoast -- HTTP --\u003e core Le Helm Chart utilise leHorizontalPodAutoscaler de Kubernetes pour lancer autant de serveurs de tuiles que n√©cessaire en fonction de la charge de travail.\nConfiguration de la Helm Chart (values) Le Helm Chart est configurable √† travers les valeurs suivantes :\nService Core core : Configuration pour le service central OSRD. internalUrl : URL interne pour la communication entre services. image : Image Docker √† utiliser. pullPolicy : Politique de r√©cup√©ration de l‚Äôimage. replicaCount : Nombre de r√©plicas. service : Type de service et configuration des ports. resources, env, annotations, labels, nodeSelector, tolerations, affinity : Diverses options de d√©ploiement Kubernetes. Service Editoast editoast : Configuration pour le service Editoast. Comprend des options similaires √† core pour le d√©ploiement Kubernetes. init : Configuration d‚Äôinitialisation. Serveur de tuiles tileServer : Service Editoast sp√©cialis√© qui sert uniquement des tuiles cartographiques vectorielles. enabled : D√©finir sur true pour activer la fonctionnalit√© de serveur de tuiles. image : Image Docker √† utiliser (g√©n√©ralement la m√™me que Editoast). replicaCount : Nombre de r√©plicas, permettant la mise √† l‚Äô√©chelle horizontale. hpa : Configuration de l‚ÄôHorizontal Pod Autoscaler. Autres options standard de d√©ploiement Kubernetes. Gateway gateway : Configuration pour le gateway OSRD. Comprend des options de service, d‚Äôingress et d‚Äôautres options de d√©ploiement Kubernetes. config : Configurations sp√©cifiques pour l‚Äôauthentification et les proxys de confiance. D√©ploiement Le chart est disponible dans le d√©p√¥t OCI ghcr. Vous pouvez trouver 2 versions de la chart :\nCharts stables : oci://ghcr.io/osrd-project/charts/osrd Charts de d√©veloppement : oci://ghcr.io/osrd-project/charts/osrd-dev Pour d√©ployer les services OSRD en utilisant Helm :\nConfigurer les valeurs : Ajustez les valeurs selon vos besoins de d√©ploiement.\nInstaller le Chart : Utilisez la commande helm install pour installer la chart dans votre cluster Kubernetes.\nhelm install osrd oci://ghcr.io/osrd-project/charts/osrd -f values.yml ","categories":"","description":"Utilisation de Helm pour les d√©ploiements Kubernetes","excerpt":"Utilisation de Helm pour les d√©ploiements Kubernetes","ref":"/fr/docs/guides/deploy/kubernetes/","tags":"","title":"Kubernetes avec Helm"},{"body":"The OSRD project‚Äôs Helm Chart provides a flexible and efficient way to deploy OSRD services in a Kubernetes environment. This document outlines the configuration options available in the Helm Chart, focusing on each service component.\nPrerequisites Before proceeding with the deployment, ensure that you have the following installed:\nA Kubernetes cluster up and running A PostgreSQL database with PostGIS A Redis server (used for caching) The tileserver Tileserver is the component responsible for generating vector map tiles. It is recommended to separate it from standard Editoast while running a production setup since Editoast cannot be scaled horizontally (it is stateful).\nYou can visualize the recommended deployment here:\nflowchart TD gw[\"gateway\"] front[\"front-end static files\"] gw -- local file --\u003e front browser --\u003e gw gw -- HTTP --\u003e editoast gw -- HTTP --\u003e tileserver-1 gw -- HTTP --\u003e tileserver-2 gw -- HTTP --\u003e tileserver-n... editoast -- HTTP --\u003e core The Helm chart leverages Kubernete‚Äôs HorizontalPodAutoscaler in order to spawn as much tileserver as required for the current workload.\nChart Values Overview The Helm Chart is configurable through the following values:\nCore Service core: Configuration for the core OSRD service. internalUrl: Internal URL for service communication. image: Docker image to use. pullPolicy: Image pull policy. replicaCount: Number of replicas. service: Service type and port configuration. resources, env, annotations, labels, nodeSelector, tolerations, affinity: Various Kubernetes deployment options. Editoast Service editoast: Configuration for the Editoast service. Includes similar options as core for Kubernetes deployment. init: Initialization configuration. Tile Server tileServer: Specialized Editoast service that serves only vector map tiles. enabled: Set to true to enable tile server functionality. image: Docker image to use (typically the same as Editoast). replicaCount: Number of replicas, allowing for horizontal scaling. hpa: Horizontal Pod Autoscaler configuration. Other standard Kubernetes deployment options. Gateway gateway: Configuration for the OSRD gateway. Includes service, ingress, and other Kubernetes deployment options. config: Specific configurations for authentication and trusted proxies. Deployment The chart is available at ghcr OCI repository. You can find 2 Helm charts:\nStable charts: oci://ghcr.io/osrd-project/charts/osrd Dev charts: oci://ghcr.io/osrd-project/charts/osrd-dev To deploy the OSRD services using this Helm Chart:\nConfigure Values: Adjust the values in the Helm Chart to suit your deployment needs.\nInstall Chart: Use Helm to install the chart into your Kubernetes cluster.\nhelm install osrd oci://ghcr.io/osrd-project/charts/osrd -f values.yml ","categories":"","description":"Using Helm for Kubernetes deployments","excerpt":"Using Helm for Kubernetes deployments","ref":"/en/docs/guides/deploy/kubernetes/","tags":"","title":"Kubernetes with Helm"},{"body":"Tout est pr√©sent√© dans un site d√©di√© https://design.osrd.fr\nUn ¬´ design system ¬ª est en cours d‚Äô√©laboration.\n","categories":"","description":"Les couleurs, la police, les usages...","excerpt":"Les couleurs, la police, les usages...","ref":"/fr/docs/guides/design/","tags":"","title":"Le design d'OSRD"},{"body":"Vous pouvez t√©l√©charger chaque logo ind√©pendamment en cliquant directement dessus, ou tous les logos compress√©s dans un fichier zip.\nIl est conseill√© de bien choisir le logo √† utiliser en fonction du fond sur lequel vous voulez l‚Äôafficher.\nLa modification, ajout ou suppression de l‚Äôombrage autre que tel que pr√©sent√© dans les logos ne sont pas autoris√©s (cela est valable plus globalement dans tout le design, le choix de mettre des ombres port√©es fait partie des r√©flexions de design, ce n‚Äôest pas un √©l√©ment variable).\nOfficiel Officiel pour les fonds sombres Blanc Noir Favicons, logos seuls üö´ Ce qu‚Äôon ne doit pas faire Trop petit (\u003c 16px de hauteur) Disproportion Changer la couleur du texte ou l‚Äôombre port√©e Changer le sens D√©formation ‚úÖ Ce qu‚Äôon peut faire Modification de la couleur interne pour un √©v√®nement Utilisation seule du logo (sans le texte) Les couleurs Ces couleurs sont celles du logo, elles ne sont pas √† confondre avec celles du design global de l‚Äôinterface d‚ÄôOSRD.\n#786ABF #C7B2DE\n","categories":"","description":"Le logo d'OSRD, ses variantes, et son usage","excerpt":"Le logo d'OSRD, ses variantes, et son usage","ref":"/fr/docs/guides/logo/","tags":"","title":"Le logo"},{"body":"You can download each logo independently by clicking directly on it, or all the logos compressed into a zip file.\nIt is advisable to carefully choose the logo you want to use, depending on the background on which you want to display it.\nModification, addition or deletion of the shading other than as presented in the logos are not authorised (this applies more generally throughout the design, the choice to use drop shadows is part of the design considerations, it is not a variable element).\nOfficial Official for dark backgrounds White Black Favicons, logo without text üö´ What you can‚Äôt do Too small (\u003c 16px height) Disproportion Change the text colour or drop shadow Changing direction Deformation ‚úÖ What you can do Changing the internal colour for a specific event Use of logo only (without text) Colors These colours are those of the logo and should not be confused with those of the overall design of the OSRD interface.\n#786ABF #C7B2DE\n","categories":"","description":"The OSRD logo, its variants, and its use","excerpt":"The OSRD logo, its variants, and its use","ref":"/en/docs/guides/logo/","tags":"","title":"Logo"},{"body":"Everything is presented on a dedicated website https://design.osrd.fr\nA ‚Äúdesign system‚Äù is being developed.\n","categories":"","description":"Colours, fonts, uses...","excerpt":"Colours, fonts, uses...","ref":"/en/docs/guides/design/","tags":"","title":"OSRD's design"},{"body":"Tutorials take you by the hand through a series of steps to complete small projects. Start here if you‚Äôre new to OSRD. Also look at the ‚ÄúFirst steps‚Äù.\n","categories":"","description":"Step by step, start to finish guides","excerpt":"Step by step, start to finish guides","ref":"/en/docs/tutorials/","tags":"","title":"Tutorials"},{"body":"Les tutoriels vous guident pas-√†-pas et de bout en bout dans votre d√©couverte de l‚Äôapplication. Commencez par l√† si vous d√©butez avec OSRD.\n","categories":"","description":"Guides pas-√†-pas et de bout en bout","excerpt":"Guides pas-√†-pas et de bout en bout","ref":"/fr/docs/tutorials/","tags":"","title":"Tutoriels"},{"body":"","categories":"","description":"","excerpt":"","ref":"/en/blog/news/","tags":"","title":"News"},{"body":"","categories":"","description":"","excerpt":"","ref":"/fr/blog/news/","tags":"","title":"News"},{"body":"General principle The problem is still a pathfinding problem in a given graph. Once the problem is encoded as a graph search, it is possible to reuse our existing tools for this purpose.\nWe consider the product graph of position, time, and speed. This means that every graph element contains these 3 variables (among other things)\nEvery graph edge is computed using running-time calculation to get speed and positions as functions of time.\nGraphical representation Space is encoded with a graph that contains the physical infrastructure.\nIt is then ‚Äúduplicated‚Äù at different times.\nThe nodes are then linked together in a way that reflects travel time.\nNotes The graph is constructed on the fly as it is explored. It is discretized in time, to evaluate which nodes have already been visited. We keep full accuracy of time values, but two nodes at the same place and close times are considered identical. Every edge is computed with a running time computation. Speed isn‚Äôt discretized or considered to check visited nodes, it‚Äôs only used to compute time. By default, the train always goes as fast as it can (while still following standard allowances). It only slows down when necessary. Example For example, with the following infrastructure, using the track graph: Exploring the solution graph can give the following result: ","categories":"","description":"","excerpt":"General principle The problem is still a pathfinding problem in a ‚Ä¶","ref":"/en/docs/reference/design-docs/stdcm/pathfinding_module/graph_representation/","tags":"","title":"Encoding the solution space"},{"body":" Introduction La mod√©lisation physique ayant montr√© que l‚Äôacc√©l√©ration du train √©tait influenc√©e par diff√©rents facteurs variant le long du trajet (pente, courbure, force de traction du moteur‚Ä¶), le calcul doit passer par une m√©thode d‚Äôint√©gration num√©rique. Le trajet est alors s√©par√© en √©tapes suffisamment courtes pour consid√©rer tous ces facteurs comme constants, ce qui permet cette fois ci d‚Äôutiliser l‚Äô√©quation du mouvement pour calculer le d√©placement et la vitesse du train.\nLa m√©thode d‚Äôint√©gration num√©rique d‚ÄôEuler est la plus simple pour effectuer ce genre de calcul, mais elle pr√©sente un certain nombre d‚Äôinconv√©nients. Cet article explique la m√©thode d‚ÄôEuler, pourquoi elle ne convient pas aux besoins d‚ÄôOSRD et quelle m√©thode d‚Äôint√©gration doit √™tre utilis√©e √† la place.\nLa m√©thode d‚ÄôEuler La m√©thode d‚ÄôEuler appliqu√©e √† l‚Äôint√©gration de l‚Äô√©quation du mouvement d‚Äôun train est :\n$$v(t+dt) = a(v(t), x(t))dt + v(t)$$\n$$x(t+dt) = \\frac{1}{2}a(v(t), x(t))dt^2 + v(t)dt + x(t)$$\n¬†\nLes avantages de la m√©thode d‚ÄôEuler La m√©thode d‚ÄôEuler a pour avantages d‚Äô√™tre tr√®s simple √† impl√©menter et d‚Äôavoir un calcul plut√¥t rapide pour un pas de temps donn√©, en comparaison avec d‚Äôautres m√©thodes d‚Äôint√©gration num√©rique (voir annexe)\nLes inconv√©nients de la m√©thode d‚ÄôEuler La m√©thode d‚Äôint√©gration d‚ÄôEuler pr√©sente un certain nombre de probl√®mes pour OSRD :\nElle est relativement impr√©cise, et donc n√©cessite un faible pas de temps, ce qui g√©n√®re beaucoup de donn√©es. En int√©grant dans le temps, on ne conna√Æt que les conditions du point de d√©part du pas d‚Äôint√©gration (pente, param√®tres d‚Äôinfrastructure, etc.) car on ne peut pas pr√©dire pr√©cis√©ment l‚Äôendroit o√π il se termine. On ne peut pas anticiper les futurs changements de directive : le train ne r√©agit qu‚Äôen comparant son √©tat actuel √† sa consigne au m√™me instant. Pour illustrer c‚Äôest un peu comme si le conducteur √©tait incapable de voir devant lui, alors que dans la r√©alit√© il anticipe en fonction des signaux, pentes, virages qu‚Äôil voit devant lui. La m√©thode Runge-Kutta 4 La m√©thode Runge-Kutta 4 appliqu√©e √† l‚Äôint√©gration de l‚Äô√©quation du mouvement d‚Äôun train est :\n$$v(t+dt) = v(t) + \\frac{1}{6}(k_1 + 2k_2 + 2k_3 + k_4)dt$$\nAvec :\n$$k_1 = a(v(t), x(t))$$\n$$k_2 = a\\Big(v(t+k_1\\frac{dt}{2}), x(t) + v(t)\\frac{dt}{2} + k_1\\frac{dt^2}{8}\\Big)$$\n$$k_3 = a\\Big(v(t+k_2\\frac{dt}{2}), x(t) + v(t)\\frac{dt}{2} + k_2\\frac{dt^2}{8}\\Big)$$\n$$k_4 = a\\Big(v(t+k_3dt), x(t) + v(t)dt + k_3\\frac{dt^2}{2}\\Big)$$\n¬†\nLes avantages de la m√©thode de Runge Kutta 4 La m√©thode d‚Äôint√©gration de Runge Kutta 4 permet de r√©pondre aux diff√©rents probl√®mes soulev√©s par celle d‚ÄôEuler :\nElle permet d‚Äôanticiper les changements de directive au sein d‚Äôun pas de calcul, repr√©sentant ainsi davantage la r√©alit√© de conduite d‚Äôun train. Elle est plus pr√©cise pour le m√™me temps de calcul (voir annexe), permettant des √©tapes d‚Äôint√©gration plus grandes, donc moins de points de donn√©es. Les inconv√©nients de la m√©thode de Runge Kutta 4 Le seul inconv√©nient notable de la m√©thode de Runge Kutta 4 rencontr√© pour l‚Äôinstant est sa difficult√© d‚Äôimpl√©mentation.\nLe choix de la m√©thode d‚Äôint√©gration pour OSRD √âtude de la pr√©cision et de la vitesse de calcul Diff√©rentes m√©thodes d‚Äôint√©gration auraient pu remplacer l‚Äôint√©gration d‚ÄôEuler de base dans l‚Äôalgorithme d‚ÄôOSRD. Afin de d√©cider quelle m√©thode conviendrait le mieux, une √©tude sur la pr√©cision et la vitesse de calcul de diff√©rentes m√©thodes a √©t√© men√©e. Cette √©tude sert √† compar√© les m√©thodes suivantes :\nEuler Euler-Cauchy Runge-Kutta 4 Adams 2 Adams 3 Toutes les explications sur ces m√©thodes peuvent √™tre trouv√©es dans ce document, et le code python utilis√© pour la simulation est ici.\nLa simulation calcule la position et la vitesse d‚Äôun TGV acc√©l√©rant sur une ligne droite plate.\nSimulations √† pas de temps √©quivalent Une courbe de r√©f√©rence a √©t√© simul√©e en utilisant la m√©thode d‚ÄôEuler avec un pas de temps de 0,1s, puis le m√™me parcours a √©t√© simul√© en utilisant les autres m√©thodes avec un pas de temps de 1s. Il est alors possible de comparer simplement chaque courbe √† la courbe de r√©f√©rence, en calculant la valeur absolue de la diff√©rence √† chaque point calcul√©. Voici l‚Äôerreur absolue r√©sultante de la position du train sur sa distance parcourue :\nIl appara√Æt imm√©diatement que la m√©thode d‚ÄôEuler est moins pr√©cise que les quatre autres d‚Äôenviron un ordre de grandeur. Chaque courbe pr√©sente un pic o√π la pr√©cision est extr√™mement √©lev√©e (erreur extr√™mement faible), ce qui s‚Äôexplique par le fait que toutes les courbes commencent l√©g√®rement au-dessus de la courbe de r√©f√©rence, la croisent en un point et finissent l√©g√®rement en dessous, ou vice versa.\nComme la pr√©cision n‚Äôest pas le seul indicateur important, le temps de calcul de chaque m√©thode a √©t√© mesur√©. Voici ce que nous obtenons pour les m√™mes param√®tres d‚Äôentr√©e :\nM√©thode d‚Äôint√©gration Temps de calcul (s) Euler 1.86 Euler-Cauchy 3.80 Runge-Kutta 4 7.01 Adams 2 3.43 Adams 3 5.27 Ainsi, Euler-Cauchy et Adams 2 sont environ deux fois plus lents que Euler, Adams 3 est environ trois fois plus lent, et RK4 est environ quatre fois plus lent. Ces r√©sultats ont √©t√© v√©rifi√©s sur des simulations beaucoup plus longues, et les diff√©rents ratios sont maintenus.\nSimulation √† temps de calcul √©quivalent Comme les temps de calcul de toutes les m√©thodes d√©pendent lin√©airement du pas de temps, il est relativement simple de comparer la pr√©cision pour un temps de calcul √† peu pr√®s identique. En multipliant le pas de temps d‚ÄôEuler-Cauchy et d‚ÄôAdams 2 par 2, le pas de temps d‚ÄôAdams 3 par 3, et le pas de temps de RK4 par 4, voici les courbes d‚Äôerreur absolue r√©sultantes :\nEt voici les temps de calcul :\nM√©thode d‚Äôint√©gration Temps de calcul (s) Euler 1.75 Euler-Cauchy 2.10 Runge-Kutta 4 1.95 Adams 2 1.91 Adams 3 1.99 Apr√®s un certain temps, RK4 tend √† √™tre la m√©thode la plus pr√©cise, l√©g√®rement plus pr√©cise que Euler-Cauchy, et toujours bien plus pr√©cise que la m√©thode d‚ÄôEuler.\nConclusions de l‚Äô√©tude L‚Äô√©tude de la pr√©cision et de la vitesse de calcul pr√©sent√©e ci-dessus montre que RK4 et Euler-Cauchy seraient de bons candidats pour remplacer l‚Äôalgorithme d‚ÄôEuler dans OSRD : les deux sont rapides, pr√©cis, et pourraient remplacer la m√©thode d‚ÄôEuler sans n√©cessiter de gros changements d‚Äôimpl√©mentation car ils ne font que des calculs au sein du pas de temps en cours de calcul. Il a √©t√© d√©cid√© qu‚ÄôOSRD utiliserait la m√©thode Runge-Kutta 4 parce qu‚Äôelle est l√©g√®rement plus pr√©cise que Euler-Cauchy et que c‚Äôest une m√©thode bien connue pour ce type de calcul, donc tr√®s adapt√©e √† un simulateur open-source.\n","categories":"","description":"","excerpt":" Introduction La mod√©lisation physique ayant montr√© que l‚Äôacc√©l√©ration ‚Ä¶","ref":"/fr/docs/explanation/running_time_calculation/numerical_integration/","tags":"","title":"Int√©gration num√©rique"},{"body":" Introduction Since physical modelling has shown that the acceleration of the train is influenced by various factors that vary along the route (gradient, curvature, engine traction force, etc.), the calculation must be carried out using a numerical integration method. The path is then separated into sufficiently short steps to consider all these factors as constant, which allows this time to use the equation of motion to calculate the displacement and speed of the train.\nEuler‚Äôs method of numerical integration is the simplest way of doing this, but it has a number of drawbacks. This article explains the Euler method, why it is not suitable for OSRD purposes and which integration method should be used instead.\nEuler‚Äôs method The Euler method applied to the integration of the equation of motion of a train is:\n$$v(t+dt) = a(v(t), x(t))dt + v(t)$$\n$$x(t+dt) = \\frac{1}{2}a(v(t), x(t))dt^2 + v(t)dt + x(t)$$\n¬†\nAdvantages of Euler‚Äôs method The advantages of the Euler method are that it is very simple to implement and has a rather fast calculation for a given time step, compared to other numerical integration methods (see appendix)\nDisadvantages of the Euler‚Äôs method The Euler integration method presents a number of problems for OSRD:\nIt is relatively imprecise, and therefore requires a small time step, which generates a lot of data. With time integration, only the conditions at the starting point of the integration step (gradient, infrastructure parameters, etc.) are known, as one cannot predict precisely where it will end. We cannot anticipate future changes in the directive: the train only reacts by comparing its current state with its set point at the same time. To illustrate, it is as if the driver is unable to see ahead, whereas in reality he anticipates according to the signals, slopes and bends he sees ahead. Runge-Kutta‚Äôs 4 method The Runge-Kutta 4 method applied to the integration of the equation of motion of a train is:\n$$v(t+dt) = v(t) + \\frac{1}{6}(k_1 + 2k_2 + 2k_3 + k_4)dt$$\nWith:\n$$k_1 = a(v(t), x(t))$$\n$$k_2 = a\\Big(v(t+k_1\\frac{dt}{2}), x(t) + v(t)\\frac{dt}{2} + k_1\\frac{dt^2}{8}\\Big)$$\n$$k_3 = a\\Big(v(t+k_2\\frac{dt}{2}), x(t) + v(t)\\frac{dt}{2} + k_2\\frac{dt^2}{8}\\Big)$$\n$$k_4 = a\\Big(v(t+k_3dt), x(t) + v(t)dt + k_3\\frac{dt^2}{2}\\Big)$$\n¬†\nAdvantages of Runge Kutta‚Äôs 4 method Runge Kutta‚Äôs method of integration 4 addresses the various problems raised by Euler‚Äôs method:\nIt allows the anticipation of directive changes within a calculation step, thus representing more accurately the reality of driving a train. It is more accurate for the same calculation time (see appendix), allowing for larger integration steps and therefore fewer data points. Disavantages of Runge Kutta‚Äôs 4 method The only notable drawback of the Runge Kutta 4 method encountered so far is its difficulty of implementation.\nThe choice of integration method for OSRD Study of accuracy and speed of calculation Different integration methods could have replaced the basic Euler integration in the OSRD algorithm. In order to decide which method would be most suitable, a study of the accuracy and computational speed of different methods was carried out. This study compared the following methods:\nEuler Euler-Cauchy Runge-Kutta 4 Adams 2 Adams 3 All explanations of these methods can be found (in french) in this document, and the python code used for the simulation is here.\nThe simulation calculates the position and speed of a high-speed train accelerating on a flat straight line.\nEquivalent time step simulations A reference curve was simulated using the Euler method with a time step of 0.1s, then the same path was simulated using the other methods with a time step of 1s. It is then possible to simply compare each curve to the reference curve, by calculating the absolute value of the difference at each calculated point. The resulting absolute error of the train‚Äôs position over its distance travelled is as follows:\nIt is immediately apparent that the Euler method is less accurate than the other four by about an order of magnitude. Each curve has a peak where the accuracy is extremely high (extremely low error), which is explained by the fact that all curves start slightly above the reference curve, cross it at one point and end slightly below it, or vice versa.\nAs accuracy is not the only important indicator, the calculation time of each method was measured. This is what we get for the same input parameters:\nIntegration method Calculation time (s) Euler 1.86 Euler-Cauchy 3.80 Runge-Kutta 4 7.01 Adams 2 3.43 Adams 3 5.27 Thus, Euler-Cauchy and Adams 2 are about twice as slow as Euler, Adams 3 is about three times as slow, and RK4 is about four times as slow. These results have been verified on much longer simulations, and the different ratios are maintained.\nSimulation with equivalent calculation time As the computation times of all methods depend linearly on the time step, it is relatively simple to compare the accuracy for approximately the same computation time. Multiplying the time step of Euler-Cauchy and Adams 2 by 2, the time step of Adams 3 by 3, and the time step of RK4 by 4, here are the resulting absolute error curves:\nAnd here are the calculation times:\nIntegration method Calculation time (s) Euler 1.75 Euler-Cauchy 2.10 Runge-Kutta 4 1.95 Adams 2 1.91 Adams 3 1.99 After some time, RK4 tends to be the most accurate method, slightly more accurate than Euler-Cauchy, and still much more accurate than the Euler method.\nConclusions of the study The study of accuracy and computational speed presented above shows that RK4 and Euler-Cauchy would be good candidates to replace the Euler algorithm in OSRD: both are fast, accurate, and could replace the Euler method without requiring large implementation changes because they only compute within the current time step. It was decided that OSRD would use the Runge-Kutta 4 method because it is slightly more accurate than Euler-Cauchy and it is a well-known method for this type of calculation, so it is very suitable for an open-source simulator.\n","categories":"","description":"","excerpt":" Introduction Since physical modelling has shown that the acceleration ‚Ä¶","ref":"/en/docs/explanation/running_time_calculation/numerical_integration/","tags":"","title":"Numerical integration"},{"body":"Principe g√©n√©ral Le probl√®me reste une recherche de graphe. En repr√©sentant l‚Äôespace de solution sous forme de graphe, il est possible de r√©utiliser nos outils d√©j√† existants de recherche de chemin.\nLe graphe produit de la position, du temps, et de la vitesse est utilis√©. Autrement dit, chaque √©l√©ment du graphe contient (entre autres) ces 3 variables.\nChaque ar√™te du graphe est calcul√©e avec un calcul de marche pour conna√Ætre l‚Äô√©volution de la vitesse et de la position dans le temps.\nRepr√©sentation visuelle Le graphe de d√©part repr√©sente l‚Äôinfrastructure physique\nIl est ensuite ‚Äúdupliqu√©‚Äù √† des temps diff√©rents\nPuis des n≈ìuds sont reli√©s de mani√®re √† refl√©ter le temps de parcours\nPr√©cisions Le graphe est construit au fil de l‚Äôexploration. Une discr√©tisation est faite au niveau du temps, uniquement pour √©valuer ce qui a d√©j√† √©t√© visit√©. Si le m√™me emplacement est visit√© une seconde fois, il faut une certaine diff√©rence de temps pour estimer qu‚Äôil n‚Äôest pas d√©j√† visit√©. Toutes les ar√™tes sont r√©alis√©es avec des calculs de marche La vitesse n‚Äôest pas discr√©tis√©e ni utilis√©e pour estimer quel emplacement est d√©j√† visit√©, mais elle fait partie des calculs. Par d√©faut, tous les calculs sont faits en allant √† la vitesse maximale. Les ralentissements sont ajout√©s seulement quand ils sont n√©cessaires. Exemple Par exemple, avec l‚Äôinfrastructure suivante en se basant sur le graphe des voies : Explorer le graphe des sillons possibles peut donner ce type de r√©sultat : ","categories":"","description":"","excerpt":"Principe g√©n√©ral Le probl√®me reste une recherche de graphe. En ‚Ä¶","ref":"/fr/docs/reference/design-docs/stdcm/pathfinding_module/graph_representation/","tags":"","title":"Repr√©sentation de l'espace de solutions"},{"body":"For editoast We use dependabot on the project to signal when dependencies are outdated. We do not use dependabot to automatically update dependencies, as we want to merge all updates at once and review the changes.\nHere is the process to update dependencies:\nChange the versions. If you‚Äôre using VSCode you can install the serayuzgur.crates extension and run the ‚Äúupdate all dependencies‚Äù command.\nMake sure that the new version chosen is stable, and that loose constraints are not overwritten in your commit. If you‚Äôre not, you can go check the versions used by dependabot in its PRs and update the versions manually. Run cargo update to update the Cargo.lock file (even sub-dependencies). Check that all dependabot editoast PRs are included in your update. Adapt the code to the new versions, if needed. Create a PR with your changes, and link all dependabot PRs in the description. ","categories":"","description":"","excerpt":"For editoast We use dependabot on the project to signal when ‚Ä¶","ref":"/en/docs/guides/contribute/batch-updating-dependencies/","tags":"","title":"Batch dependency updates"},{"body":" Introduction Cette page donne un exemple de la mani√®re dont les formats de donn√©es sont utilis√©s pour d√©crire une infrastructure dans OSRD.\n√Ä cette fin, prenons comme exemple l‚Äôinfrastructure-jouet suivante :\nConseil Pour zoomer sur un diagramme, cliquez sur le bouton d‚Äô√©dition qui appara√Æt au survol de celui-ci. Ce diagramme est un aper√ßu de l‚Äôinfrastructure avec les lignes et les stations uniquement.\nCette infrastructure ne se veut pas r√©aliste, mais plut√¥t destin√©e √† illustrer le mod√®le de donn√©es d‚ÄôOSRD. Cet exemple sera cr√©√© √©tape par √©tape et expliqu√© en cours de route.\nLe g√©n√©rateur d‚Äôinfrastructures Dans le d√©p√¥t OSRD se trouve une biblioth√®que python con√ßue pour aider √† g√©n√©rer des infrastructures dans un format compris par OSRD.\nL‚Äôinfrastructure discut√©e dans cette section peut √™tre g√©n√©r√©e gr√¢ce au fichier small_infra.py. Pour en savoir plus sur les scripts de g√©n√©ration, vous pouvez consulter le README correspondant.\nVoies Sections de voie (Track Sections) Les premiers objets que nous devons d√©finir sont les TrackSections. La plupart des autres objets sont positionn√©s par rapport √† celles-ci.\nUne section de voie est une section de rail (sans aiguillages). On peut choisir de diviser les voies de son infrastructure en autant de sections qu‚Äôon le souhaite. Ici, nous avons choisi d‚Äôutiliser les sections de voie les plus longues possibles, ce qui signifie qu‚Äôentre deux aiguillages, il y a toujours une seule section de voie.\nLes sections de voie sont ce sur quoi les trains simul√©s roulent. Ils sont l‚Äô√©quivalent abstrait des sections de rails physiques. Les sections de voie sont bidirectionnelles.\nDans cet exemple, nous d√©finissons deux voies pour la ligne entre les stations Ouest et Nord-Est. Nous avons √©galement des voies de contournement aux stations Nord et Centre-Ouest pour plus de r√©alisme. Enfin, nous avons trois voies distinctes dans la station Ouest, puisqu‚Äôil s‚Äôagit d‚Äôune plaque tournante majeure dans notre infrastructure imaginaire.\nImportant Les TrackSections sont repr√©sent√©es par des fl√®ches dans ce diagramme pour souligner le fait qu‚Äôelles ont un d√©but et une fin. C‚Äôest important car les objets positionn√©s sur les sections de voie sont localis√©s en fonction de leur distance par rapport au d√©but de leur section de voie.\nPar cons√©quent, pour placer un objet au d√©but de sa section de voie, d√©finissez sa position √† 0. Pour le d√©placer √† la fin de sa section de voie, d√©finissez sa position √† la length de la section de voie.\nCes attributs sont n√©cessaires pour que la section de voie soit compl√®te :\nlength : la longueur de la section de voie en m√®tres. geo : les coordonn√©es dans la r√©alit√© (geo pour g√©ographique), au format GeoJSON. sch : les coordonn√©es dans la vue sch√©matique (sch pour sch√©matique, repr√©sentation simplifi√©e), √©galement au format GeoJSON. attributs cosm√©tiques : line_name, track_name, track_number qui sont utilis√©s pour indiquer le nom et les √©tiquettes qui ont √©t√© donn√©s aux voies / lignes dans la r√©alit√©. Pour toutes les sections de voies de notre infrastructure, les attributs geo et sch sont identiques, et se rapprochent beaucoup au sch√©ma donn√©.\nPour la plupart des sections de voies, leur length est proportionnelle √† ce que l‚Äôon peut voir sur le diagramme. Pour pr√©server la lisibilit√©, des exceptions ont √©t√© faites pour TA6, TA7, TD0 et TD1 (qui font 10km et 25km).\nNoeud Un Node repr√©sente un noeud dans l‚Äôinfrastructure. Dans une simulation OSRD, un train ne peut passer d‚Äôune section de voie √† une autre que si elles sont reli√©es par un noeud. Un noeud peut se pr√©senter de deux mani√®res diff√©rentes :\n1) Aiguillages\nLes aiguillages peuvent √™tre vus comme une collection de liens de sections de voies, partitionn√©s en groupes. Chaque groupe repr√©sente un √©tat de l‚Äôaiguillage. Passer d‚Äôun groupe √† un autre peut prendre du temps, et au maximum un lien peut √™tre pr√™t √† √™tre utilis√© √† la fois.\nDans le monde r√©el, les aiguillages ne sont pas uniques, mais plut√¥t des instances de mod√®les existants.\n2) Liens de sections de voies\nPour le moment, nous n‚Äôavons cr√©√© que des sections de voies, qui ne sont pas interconnect√©es (les donn√©es g√©ospatiales ne sont pas utilis√©es pour d√©duire quelles voies sont connect√©es).\nLes link sont utilis√©s pour connecter deux sections de voie ensemble, tout comme un joint de soudure le ferait dans la vie r√©elle. Dans une simulation OSRD, un train ne peut passer d‚Äôune section de voie √† une autre que si elles sont reli√©es par ce type de noeud, le link (ou par un autre NodeType).\nQue ce soit pour les aiguillages ou les liens de sections de voies, les liens et les groupes ne font pas partie du switch lui-m√™me, mais d‚Äôun objet NodeType, qui est partag√© par les aiguillages du m√™me mod√®le.\nTypes de Noeud Les NodeTypes ont deux attributs obligatoires :\nports : Une liste de noms de ports. Un port est une extr√©mit√© du noeud qui peut √™tre connect√© √† une section de voie. groups : Un table de correspondance entre le nom des groupes et les listes de branches (connexion entre 2 ports) qui caract√©risent les diff√©rentes positions possibles du type de Noeud √Ä tout moment, tous les noeuds ont un groupe actif, et peuvent avoir une branche active, qui appartient toujours au groupe actif. Pendant une simulation, le changement de branche active √† l‚Äôint√©rieur d‚Äôun groupe est instantan√©, mais le changement de branche active entre les groupes prend un temps configurable. Ceci est d√ª au fait qu‚Äôun Noeud peut-√™tre un objet physique (dans le cas des aiguillages), et que le changement de branche active peut impliquer le d√©placement de certaines de ses parties. Les groups sont con√ßus pour repr√©senter les diff√©rentes positions qu‚Äôun Noeud peut avoir. Chaque groupe contient les liens qui peuvent √™tre utilis√©s dans la position du Noeud associ√©.\nDans le cas des aiguilles, la dur√©e n√©cessaire pour changer de groupe est stock√©e √† l‚Äôint√©rieur du Noeud, car elle peut varier en fonction de l‚Äôimpl√©mentation physique du mod√®le d‚Äôaiguillage.\nNos exemples utilisent actuellement cinq NodeTypes. Il est possible d‚Äôajouter un type de noeud si n√©cessaire via le champ extended_node_type.\n1) Le lien entre deux sectionx de voies\nCelui-ci repr√©sente le lien entre deux sections de voies. Il poss√®de deux ports : A et B.\nIl permet de cr√©er un lien entre deux sections de voies tel que d√©finis dans OSRD. Ce n‚Äôest pas un objet physique.\n2) L‚Äôaiguille\nL‚Äôomnipr√©sent aiguillage en Y, qui peut √™tre consid√©r√© comme la fusion de deux voies ou la s√©paration d‚Äôune voie.\nCe type d‚Äôaiguillage poss√®de trois ports : A, B1 et B2.\nIl y a deux groupes, chacun avec une connexion dans leur liste : A_B1, qui connecte A √† B1, et A_B2 qui connecte A √† B2.\nAinsi, √† tout moment (sauf lorsque l‚Äôaiguille bouge pour changer de groupe), un train peut aller de A √† B1 ou de A √† B2 mais jamais aux deux en m√™me temps. Un train ne peut pas aller de B1 √† B2.\nUne aiguille n‚Äôa que deux positions :\nA vers B1 A vers B2 3) L‚Äôaiguillage de croisement\nIl s‚Äôagit simplement de deux voies qui se croisent.\nCe type a quatre ports : A1, B1, A2 et B2.\nIl ne comporte qu‚Äôun seul groupe contenant deux connexions : A1 vers B1 et A2 vers B2. En effet, ce type d‚Äôaiguillage est passif : il n‚Äôa pas de pi√®ces mobiles. Bien qu‚Äôil n‚Äôait qu‚Äôun seul groupe, il est tout de m√™me utilis√© par la simulation pour faire respecter les r√©servations de route.\nVoici les deux connexions diff√©rentes que ce type d‚Äôaiguillage poss√®de :\nA1 vers B1 A2 vers B2 4) L‚Äôaiguillage de croisement double\nCelui-ci ressemble plus √† deux aiguilles dos √† dos. Il poss√®de quatre ports : A1, A2, B1 et B2.\nCependant, il comporte quatre groupes, chacun avec une connexion. Les quatre connexions possibles sont les suivantes :\nA1 vers B1 A1 vers B2 A2 vers B1 A2 vers B2 5) L‚Äôaiguillage de croisement simple\nCelui-ci ressemble plus √† un m√©lange entre une aiguille simple et un croisement. Il poss√®de quatre ports : A1, A2, B1 et B2.\nVoici les trois connexions que peut r√©aliser cet aiguillage :\nA1 vers B1 A1 vers B2 A2 vers B2 Retour aux noeuds Un Node poss√®de trois attributs :\nnode_type : l‚Äôidentifiant NodeType de ce noeud. ports : une correspondance entre les noms de port et les extr√©mit√©s des sections de voie. group_change_delay : le temps qu‚Äôil faut pour changer le groupe de l‚Äôaiguillage qui est actif. Les noms des ports doivent correspondre aux ports du type du noeud choisi. Les extr√©mit√©s de la section de voie peuvent √™tre d√©but ou fin, faites attention √† choisir les bonnes.\nLa plupart des noeuds de notre exemple sont des noeuds habituels. Le chemin de la gare du Nord √† la gare du Sud a deux aiguillages de croisement. Enfin, il y a un aiguillage de croisement double juste avant que la ligne principale ne se divise en lignes Nord-Est et Sud-Est.\nIl est important de noter que ces noeuds sont pr√©sents par d√©faut dans le code du projet. Seuls les extended_switch_type ajout√©s par l‚Äôutilisateur appara√Ætront dans le railjson.\nCourbes et pentes Les Courbes et les Pentes sont essentielles pour des simulations r√©alistes. Ces objets sont d√©finis comme une plage entre une position de d√©but (begin) et de fin (end) sur une section de voie. Si une courbe / pente s‚Äô√©tend sur plus d‚Äôune section de voie, elle doit √™tre ajout√©e √† toutes les sections.\nLes valeurs des courbes / pentes sont constantes sur toute leur √©tendue. Pour des courbes / pentes variables, il faut cr√©er plusieurs objets.\nLes valeurs de pente sont mesur√©es en m√®tres par kilom√®tres, et les valeurs de courbe sont mesur√©es en m√®tres (le rayon de la courbe).\nN‚Äôoubliez pas que la valeur begin doit toujours √™tre inf√©rieure √† la valeur end. C‚Äôest pourquoi les valeurs de courbe/pente peuvent √™tre n√©gatives : une pente ascendante de 1 allant du d√©calage 10 √† 0 est identique √† une pente descendante de -1 allant des d√©calages 0 √† 10. Dans le fichier small_infra.py, nous avons des pentes sur les sections de voie TA6, TA7, TD0 et TD1.\nIl y a √©galement des courbes sur les sections de voie TE0, TE1, TE3 et TF1.\nEnclenchement Jusqu‚Äô√† pr√©sent, tous les objets ont contribu√© √† la topologie (forme) des voies. La topologie serait suffisante pour que les trains puissent naviguer sur le r√©seau, mais pas assez pour le faire en toute s√©curit√©. pour assurer la s√©curit√©, deux syst√®mes collaborent :\nL‚Äôenclenchement garantit que les trains sont autoris√©s √† avancer La signalisation est le moyen par lequel l‚Äôenclenchement communique avec le train D√©tecteurs Ces objets sont utilis√©s pour cr√©er des sections TVD (Track Vacancy Detection) : la zone de la voie situ√©e entre deux d√©tecteurs est une section TVD. Lorsqu‚Äôun train rencontre un d√©tecteur, la section dans laquelle il entre est occup√©e. La seule fonction des sections TVD est de localiser les trains.\nDans la r√©alit√©, les d√©tecteurs peuvent √™tre des compteurs d‚Äôessieux ou des circuits de voie par exemple.\nPour que cette m√©thode de localisation soit efficace, les d√©tecteurs doivent √™tre plac√©s r√©guli√®rement le long de vos voies, pas trop nombreux pour des raisons de co√ªt, mais pas trop peu, car les sections TVD seraient alors tr√®s grandes et les trains devraient √™tre tr√®s √©loign√©s les uns des autres pour √™tre distingu√©s, ce qui r√©duirait la capacit√©.\nIl y a souvent des d√©tecteurs √† proximit√© de tous les extr√©mit√©s des aiguillages. De cette fa√ßon, l‚Äôenclenchement est averti presque imm√©diatement lorsqu‚Äôun aiguillage est lib√©r√©, qui est alors libre d‚Äô√™tre utilis√© √† nouveau.\nPrenons l‚Äôexemple d‚Äôun aiguillage de croisement : si le train A le franchit du nord au sud et que le train B arrive pour le franchir de l‚Äôouest √† l‚Äôest, d√®s que le dernier wagon du train A a franchi l‚Äôaiguillage, B devrait pouvoir partir, puisque A se trouve maintenant sur une section de voie compl√®tement ind√©pendante. Dans OSRD, les d√©tecteurs sont des objets ponctuels. Les attributs dont ils ont besoin sont leur id et leur localisation sur la voie (track et offset).\nLes carr√©s agglutin√©s repr√©sentent plusieurs d√©tecteurs √† la fois. En effet, certains tron√ßons de voie n‚Äô√©tant pas repr√©sent√©s sur toute leur longueur, nous n‚Äôavons pas pu repr√©senter tous les d√©tecteurs du tron√ßon de voie correspondant. Quelques notes :\nEntre certains points, nous n‚Äôavons ajout√© qu‚Äôun seul d√©tecteur (et non pas deux), car ils √©taient tr√®s proches les uns des autres, et cela n‚Äôaurait eu aucun sens de cr√©er une minuscule section TVD entre eux. Cette situation s‚Äôest produite sur des sections de voies (TA3, TA4, TA5, TF0 et TG3). Dans notre infrastructure, il y a relativement peu de sections de voie qui sont assez longues pour n√©cessiter plus de d√©tecteurs que ceux li√©s aux aiguillages. Ce sont, TA6, TA7, TDO, TD1, TF1, TG1 et TH1. Par exemple, TD0, qui mesure 25 km, compte en fait 17 d√©tecteurs au total. Butoirs (BufferStops) Les BufferStops sont des obstacles destin√©s √† emp√™cher les trains de d√©railler en bout des voies.\nDans notre infrastructure, il y a un butoir sur chaque section de voie qui est un cul-de-sac. Il y a donc 8 butoirs au total.\nAvec les d√©tecteurs, ils d√©finissent les limites des sections TVD (voir D√©tecteurs).\nItin√©raires (Routes) Une Route est un itin√©raire dans l‚Äôinfrastructure. Un sillon est une s√©quence de routes. Les itin√©raires sont utilis√©s pour r√©server des sections de sillon avec l‚Äôenclenchement. Voir la documentation d√©di√©e.\nIl est repr√©sent√© avec les attributs suivants :\nentry_point et exit_point : R√©f√©rences de d√©tecteurs ou de but√©es qui marquent le d√©but et la fin de l‚Äôitin√©raire. entry_point_direction : Direction √† prendre sur la section de voie depuis entry_point pour commencer l‚Äôitin√©raire. switches_direction : Un ensemble de directions √† suivre lorsqu‚Äôon rencontre un aiguillage sur notre itin√©raire, de mani√®re √† reconstituer cet itin√©raire de entry_point jusqu‚Äô√† exit_point. release_detectors : Lorsqu‚Äôun train franchit un d√©tecteur de lib√©ration, les ressources r√©serv√©es depuis le d√©but de la route jusqu‚Äô√† ce d√©tecteur sont lib√©r√©es. Signalisation Gr√¢ce √† l‚Äôenclenchement, les trains sont localis√©s et autoris√©s √† se d√©placer. C‚Äôest un bon d√©but, mais c‚Äôest inutile tant que les trains n‚Äôen sont pas inform√©s. C‚Äôest l√† que les ‚Äúsignaux‚Äù entrent en jeu : les signaux r√©agissent aux enclenchements et peuvent √™tre vus par les trains.\nLa fa√ßon dont les trains r√©agissent aux signaux d√©pend de l‚Äôaspect, du type de signal et du syst√®me de signalisation.\nVoici les attributs les plus importants des signaux :\nlinked_detector : Le d√©tecteur li√©. type_code : Le type de signal. direction : La direction qu‚Äôil prot√®ge, qui peut √™tre simplement interpr√©t√©e comme la fa√ßon dont il peut √™tre vu par un train entrant (puisqu‚Äôil n‚Äôy a des feux que d‚Äôun c√¥t√©‚Ä¶). La direction est relative √† l‚Äôorientation de la section de voie. Des attributs cosm√©tiques comme angle_geo and side qui contr√¥lent la mani√®re dont les signaux sont affich√©s dans le front-end. Voici une visualisation de comment on peut repr√©senter un signal, et quelle direction il prot√®ge.\nLa mani√®re dont les signaux sont dispos√©s d√©pend fortement du syst√®me de signalisation et du gestionnaire de l‚Äôinfrastructure.\nVoici les r√®gles de base utilis√©es pour cet exemple d‚Äôinfrastructure :\nNous ajoutons deux signaux d‚Äôespacement (un par direction) pour chaque d√©tecteur qui d√©coupe une longue section de TVD en plus petites sections. Les entr√©es d‚Äôaiguillage o√π un train pourrait devoir s‚Äôarr√™ter sont prot√©g√©es par un signal (qui est situ√© √† l‚Äôext√©rieur de la section TVD de l‚Äôaiguillage). Il doit √™tre visible depuis la direction utilis√©e pour approcher l‚Äôaiguillage. Lorsqu‚Äôil y a plusieurs aiguillages dans une rang√©e, seul le premier a g√©n√©ralement besoin d‚Äô√™tre prot√©g√©, car l‚Äôenclenchement est g√©n√©ralement con√ßu pour ne pas encourager les trains √† s‚Äôarr√™ter au milieu des intersections. Notez que les d√©tecteurs li√©s √† au moins un signal ne sont pas repr√©sent√©s, car il n‚Äôy a pas de signaux sans d√©tecteurs associ√©s dans cet exemple.\nPour obtenir le id d‚Äôun d√©tecteur li√© √† un signal, prenez le id du signal et remplacez S par D (par exemple SA0 -\u003e DA0).\nSur TA6, TA7, TD0 et TD1 nous n‚Äôavons pas pu repr√©senter tous les signaux car ces sections de voie sont tr√®s longues et comportent de nombreux d√©tecteurs, donc de nombreux signaux. √âlectrification Pour permettre √† des trains √©lectriques de circuler sur notre infrastructure, nous devons sp√©cifier les parties de celle-ci qui sont √©lectrifi√©es.\nCat√©naires (Catenaries) Les Catenaries repr√©sentent les c√¢bles d‚Äôalimentation qui alimentent les trains √©lectriques. Ils sont repr√©sent√©s avec les attributs suivants :\nvoltage : Une cha√Æne de caract√®res repr√©sentant le type d‚Äôalimentation √©lectrique utilis√©e pour l‚Äô√©lectrification. track_ranges : Une liste de portions de sections de voie (TrackRanges) couvertes par cette cat√©naire. Une TrackRange est compos√©e d‚Äôun identifiant de section de voie, d‚Äôune position begin et d‚Äôune position end. Dans notre exemple, nous avons deux Catenaries:\nUne avec voltage d√©fini sur \"1500\", qui couvre uniquement TA0. Une avec voltage d√©fini sur \"25000\", qui couvre tous les autres sauf TD1. Cela signifie que seuls les trains thermiques peuvent traverser la section de voie TD1.\nNotre exemple montre √©galement que, contrairement √† son homologue r√©el, une seule Catenary peut couvrir toute l‚Äôinfrastructure.\nSections Neutres (NeutralSections) Dans certaines parties d‚Äôune infrastructure, les conducteurs de train sont somm√©s - principalement pour des raisons de s√©curit√© - de couper l‚Äôalimentation √©lectrique du train.\nPour repr√©senter de telles parties, nous utilisons des NeutralSections. Elles sont repr√©sent√©es avec principalement les attributs suivants :\ntrack_ranges : Une liste de DirectedTrackRanges (portions de sections de voie associ√©es √† une direction) couvertes par cette section neutre. lower_pantograph : Un bool√©en indiquant si le pantographe du train doit √™tre abaiss√© pendant la travers√©e de cette section. Dans notre exemple, nous avons trois NeutralSections : une √† la jonction des cat√©naires \"1500\" et \"25000\", une sur TA6 et une sur TG1 et TG4.\nPour plus de d√©tails sur le mod√®le, voir la page d√©di√©e.\nDivers Points op√©rationnels (OperationalPoints) Le point operationnel est aussi connu sous le nom de Point Remarquable (PR). Un OperationalPoint est une collection de points (OperationalPointParts) d‚Äôint√©r√™t.\nPar exemple, il peut √™tre pratique (rep√®re de conduite) de stocker l‚Äôemplacement des plateformes en tant que parties et de les regrouper par station dans des points op√©rationnels. De la m√™me mani√®re, un pont au-dessus des voies sera un OperationalPoint, mais il comportera plusieurs OperationPointParts, une √† l‚Äôintersection de chaque voie.\nDans l‚Äôexemple de l‚Äôinfrastructure, nous n‚Äôavons utilis√© que des points op√©rationnels pour repr√©senter les stations. Les parties de points op√©rationnels sont repr√©sent√©es par des diamants violets. Gardez √† l‚Äôesprit qu‚Äôun seul point op√©rationnel peut contenir plusieurs parties.\nLimites de gabarit (Loading Gauge Limits) Cet objet s‚Äôapparente aux Pentes et aux Courbes : il couvre une plage de section de voie, avec une position de d√©but (begin) et de fin (end). Il repr√©sente une restriction sur les trains qui peuvent circuler sur la plage donn√©e, par poids ou par type de train (fret ou passagers).\nNous n‚Äôen avons pas mis dans nos exemples.\nSections de vitesse (SpeedSections) Les SpeedSections repr√©sentent les limites de vitesse (en m√®tres par seconde) qui sont appliqu√©es sur certaines parties des voies. Une SpeedSection peut s‚Äô√©tendre sur plusieurs sections de voie, et ne couvre pas n√©cessairement la totalit√© des sections de voie. Les sections de vitesse peuvent se chevaucher.\nDans notre exemple d‚Äôinfrastructure, nous avons une section de vitesse couvrant l‚Äôensemble de l‚Äôinfrastructure, limitant la vitesse √† 300 km/h. Sur une plus petite partie de l‚Äôinfrastructure, nous avons appliqu√© des sections de vitesse plus restrictives.\n","categories":"","description":"Explique par l'exemple comment les donn√©es d'infrastructure sont structur√©es","excerpt":"Explique par l'exemple comment les donn√©es d'infrastructure sont ‚Ä¶","ref":"/fr/docs/explanation/models/data-models-full-example/","tags":"","title":"Exemple d'infrastructure"},{"body":"Explanations discuss key topics and concepts at a fairly high level and provide useful background information and explanation.\n","categories":"","description":"Learn more about key concepts","excerpt":"Learn more about key concepts","ref":"/en/docs/explanation/","tags":"","title":"Explanations"},{"body":"Les explications abordent des th√®mes et concepts cl√©s d‚Äôun point de vue g√©n√©ral et fournissent des informations et explications d√©taill√©es sur les √©l√©ments fondamentaux.\n","categories":"","description":"Comprendre les concepts cl√©s","excerpt":"Comprendre les concepts cl√©s","ref":"/fr/docs/explanation/","tags":"","title":"Explications"},{"body":" Introduction This page gives an example of how the data formats are used to describe an infrastructure in OSRD.\nFor this purpose, let‚Äôs take as an example the following toy infrastructure:\nTip To zoom in on diagrams, click on the edit button that appears when hovering over it. This diagram is an overview of the infrastructure with lines and stations only.\nThis infrastructure is not meant to be realistic, but rather meant to help illustrate OSRD‚Äôs data model. This example will be created step by step and explained along the way.\nThe infrastructure generator In the OSRD repository is a python library designed to help generate infrastructures in a format understood by OSRD.\nThe infrastructure discussed in this section can be generated thanks to small_infra.py file. To learn more about the generation scripts, you can check out the related README.\nTracks Track sections The first objects we need to define are TrackSections. Most other objects are positioned relative to track sections.\nA track section is a section of rail (switches not included). One can chose to divide the tracks of their infrastructure in as many track sections as they like. Here we chose to use the longest track sections possible, which means that between two switches there is always a single track section.\nTrack sections is what simulated trains roll onto. They are the abstract equivalent to physical rail sections. Track sections are bidirectional.\nIn this example, we define two tracks for the line between the West and North-East stations. We also have overpassing tracks at the North and Mid-West stations for added realism. Finally, we have three separate tracks in the West station, since it‚Äôs a major hub in our imaginary infrastructure.\nImportant TrackSections are represented as arrows in this diagram to stress the fact that they have a start and an end. It matters as objects positioned on track sections are located using their distance from the start of their track section.\nTherefore, to locate an object at the beginning of its track section, set its offset to 0. To move it to the end of its track section, set its offset to the length of the track section.\nThese attributes are required for the track section to be complete:\nlength: the length of the track section in meters. geo: the coordinates in real life (geo is for geographic), in the GeoJSON format. sch: the coordinates in the schematic view (sch for schematic, simplified representation), also in GeoJSON format. cosmetic attributes: line_name, track_name, track_number which are used to indicate the name and labels that were given to the tracks / lines in real life. For all track sections in our infrastructure, the geo and sch attributes are identical, and very much resemble the given diagram.\nFor most track sections, their length is proportional to what can be seen in the diagram. To preserve readability, exceptions were made for TA6, TA7, TD0 and TD1 (which are 10km and 25km).\nNode A Node represents a node in the infrastructure. In an OSRD simulation, a train can only move from one section of track to another if they are linked by a node.\nNode Types NodeTypes have two mandatory attributes:\nports: A list of port names. A port is an endpoint connected to a track section. groups: A mapping between group names and lists of branch (connection between 2 ports) that characterises the different possible positions of the node type At any time, all nodes have an active group, and may have an active branch, which always belongs to the active group. During a simulation, changing the active branch inside a group is instantaneous, but changing the active branch across groups (changing the active group) takes configurable time. This is because a node is a physical object, and changing active branch can involve moving parts of it. Groups are designed to represent the different positions that a node can have. Each group contains the branches that can be used in the associated node position.\nThe duration needed to change group is stored inside the Node, since it can vary depending on the physical implementation of the node.\nOur examples currently use five node types. Node types are just like other objects, and can easily be added as needed using extended_switch_type.\n1) Link\nThis one represents the link between two sections of track. It has two ports: A and B.\nIt is used in the OSRD model to create a link between two track sections. This is not a physical object.\n2) The Point Switch\nThe ubiquitous Y switch, which can be thought of as either two tracks merging, or one track splitting.\nThis node type has three ports: A, B1 and B2.\nThere are two groups, each with one connection in their list: A_B1, which connects A to B1, and A_B2 which connects A to B2.\nThus, at any given moment (except when the switch moves from one group to another), a train can go from A to B1 or from A to B2 but never to both at the same time. A train cannot go from B1 to B2.\nA Point Switch only has two positions:\nA to B1 A to B2 3) The Crossing\nThis is simply two tracks crossing each other.\nThis type has four ports: A1, B1, A2 et B2.\nIt has only one group containing two connections: A1 to B1 and A2 to B2. Indeed this kind of switch is passive: it has no moving parts. Despite having a single group, it is still used by the simulation to enforce route reservations.\nHere are the two different connections this switch type has:\nA1 to B1 A2 to B2 4) The Double slip switch\nThis one is more like two point switches back to back. It has four ports: A1, A2, B1 and B2.\nHowever, it has four groups, each with one connection. The four groups are represented in the following diagram:\nA1 to B1 A1 to B2 A2 to B1 A2 to B2 5) The Single slip switch\nThis one looks more like a cross between a single needle and a crossover. It has four ports: A1, A2, B1 and B2.\nHere are the three connections that can be made by this switch:\nA1 to B1 A1 to B2 A2 to B2 Back to nodes A Node has three attributes:\nnode_type: the identifier of the NodeType of this node. ports: a mapping from port names to track sections extremities. group_change_delay: the time it takes to change which group of the node is activated. The port names must match the ports of the node type chosen. The track section endpoints can be start or end, be careful to chose the appropriate ones.\nMost of our example‚Äôs nodes are regular point switches. The path from North station to South station has two cross switches. Finally, there is a double cross switch right before the main line splits into the North-East and South-East lines.\nIt is important to note that these node types are hard-coded into the project code. Only the extended_node_type added by the user will appear in the railjson.\nCurves and slopes Curves and Slopes are instrumental to realistic simulations. These objects are defined as a range between a begin and end offsets of one track section. If a curve / slope spans more than one track section, it has to be added to all of them.\nThe slope / curve values are constant on their entire range. For varying curves / slopes, one needs to create several objects.\nSlope values are measured in meters per kilometers, and the curve values are measured in meters (the radius of the curve).\nMind that the begin value should always be smaller than the end value. That is why the curve / slope values can be negative: an uphill slope of 1 going from offset 10 to 0 is the same as a downhill slope of -1 going from offsets 0 to 10. In the small_infra.py file, we have slopes on the track sections TA6, TA7, TD0 and TD1.\nThere are curves as well, on the track sections TE0, TE1, TE3 and TF1.\nInterlocking All objects so far contributed to track topology (shape). Topology would be enough for trains to navigate the network, but not enough to do so safely. to ensure safety, two systems collaborate:\nInterlocking ensures trains are allowed to move forward Signaling is the mean by which interlocking communicates with the train Detectors These objects are used to create TVD sections (Track Vacancy Detection section): the track area in between detectors is a TVD section. When a train runs into a detector, the section it is entering becomes occupied. The only function of TVD sections is to locate trains.\nIn real life, detectors can be axle counters or track circuits for example.\nFor this mean of location to be efficient, detectors need to be placed regularly along your tracks, not too many because of cost, but not too few, because then TVD sections would be very large and trains would need to be very far apart to be told apart, which reduces capacity.\nThere often are detectors close to all sides of switches. This way, interlocking is made aware pretty much immediately when a switch is cleared, which is then free to be used again.\nLet‚Äôs take a cross switch as an example: if train A is crossing it north to south and train B is coming to cross west to east, then as soon as train A‚Äôs last car has passed the crossing, B should be able to go, since A is now on a completely unrelated track section. In OSRD, detectors are point objects, so all the attributes it needs are its id, and track location (track and offset).\nThe clumped up squares represent many detectors at once. Indeed, because some track sections are not represented with their full length, we could not represent all the detectors on the corresponding track section. Some notes:\nBetween some points, we added only one detector (and not two), because they were really close together, and it would have made no sense to create a tiny TVDS between the two. This situation happened on track sections (TA3, TA4, TA5, TF0 and TG3). In our infrastructure, there is relatively few track sections which are long enough to require more detectors than just those related to switches. Namely, TA6, TA7, TDO, TD1, TF1, TG1 and TH1. For example TD0, which measures 25km, has in fact 17 detectors in total. Buffer stops BufferStops are obstacles designed to prevent trains from sliding off dead ends.\nIn our infrastructure, there is a buffer stop on each track section which has a loose end. There are therefore 8 buffer stops in total.\nTogether with detectors, they set the boundaries of TVD sections (see Detectors)\nRoutes A Route is an itinerary in the infrastructure. A train path is a sequence of routes. Routes are used to reserve section of path with the interlocking. See the dedicated documentation.\nIt is represented with the following attributes:\nentry_point and exit_point: references detectors or buffer stops which mark the beginning and the end of the Route. entry_point_direction : Direction on a track section to start the route from the entry_point. switches_direction : A set of directions to follow when we encounter a switch on our Route, to build this Route from entry_point to exit_point. release_detectors: When a train clears a release detector, resources reserved from the beginning of the route until this detector are released. Signaling Thanks to interlocking, trains are located and allowed to move. It‚Äôs a good start, but meaningless until trains are made aware of it. This is where Signals come into play: signals react to interlocking, and can be seen by trains.\nHow trains react to signals depends on the aspect, kind of signal, and signaling system.\nHere are the most important attributes for signals:\nlinked_detector: The linked detector. type_code: The type of signal. direction: The direction it protects, which can simply be interpreted as the way in which it can be seen by an incoming train (since there are lights only on one side‚Ä¶). Direction is relative to track section orientation. Cosmetic attributes like angle_geo or side which control the way in which the signals are displayed in the front-end. Here is a visualization of how one can represent a signal, and which direction it protects.\nThe way the signals are arranged is highly dependent on both signaling system and infrastructure manager.\nHere are the basic rules used for this example infrastructure:\nWe add two spacing signals (one per direction) for each detector that is cutting a long TVD section into smaller ones. Switch entries where a train might have to stop are protected by a signal (which is located outside of the switch TVD section). It must be visible from the direction used to approach the switch. When there are multiple switches in a row, only the first one usually needs protection, as interlocking is usually designed as not to encourage trains stopping in the middle of intersections. Note that detectors linked to at least one signal are not represented, as there are not signals without associated detectors in this example.\nTo get the id of a detector linked to a signal, take the signal‚Äôs id and replace S by D (e.g. SA0 -\u003e DA0).\nOn TA6, TA7, TD0 and TD1 we could not represent all signals because these track sections are very long and have many detectors, hence many signals. Electrification To allow electric trains to run on our infrastructure, we need to specify which parts of the infrastructure is electrified.\nCatenaries Catenaries are objects that represent the overhead wires that power electric trains. They are represented with the following attributes:\nvoltage: A string representing the type of power supply used for electrification track_ranges: A list of range of track sections (TrackRanges) covered by this catenary. A TrackRange is composed of a track section id, a begin offset and an end offset. In our example infrastructure, we have two Catenaries:\nOne with voltage set to \"1500\", which covers only TA0. One with voltage set to \"25000\", which covers all others except TD1. This means that only thermal trains can cross the TD1 track section.\nOur example also outlines that, unlike its real life counterpart, a single Catenary may cover the whole infrastructure.\nNeutral Sections In some parts of an infrastructure, the train drivers may be instructed - mainly for safety reasons - to cut the power supply to the train.\nTo represent such parts, we use NeutralSections. They are represented mainly with the following attributes:\ntrack_ranges: A list of DirectedTrackRanges (track ranges associated to a direction) which are covered by this neutral section. lower_pantograph: A boolean indicating whether the train‚Äôs pantograph should be lowered while in this section. In our example infrastructure, we have three NeutralSections: one at the junction of the \"1500\" and \"25000\" catenaries, one on TA6 and one on TG1 and TG4.\nFor more details about the model see the dedicated page.\nMiscellaneous Operational points Operational point is also known in French as ‚ÄúPoint Remarquable‚Äù (PR). One OperationalPoint is a collection of points (OperationalPointParts) of interest.\nFor example, it may be convenient (reference point for train operation) to store the location of platforms as parts and group them by station in operational points. In the same way, a bridge over tracks will be one OperationalPoint, but it will have several OperationPointParts, one at the intersection of each track.\nIn the example infrastructure, we only used operational points to represent stations. Operational point parts are displayed as purple diamonds. Keep in mind a single operational point may contain multiple parts.\nLoading Gauge Limits These objects are akin to Slopes and Curves: it covers a range of track section, with a begin and an end offset. It represents a restriction on the trains that can travel on the given range, by weight or by train type (freight or passenger).\nWe did not put any in our examples.\nSpeed Sections The SpeedSections represent speed limits (in meters per second) that are applied on some parts of the tracks. One SpeedSection can span on several track sections, and do not necessarily cover the whole track sections. Speed sections can overlap.\nIn our example infrastructure, we have a speed section covering the whole infrastructure, limiting the speed to 300 km/h. On a smaller part of the infrastructure, we applied more restrictive speed sections.\n","categories":"","description":"Explains using an example how infrastructure data is structured","excerpt":"Explains using an example how infrastructure data is structured","ref":"/en/docs/explanation/models/data-models-full-example/","tags":"","title":"Infrastructure example"},{"body":"Description La couche de localisation permet √† d‚Äôautres modules de simulation de suivre le d√©placement du train dans l‚Äôinfrastructure. L‚Äôinfrastructure ferroviaire est d√©coup√©e en r√©gions appel√©es zones. Quand on train entre dans une zone, ce module permet d‚Äôen √™tre notifi√©.\nLes zones (ou TVDSection / DetectionSection) sont des partitions physiques des voies :\ncapables de d√©tecter la pr√©sence d‚Äôun train Exigences de conception il doit √™tre possible de suivre les changements d‚Äôoccupation d‚Äôune zone il devra √™tre possible de suivre les d√©placements d‚Äôun train il devra √™tre possible d‚Äôimpl√©menter un syst√®me de bloc mobile D√©pendances statique une liste de zones Op√©rations Occuper une zone Lib√©rer une zone Observer les changements d‚Äôoccupation d‚Äôune zone ","categories":"","description":"Fournit les informations de position des trains sur le r√©seau","excerpt":"Fournit les informations de position des trains sur le r√©seau","ref":"/fr/docs/reference/design-docs/interlocking/location/","tags":"","title":"Localisation"},{"body":"Pour editoast Nous utilisons dependabot sur le projet pour signaler quand les d√©pendances sont obsol√®tes. Nous ne nous en servons pas pour mettre √† jour automatiquement les d√©pendances, pour int√©grer toutes les mises √† jour en une seule fois et relire les modifications.\nPour mettre √† jour les d√©pendances :\nChangez les versions. Si vous utilisez VSCode vous pouvez installer l‚Äôextension serayuzgur.crates et ex√©cuter la commande ‚Äúupdate all dependencies‚Äù.\nCela mettra √† jour toutes les d√©pendances vers leur derni√®re version, et √©crasera les contraintes de version trop larges.\nAssurez-vous que la nouvelle version choisie est stable, et que les contraintes volontairement larges ne sont pas √©cras√©es par votre commit. Sinon vous pouvez v√©rifier les versions utilis√©es par dependabot dans ses PRs et mettre √† jour les versions manuellement. Ex√©cutez cargo update pour mettre √† jour le fichier Cargo.lock (y compris les sous-d√©pendances). V√©rifiez que tous les PRs dependabot editoast sont inclus dans votre commit. Adaptez le code aux nouvelles versions, si n√©cessaire. Cr√©ez un PR avec vos modifications, et reliez-y tous les PRs dependabot en description. ","categories":"","description":"","excerpt":"Pour editoast Nous utilisons dependabot sur le projet pour signaler ‚Ä¶","ref":"/fr/docs/guides/contribute/batch-updating-dependencies/","tags":"","title":"Mise √† jour group√©e des d√©pendances"},{"body":"","categories":"","description":"Ce qui est mod√©lis√© dans OSRD, et comment c'est mod√©lis√©","excerpt":"Ce qui est mod√©lis√© dans OSRD, et comment c'est mod√©lis√©","ref":"/fr/docs/explanation/models/","tags":"","title":"Mod√®les"},{"body":"","categories":"","description":"What is modeled in OSRD, and how it is modeled","excerpt":"What is modeled in OSRD, and how it is modeled","ref":"/en/docs/explanation/models/","tags":"","title":"Models"},{"body":"Physical object to model Introduction For a train to be able to run, it must either have an energy source on board (fuel, battery, hydrogen, ‚Ä¶) or be supplied with energy throughout its journey.\nTo supply this energy, electrical cables are suspended above the tracks: the catenaries. The train then makes contact with these cables thanks to a conducting piece mounted on a mechanical arm: the pantograph.\nNeutral sections With this system it is difficult to ensure the electrical supply of a train continuously over the entire length of a line. On certain sections of track, it is necessary to cut the electrical supply of the train. These portions are called neutral sections.\nIndeed, in order to avoid energy losses along the catenaries, the current is supplied by several substations distributed along the tracks. Two portions of catenaries supplied by different substations must be electrically isolated to avoid short circuits.\nMoreover, the way the tracks are electrified (DC or not for example) can change according to the local uses and the time of installation. It is again necessary to electrically isolate the portions of tracks which are electrified differently. The train must also (except in particular cases) change its pantograph when the type of electrification changes.\nIn both cases, the driver is instructed to cut the train‚Äôs traction, and sometimes even to lower the pantograph.\nIn the French infrastructure, these zones are indicated by announcement, execution and end signs. They also carry the indication to lower the pantograph or not. The portions of track between the execution and end may not be electrified entirely, and may not even have a catenary (in this case the zone necessarily requires lowering the pantograph).\nREV (for reversible) signs are sometimes placed downstream of the end of zone signs. They are intended for trains that run with a pantograph at the rear of the train. These signs indicate that the driver can resume traction safely.\nAdditionally, it may sometimes be impossible on a short section of track to place a catenary or to raise the train‚Äôs pantograph. In this case the line is still considered electrified, and the area without electrification (passage under a bridge for example) is considered as a neutral section.\nRolling stock After passing through a neutral section, a train must resume traction. This is not immediate (a few seconds), and the necessary duration depends on the rolling stock.\nIn addition, the driver must, if necessary, lower his pantograph, which also takes time (a few tens of seconds) and also depends on the rolling stock.\nThus, the coasting imposed on the train extends outside the neutral section, since these system times are to be counted from the end of the neutral section.\nData model We have chosen to model the neutral sections as the space between the signs linked to it (and not as the precise zone where there is no catenary or where the catenary is not electrified).\nThis zone is directional, i.e. associated with a direction of travel, in order to be able to take into account different placements of signs according to the direction. The execution sign of a given direction is not necessarily placed at the same position as the end of zone sign of the opposite direction.\nFor a two-way track, a neutral section is therefore represented by two objects.\nThe schema is the following\n{ \"lower_pantograph\": boolean, \"track_ranges\": [ { \"track\": string, \"start\": number, \"end\": number, \"direction\": enum } ], \"announcement_track_ranges\": [ { \"track\": string, \"start\": number, \"end\": number, \"direction\": enum } ] } lower_pantograph: indicates whether the pantograph should be lowered in this section track_ranges: list of track sections ranges where the train must not traction announcement_track_ranges: list of track sections ranges between the announcement sign and the execution sign Display Map The zones displayed in the map correspond to the track_ranges of neutral sections, thus are between the execution and end signs of the zone. The color of the zone indicates whether the train must lower its pantograph in the zone or not.\nThe direction in which the zone applies is not represented.\nSimulation results In the linear display, it is always the area between EXE and FIN that is displayed.\nPathfinding Neutral sections are therefore portions of ‚Äúnon-electrified‚Äù track where an electric train can still run (but where it cannot traction).\nWhen searching for a path in the infrastructure, an electric train can travel through a track section that is not covered by the track_ranges of a catenary object (documentation to be written) only if it is covered by the track_ranges of a neutral section.\nSimulation In our simulation, we approximate the driver‚Äôs behavior as follows:\nThe coasting is started as soon as the train‚Äôs head passes the announcement sign The system times (pantograph reading and traction resumption) start as soon as the train‚Äôs head passes the end sign. In the current simulation, it is easier to use spatial integration bounds rather than temporal ones. We make the following approximation: when leaving the neutral section, we multiply the system times by the speed at the exit of the zone. The coasting is then extended over the obtained distance. This approximation is reasonable because the train‚Äôs inertia and the almost absence of friction guarantee that the speed varies little over this time interval.\nImprovements to be made Several aspects could be improved:\nWe do not model the REV signs, all trains therefore only have one pantograph at the front in our simulations. System times are approximated. The driver‚Äôs behavior is rather restrictive (coasting could start after the announcement sign). The display of the zones is limited: no representation of the direction or the announcement zones. These zones are not editable. ","categories":"","description":"Documentation about what they are and how they are implemented","excerpt":"Documentation about what they are and how they are implemented","ref":"/en/docs/explanation/models/neutral_sections/","tags":"","title":"Neutral Sections"},{"body":"Please report anything you deem significant!\nOur bug tracking platform is github, so you have to register to report bugs.\nFollow this link and pick whatever template fits the best.\nBugs Bug must have a correct description and the bug‚Äôs issue template must be filled carefully. Bug must be tagged with (for team members): kind:bug one or several area:\u003caffected_area\u003e if possible, if the affected area is not known leave it blank it will be added later by another team member. one severity:\u003cbug_severity\u003e if possible, if severity is not known leave it blank it will be added later by another team member. severity:minor: User can still use the feature. severity:major: User sometimes can‚Äôt use the feature. severity:critical: User can‚Äôt use the feature. OSRD team members can change issues‚Äô tags (severity, area, kind, ‚Ä¶). You may leave a comment to explain changes. If you are working on a bug or plan to work on a bug, assign yourself to the bug. PRs solving bugs should add a regression tests to ensure that bug will not be back in the future. ","categories":"","description":"Report a bug or suggest an enhancement","excerpt":"Report a bug or suggest an enhancement","ref":"/en/docs/guides/contribute/bug-reports/","tags":"","title":"Report issues"},{"body":"N‚Äôh√©sitez pas √† signaler tout ce qui vous semble important !\nNotre outil de suivi des bugs est github. Il est n√©cessaire de s‚Äôinscrire pour signaler un bug.\nSuivez ce lien et choisissez le mod√®le qui correspond √† votre cas de figure.\nBugs Le bug doit avoir une description correcte et le mod√®le du bug doit √™tre rempli avec soin. Le bug doit √™tre √©tiquet√© avec (pour les membres de l‚Äô√©quipe) : kind:bug une ou plusieurs area:\u003caffected_area\u003e si possible (si la zone affect√©e n‚Äôest pas connue, laissez-la vide et elle sera ajout√©e plus tard par un autre membre de l‚Äô√©quipe). un severity:\u003cbug_severity\u003e si possible (si la s√©v√©rit√© n‚Äôest pas connue, laissez-la vide et elle sera ajout√©e plus tard par un autre membre de l‚Äô√©quipe). severity:minor : L‚Äôutilisateur peut encore utiliser la fonctionnalit√©. severity:major : L‚Äôutilisateur ne peut parfois pas utiliser la fonctionnalit√©. severity:critical : L‚Äôutilisateur ne peut pas utiliser la fonctionnalit√©. Les membres de l‚Äô√©quipe OSRD peuvent modifier les √©tiquettes des probl√®mes (gravit√©, domaine, type, ‚Ä¶). Vous pouvez laisser un commentaire pour expliquer les changements. Si vous travaillez sur un bug ou planifiez de travailler sur un bug, assignez vous au bug. Les PRs qui r√©solvent des bugs doivent ajouter des tests de r√©gression pour s‚Äôassurer que le bug ne reviendra pas dans le futur. ","categories":"","description":"Comment signaler un bug ou sugg√©rer une am√©lioration","excerpt":"Comment signaler un bug ou sugg√©rer une am√©lioration","ref":"/fr/docs/guides/contribute/bug-reports/","tags":"","title":"Signaler des probl√®mes"},{"body":"Objet physique que l‚Äôon cherche √† mod√©liser Introduction Pour qu‚Äôun train puisse circuler, il faut soit qu‚Äôil ait une source d‚Äô√©nergie √† bord (fuel, batterie, hydrog√®ne, ‚Ä¶) soit qu‚Äôon l‚Äôalimente en √©nergie tout au long de son parcours.\nPour fournir cette √©nergie, des c√¢bles √©lectriques sont suspendus au dessus des voies: les cat√©naires. Le train assure ensuite un contact avec ces c√¢bles gr√¢ce √† un patin conducteur mont√© sur un bras m√©canique: le pantographe.\nZones neutres Avec ce syst√®me il est difficile d‚Äôassurer l‚Äôalimentation √©lectrique d‚Äôun train en continu sur toute la longueur d‚Äôune ligne: sur certaines portions de voie, il est n√©cessaire de couper l‚Äôalimentation √©lectrique du train. Ce sont ces portions que l‚Äôon appelle zones neutres.\nEn effet, pour √©viter les pertes √©nerg√©tiques le long des cat√©naires, le courant est fourni par plusieurs sous-stations r√©parties le long des voies. Deux portions de cat√©naires aliment√©es par des sous-stations diff√©rentes doivent √™tre isol√©es √©lectriquement pour √©viter les courts-circuits.\nPar ailleurs, la fa√ßon dont les voies sont √©lectrifi√©es (courant continu ou non par exemple) peut changer selon les us locaux et l‚Äô√©poque d‚Äôinstallation. Il faut √©galement isoler √©lectriquement les portions de voies qui sont √©lectrifi√©es diff√©remment. Le train doit aussi (sauf cas particuliers) changer de pantographe lorsqu‚Äôil change de type d‚Äô√©lectrification.\nDans ces deux cas on indique alors au conducteur de couper la traction du train, et parfois m√™me d‚Äôen baisser le pantographe.\nDans l‚Äôinfrastructure fran√ßaise, ces zones sont signal√©es par des panneaux d‚Äôannonce, d‚Äôex√©cution et de fin. Ces panneaux portent par ailleurs l‚Äôindication de baisser le pantographe ou non. Les portions de voies entre l‚Äôex√©cution et la fin peuvent ne pas √™tre √©lectrifi√©es enti√®rement, et m√™me ne pas poss√©der de cat√©naire (dans ce cas la zone n√©cessite forc√©ment de baisser le pantographe).\nParfois, des pancartes REV (pour r√©versible) sont plac√©es en aval des panneaux de fin de zone. Elles sont destin√©es aux trains qui circulent avec un pantographe √† l‚Äôarri√®re du train. Ces pancartes indiquent que le conducteur peut reprendre la traction en toute s√©curit√©.\nPar ailleurs il peut parfois √™tre impossible sur une courte portion de voie de placer une cat√©naire ou bien de lever le pantographe du train. Dans ce cas la ligne est tout de m√™me consid√©r√©e √©lectrifi√©e, et la zone sans √©lectrification (passage sous un pont par exemple) est consid√©r√©e comme une zone neutre.\nMat√©riel roulant Apr√®s avoir travers√© une zone neutre, un train doit reprendre la traction. Ce n‚Äôest pas imm√©diat (quelques secondes), et la dur√©e n√©cessaire d√©pend du mat√©riel roulant.\nIl doit √©galement, le cas √©ch√©ant, relever son pantographe, ce qui prend √©galement du temps (quelques dizaines de secondes) et d√©pend √©galement du mat√©riel roulant.\nAinsi la marche sur l‚Äôerre impos√©e au train s‚Äô√©tend en dehors de la zone neutre, puisque ces temps syst√®mes sont √† d√©compter √† partir de la fin de la zone neutre.\nMod√®le de donn√©es Nous avons choisi de mod√©liser les zones neutres comme l‚Äôespace entre les panneaux li√©s √† celle-ci (et non pas comme la zone pr√©cise o√π il n‚Äôy a pas de cat√©naire ou bien o√π la cat√©naire n‚Äôest pas √©lectrifi√©e).\nCette zone est directionnelle, i.e. associ√©e √† un sens de circulation, pour pouvoir prendre en compte des placements de panneaux diff√©rents selon le sens. Le panneau d‚Äôex√©cution d‚Äôun sens donn√© n‚Äôest pas n√©cessairement plac√© √† la m√™me position que le panneau de fin de zone du sens oppos√©.\nPour une voie √† double sens, une zone neutre est donc repr√©sent√©e par deux objets.\nLe schema est le suivant\n{ \"lower_pantograph\": boolean, \"track_ranges\": [ { \"track\": string, \"start\": number, \"end\": number, \"direction\": enum } ], \"announcement_track_ranges\": [ { \"track\": string, \"start\": number, \"end\": number, \"direction\": enum } ] } lower_pantograph : indique si le pantographe doit √™tre baiss√© dans cette zone track_ranges : liste des portions de voie o√π le train ne doit pas tractionner announcement_track_ranges : liste des portions de voie entre le panneau d‚Äôannonce et le panneau d‚Äôex√©cution Affichage Cartographie Les zones affich√©es dans la cartographie correspondent aux track_ranges, donc entre les panneaux d‚Äôex√©cution et de fin de zone. La couleur de la zone indique si le train doit baisser son pantographe dans la zone ou non.\nLa direction dans laquelle la zone s‚Äôapplique n‚Äôest pas repr√©sent√©e.\nR√©sultat de simulation Dans l‚Äôaffichage lin√©aire, c‚Äôest toujours la zone entre EXE et FIN qui est affich√©e.\nRecherche d‚Äôitin√©raire Les zones neutres sont donc des portions de voie ‚Äúnon √©lectrifi√©es‚Äù o√π un train √©lectrique peut tout de m√™me circuler (mais o√π il ne peut pas tractionner).\nLors de la recherche de chemin dans l‚Äôinfrastructure, une portion de voie qui n‚Äôest pas couverte par les track_ranges d‚Äôun objet cat√©naire (documentation √† √©crire) peut √™tre emprunt√©e par un train √©lectrique seulement si elle est couverte par les track_ranges d‚Äôune zone neutre.\nSimulation Dans la simulation, nous approximons le comportement du conducteur de la fa√ßon suivante :\nLa marche sur l‚Äôerre est entam√©e d√®s que la t√™te du train passe le panneau d‚Äôannonce Le d√©compte des temps syst√®mes (relev√© du pantographe et reprise de la traction) commence d√®s que la t√™te du train passe le panneau de fin. Dans la simulation actuelle, il est plus facile de manier des bornes d‚Äôint√©gration spatiales que temporelles. Nous effectuons l‚Äôapproximation suivante: lors de la sortie de la zone neutre, on multiplie les temps syst√®mes par la vitesse en sortie de zone. La marche sur l‚Äôerre est alors prolong√©e de la distance obtenue. Cette approximation est raisonnable car l‚Äôinertie du train et la quasi-absence de frottement garantissent que la vitesse varie peu sur cet intervalle de temps.\nPotentielles am√©liorations Plusieurs points pourraient √™tre am√©lior√©s :\nOn ne consid√®re pas les pancartes REV, tous les trains ne poss√®dent donc qu‚Äôun pantographe √† l‚Äôavant dans nos simulations. Les temps syst√®mes sont approxim√©s. Le comportement conducteur est plut√¥t restrictif (la marche sur l‚Äôerre pourrait commencer apr√®s le panneau d‚Äôannonce). L‚Äôaffichage des zones est limit√©: pas de repr√©sentation de la direction ou des zones d‚Äôannonce. Ces zones ne sont pas √©ditables. ","categories":"","description":"Documentation des zones neutres et de leur impl√©mentation","excerpt":"Documentation des zones neutres et de leur impl√©mentation","ref":"/fr/docs/explanation/models/neutral_sections/","tags":"","title":"Zones neutres"},{"body":"Ce module g√®re la recherche de solution.\nLes entr√©es et sorties sont fortement simplifi√©es et abstraites pour simplifier le probl√®me au maximum et permettre des tests efficaces.\nPour d√©crire son fonctionnement en quelques phrases : l‚Äôespace de solutions est repr√©sent√© sous forme d‚Äôun graphe qui encode le temps, la position et la vitesse. Une recherche de chemin est ensuite effectu√©e dans ce graphe pour trouver une solution. Le graphe est calcul√© au fil de son exploration.\nCe graphe peut d‚Äôune certaine mani√®re √™tre vu comme une forme d‚Äôarbre de d√©cision, si diff√©rents chemins peuvent mener au m√™me noeud.\n","categories":"","description":"","excerpt":"Ce module g√®re la recherche de solution.\nLes entr√©es et sorties sont ‚Ä¶","ref":"/fr/docs/reference/design-docs/stdcm/pathfinding_module/","tags":"","title":"Module de recherche de sillons"},{"body":"This module handles the search for solutions.\nTo reduce the problem to its simplest form and for easy and efficient testing, inputs and outputs are strongly simplified and abstracted.\nTo summarize its behavior: the solution space is described as a graph that encodes locations, time, and speed. A pathfinding is run on this graph to find a solution.\nThis graph could, in a way, be seen as a decision tree, but different paths can lead to the same node.\n","categories":"","description":"","excerpt":"This module handles the search for solutions.\nTo reduce the problem to ‚Ä¶","ref":"/en/docs/reference/design-docs/stdcm/pathfinding_module/","tags":"","title":"Train slot search module"},{"body":"Le probl√®me des discontinuit√©s Au moment d‚Äôexplorer une ar√™te du graphe, on effectue un calcul de marche pour conna√Ætre l‚Äô√©volution de la vitesse. Mais il n‚Äôest pas possible de voir plus loin que l‚Äôar√™te en question, ce qui est g√™nant pour calculer les courbes de freinages qui peuvent n√©cessiter de commencer √† freiner plusieurs kilom√®tres avant l‚Äôarriv√©e.\nCet exemple illustre le probl√®me : par d√©faut la premi√®re ar√™te est explor√©e en allant √† la vitesse maximale. C‚Äôest seulement en explorant la seconde ar√™te que la destination devient visible, sans que la distance restante soit suffisante pour s‚Äôarr√™ter.\nLa solution : revenir en arri√®re Pour r√©gler ce probl√®me, lorsqu‚Äôune ar√™te est g√©n√©r√©e avec une discontinuit√© dans les courbes de vitesse, l‚Äôalgorithme revient sur les ar√™tes pr√©c√©dentes pour en cr√©er des nouvelles qui incluent les d√©c√©l√©rations.\nPour donner un exemple simplifi√©, sur un chemin de 4 routes o√π le train peut acc√©l√©rer ou d√©c√©l√©rer de 10km/h par route :\nPour que le train s‚Äôarr√™te √† la fin de la route 4, il doit √™tre au plus √† 10km/h √† la fin de la route 3. Une nouvelle ar√™te est alors cr√©√©e sur la route 3 qui finit √† 10km/h. Une d√©c√©l√©ration est ensuite calcul√©e √† rebours de la fin de la route vers le d√©but, jusqu‚Äô√† retrouver la courbe d‚Äôorigine (ou le d√©but de l‚Äôarr√™te).\nDans cet exemple, la discontinuit√© a seulement √©t√© d√©plac√©e vers la transition entre les routes 2 et 3. Le proc√©d√© est ensuite r√©it√©r√© sur la route 2, ce qui donne le r√©sultat suivant :\nLes anciennes ar√™tes sont toujours pr√©sentes dans le graphe, elles peuvent mener √† d‚Äôautres solutions.\n","categories":"","description":"","excerpt":"Le probl√®me des discontinuit√©s Au moment d‚Äôexplorer une ar√™te du ‚Ä¶","ref":"/fr/docs/reference/design-docs/stdcm/pathfinding_module/backtracking/","tags":"","title":"Discontinuit√©s et retours en arri√®re"},{"body":"The discontinuity problem When a new graph edge is visited, a simulation is run to evaluate its speed. But it is not possible to see beyond the current edge. This makes it difficult to compute braking curves, because they can span over several edges.\nThis example illustrates the problem: by default the first edge is explored by going at maximum speed. The destination is only visible once the second edge is visited, which doesn‚Äôt leave enough distance to stop.\nSolution : backtracking To solve this problem, when an edge is generated with a discontinuity in the speed envelopes, the algorithm goes back over the previous edges to create new ones that include the decelerations.\nTo give a simplified example, on a path of 4 edges where the train can accelerate or decelerate by 10km/h per edge:\nFor the train to stop at the end of route 4, it must be at most at 10km/h at the end of edge 3. A new edge is then created on edge 3, which ends at 10km/h. A deceleration is computed backwards from the end of the edge back to the start, until the original curve is met (or the start of the edge).\nIn this example, the discontinuity has only been moved to the transition between edges 2 and 3. The process is then repeated on edge 2, which gives the following result:\nOld edges are still present in the graph as they can lead to other solutions.\n","categories":"","description":"","excerpt":"The discontinuity problem When a new graph edge is visited, a ‚Ä¶","ref":"/en/docs/reference/design-docs/stdcm/pathfinding_module/backtracking/","tags":"","title":"Discontinuities and backtracking"},{"body":"The envelope system is an interface created specifically for the OSRD gait calculation. It allows you to manipulate different space/velocity curves, to slice them, to end them, to interpolate specific points, and to address many other needs necessary for the gait calculation.\nA specific interface in the OSRD Core service The envelope system is part of the core service of OSRD (see software architecture).\nIts main components are :\n1 - EnvelopePart: space/speed curve, defined as a sequence of points and having metadata indicating for example if it is an acceleration curve, a braking curve, a speed hold curve, etc.\n2 - Envelope: a list of end-to-end EnvelopeParts on which it is possible to perform certain operations:\ncheck for continuity in space (mandatory) and speed (optional) look for the minimum and/or maximum speed of the envelope cut a part of the envelope between two points in space perform a velocity interpolation at a certain position calculate the elapsed time between two positions in the envelope 3 - Overlays : system for adding more constrained (i.e. lower speed) EnvelopeParts to an existing envelope.\nGiven envelopes vs. calculated envelopes During the simulation, the train is supposed to follow certain speed instructions. These are modelled in OSRD by envelopes in the form of space/speed curves. Two types can be distinguished:\nEnvelopes from infrastructure and rolling stock data, such as maximum line speed and maximum train speed. Being input data for our calculation, they do not correspond to curves with a physical meaning, as they are not derived from the results of a real integration of the physical equations of motion. The envelopes result from real integration of the physical equations of motion. They correspond to a curve that is physically tenable by the train and also contain time information. A simple example to illustrate this difference: if we simulate a TER journey on a mountain line, one of the input data will be a maximum speed envelope of 160km/h, corresponding to the maximum speed of our TER. However, this envelope does not correspond to a physical reality, as it is possible that on certain sections the gradient is too steep for the train to be able to maintain this maximum speed of 160km/h. The calculated envelope will therefore show in this example a speed drop in the steepest areas, where the envelope given was perfectly flat.\nSimulation of several trains In the case of the simulation of many trains, the signalling system must ensure safety. The effect of signalling on the running calculation of a train is reproduced by superimposing dynamic envelopes on the static envelope. A new dynamic envelope is introduced for example when a signal closes. The train follows the static economic envelope superimposed on the dynamic envelopes, if any. In this simulation mode, a time check is performed against a theoretical time from the time information of the static economic envelope. If the train is late with respect to the scheduled time, it stops following the economic envelope and tries to go faster. Its space/speed curve will therefore be limited by the maximum effort envelope.\n","categories":"","description":"","excerpt":"The envelope system is an interface created specifically for the OSRD ‚Ä¶","ref":"/en/docs/explanation/running_time_calculation/envelopes_system/","tags":"","title":"Envelopes system"},{"body":"Cette interface est encore en cours de conception.\nObjectifs et contraintes L‚Äôinterface doit respecter plusieurs crit√®res :\nLes calculs se basent sur le nouveau mod√®le de signalisation, avec la notion de r√©servations d‚Äôobjets capacitaires Les sillons g√©n√©r√©s ne doivent jamais g√©n√©rer de nouveaux conflits : l‚Äôinterface peut √™tre pessimiste sur les possibilit√©s, mais jamais plus permissive que la r√©alit√©. Id√©alement, le module de recherche de sillon devrait rester un bloc ind√©pendant avec un minimum de changements (dans la mesure du possible). L‚Äôobjectif serait donc d‚Äôinterpr√©ter le mod√®le de signalisation, pour g√©n√©rer des entr√©es valides pour le module de recherche de sillon : un graphe d‚Äôinfrastructure et des intervalles de disponibilit√©s de sections.\nDifficult√©s La plupart des contraintes √©tablies par la signalisation peuvent facilement s‚Äôexprimer sous la forme de sections non disponibles, sauf dans un cas : le comportement de la signalisation peut d√©pendre du chemin emprunt√© par le train. Pour √™tre capable d‚Äôexprimer les disponibilit√©s sur une zone, il peut √™tre n√©cessaire de devoir anticiper la direction du train.\nSolution propos√©e La proposition est d‚Äô√©crire un nouveau module qui se brancherait au module de signalisation pour g√©rer les entr√©es pour la recherche de sillon. Il effectuerait un parcours du graphe des itin√©raires pour construire progressivement un graphe avec occupations au bon format.\n√Ä chaque itin√©raire visit√©, l‚Äôalgorithme regarde jusqu‚Äôo√π il est possible de d√©terminer l‚Äôensemble des occupations, c‚Äôest-√†-dire quel est le premier signal dont l‚Äô√©tat d√©pend du prochain choix d‚Äôitin√©raire du train. Une ar√™te est alors g√©n√©r√©e jusqu‚Äô√† ce point, avec les occupations.\nLa partie restante de l‚Äôitin√©raire n‚Äôest pas encore consid√©r√©e. C‚Äôest seulement lorsque le graphe est explor√© un niveau plus loin, avec l‚Äôitin√©raire suivant, que la fin de l‚Äôitin√©raire pr√©c√©dent est int√©gr√©e. Elle fait alors partie de l‚Äôar√™te suivante, car √† ce moment davantage d‚Äôinformations sont disponibles sur le trajet du train.\nPar exemple :\nDans cette configuration en BAL3, il est possible de d√©terminer l‚Äôabsence de conflit des signaux 1 √† 4. Mais l‚Äô√©tat du signal 5 d√©pend de l‚Äôitin√©raire emprunt√© par le train : s‚Äôil va vers le haut, le signal 5 affiche un avertissement. Dans le cas contraire, il affiche un ‚Äúvoie libre‚Äù.\nDans cet exemple, une premi√®re arr√™te est alors g√©n√©r√©e, allant du premier signal jusqu‚Äô√† la premi√®re incertitude : le point o√π le signal 5 est visible.\nDans un second temps, une nouvelle ar√™te est g√©n√©r√©e pour chaque itin√©raire accessible depuis la fin du pr√©c√©dent : un vers A, l‚Äôautre vers B. La zone entre le signal 5 et l‚Äôaiguille sera donc dupliqu√©e entre les deux ar√™tes, mais les occupations dans cette r√©gion seront diff√©rentes.\nCe graphe peut √™tre g√©n√©r√© au fil de l‚Äôexploration, sans surco√ªt initial.\n","categories":"","description":"","excerpt":"Cette interface est encore en cours de conception.\nObjectifs et ‚Ä¶","ref":"/fr/docs/reference/design-docs/stdcm/signaling_interface/","tags":"","title":"Interface avec la signalisation"},{"body":"Le syst√®me d‚Äôenveloppes est une interface cr√©√©e sp√©cifiquement pour le calcul de marche d‚ÄôOSRD. Il permet de manipuler diff√©rentes courbes espace/vitesse, de les d√©couper, de les mettre bout √† bout, d‚Äôinterpoler des points sp√©cifiques, et d‚Äôadresser beaucoup d‚Äôautres besoins n√©cessaires au calcul de marche.\nUne interface sp√©cifique dans le service OSRD Core Le syst√®me d‚Äôenveloppes fait partie du service core d‚ÄôOSRD (voir l‚Äôarchitecture du logiciel).\nSes principaux composants sont :\n1 - EnvelopePart : courbe espace/vitesse, d√©finie comme une s√©quence des points et poss√©dant des m√©tadonn√©es indiquant par exemple s‚Äôil s‚Äôagit d‚Äôune courbe d‚Äôacc√©l√©ration, de freinage, de maintien de vitesse, etc.\n2 - Envelope : liste d‚ÄôEnvelopeParts mises bout-√†-bout et sur laquelle il est possible d‚Äôeffectuer certaines op√©rations :\nv√©rifier la continuit√© dans l‚Äôespace (obligatoire) et dans la vitesse (facultative) chercher la vitesse minimale et/ou maximale de l‚Äôenveloppe couper une partie de l‚Äôenveloppe entre deux points de l‚Äôespace effectuer une interpolation de vitesse √† une certaine position calculer le temps √©coul√© entre deux positions de l‚Äôenveloppe 3 - Overlays : syst√®me permettant d‚Äôajouter des EnvelopePart plus contraignantes (c‚Äôest-√†-dire dont la vitesse est plus faible) √† une enveloppe existante.\nEnveloppes donn√©es vs enveloppes calcul√©es Pendant la simulation, le train est cens√© suivre certaines instructions de vitesse. Celles-ci sont mod√©lis√©es dans OSRD par des enveloppes sous forme de courbes espace/vitesse. On en distingue deux types :\nLes enveloppes provenant des donn√©es d‚Äôinfrastructure et de mat√©riel roulant, comme la vitesse maximale de la ligne et la vitesse maximale du train. Etant des donn√©es d‚Äôentr√©e de notre calcul, elles ne correspondent pas √† des courbes ayant un sens physique, car elles ne sont pas issues des r√©sultats d‚Äôune int√©gration r√©elle des √©quations physiques du mouvement. Les enveloppes r√©sultant d‚Äôune int√©gration r√©elle des √©quations du mouvement physique. Elles correspondent √† une courbe physiquement tenable par le train et contiennent √©galement des informations sur le temps. Un exemple simple pour illustrer cette diff√©rence : si l‚Äôon simule un trajet de TER sur une ligne de montagne, une des donn√©es d‚Äôentr√©e va √™tre une enveloppe de vitesse maximale √† 160km/h, correspondant √† la vitesse maximale de notre TER. Mais cette enveloppe ne correspond pas √† une r√©alit√© physique, car il se peut que sur certaines portions la rampe soit trop raide pour que le train arrive effectivement √† maintenir cette vitesse maximale de 160km/h. L‚Äôenveloppe calcul√©e pr√©sentera donc dans cet exemple un d√©crochage de vitesse dans les zones de fortes rampes, l√† o√π l‚Äôenveloppe donn√©e √©tait parfaitement plate.\nSimulation de plusieurs trains Dans le cas de la simulation de nombreux trains, le syst√®me de signalisation doit assurer la s√©curit√©. L‚Äôeffet de la signalisation sur le calcul de marche d‚Äôun train est reproduit en superposant des enveloppes dynamiques √† l‚Äôenveloppe statique. Une nouvelle enveloppe dynamique est introduite par exemple lorsqu‚Äôun signal se ferme. Le train suit l‚Äôenveloppe √©conomique statique superpos√©e aux enveloppes dynamiques, s‚Äôil y en a. Dans ce mode de simulation, un contr√¥le du temps est effectu√© par rapport √† un temps th√©orique provenant de l‚Äôinformation temporelle de l‚Äôenveloppe √©conomique statique. Si le train est en retard par rapport √† l‚Äôheure pr√©vue, il cesse de suivre l‚Äôenveloppe √©conomique et essaie d‚Äôaller plus vite. Sa courbe espace/vitesse sera donc limit√©e par l‚Äôenveloppe d‚Äôeffort maximum.\n","categories":"","description":"","excerpt":"Le syst√®me d‚Äôenveloppes est une interface cr√©√©e sp√©cifiquement pour le ‚Ä¶","ref":"/fr/docs/explanation/running_time_calculation/envelopes_system/","tags":"","title":"Le syst√®me d'enveloppes"},{"body":"WIP\nThere‚Äôs a draft of what we intend to do on the French page, but it‚Äôs still a work in progress. The implementation hasn‚Äôt been started.\n","categories":"","description":"","excerpt":"WIP\nThere‚Äôs a draft of what we intend to do on the French page, but ‚Ä¶","ref":"/en/docs/reference/design-docs/stdcm/signaling_interface/","tags":"","title":"Signaling interface"},{"body":"OSRD peut √™tre utilis√© pour effectuer deux types de calculs :\nCalcul de marche (standalone train simulation) : calcul du temps de parcours d‚Äôun train sur un trajet donn√©, effectu√© sans interaction entre le train et le syst√®me de signalisation. Simulation : calcul ‚Äúdynamique‚Äù de plusieurs trains interagissant entre eux via le syst√®me de signalisation. 1 - Les donn√©es d‚Äôentr√©e Un calcul de marche est bas√© sur 5 entr√©es :\nL‚Äôinfrastructure : Topologie des lignes et des voies, position des gares et b√¢timents voyageurs, position et type des aiguilles, signaux, vitesses maximales de ligne, profil de ligne corrig√©e (pentes, rampes et virages). L‚Äôhistogramme bleu est une repr√©sentation des d√©clivit√©s en [‚Ä∞] par position en [m]. Les d√©clivit√©s sont positives pour les rampes et n√©gatives pour les pentes.\nLa ligne orange repr√©sente le profil cumul√©, c‚Äôest-√†-dire l‚Äôaltitude relative par rapport au point de d√©part.\nLa ligne bleue est une repr√©sentation des virages en termes de rayons des courbures en [m].\nLe mat√©riel roulant : Dont les caract√©ristiques n√©cessaires pour effectuer la simulation sont repr√©sent√©es ci-dessous. La courbe orange, appel√©e courbe effort-vitesse du mat√©riel, repr√©sente l‚Äôeffort moteur maximal en fonction de la vitesse de circulation.\nLa longueur, la masse, et la vitesse max du train sont repr√©sent√©es en bas de l‚Äôencadr√©.\nL‚Äôhoraire de d√©part permettant ensuite de calculer les horaires de passage aux diff√©rents points remarquables (dont gares).\nLes marges : Temps ajout√© au trajet du train pour d√©tendre sa marche (voir page sur les marges).\nLe pas de temps pour le calcul de l‚Äôint√©gration num√©rique. 2 - Les r√©sultats Les r√©sultats d‚Äôun calcul de marche peuvent se repr√©senter sous diff√©rentes formes :\nLe graphique espace/temps (GET) : repr√©sente le parcours des trains dans l‚Äôespace et dans le temps, sous la forme de traits globalement diagonaux dont la pente est la vitesse. Les arr√™ts apparaissent sous la forme de plateaux horizontaux. Exemple de GET avec plusieurs trains espac√©s d‚Äôenviron 30mn.\nL‚Äôaxe x est l‚Äôhoraire de passage du train, l‚Äôaxe y est la position du train en [m].\nLa ligne bleue repr√©sente le calcul de marche le plus tendu pour le train, la ligne verte repr√©sente un calcul de marche d√©tendu, dit ¬´¬†√©conomique¬†¬ª.\nLes rectangles pleins entourant les trajets repr√©sentent les portions de la voie successivement reserv√©es au passage du train (appel√©es cantons).\nLe graphique espace/vitesse (GEV) : repr√©sente le parcours d‚Äôun seul train, cette fois-ci en termes de vitesse. Les arr√™ts apparaissent donc sous forme de d√©crochages de la courbe jusqu‚Äô√† z√©ro, suivis d‚Äôun r√©acc√©l√©ration. L‚Äôaxe x est la position du train en [m], l‚Äôaxe y est la vitesse du train en [km/h]¬†.\nLa ligne violette repr√©sente la vitesse maximale autoris√©e.\nLa ligne bleue repr√©sente la vitesse dans le cas du calcul de marche le plus tendu.\nLa ligne verte repr√©sente la vitesse dans le cas du calcul de marche ¬´¬†√©conomique¬†¬ª.\nLes horaires de passage du train aux diff√©rents points remarquables ","categories":"","description":"","excerpt":"OSRD peut √™tre utilis√© pour effectuer deux types de calculs :\nCalcul ‚Ä¶","ref":"/fr/docs/explanation/running_time_calculation/","tags":"","title":"Calcul de marche"},{"body":"Whether you would like to use OSRD, understand it or contribute, this is the right place!\n","categories":"","description":"","excerpt":"Whether you would like to use OSRD, understand it or contribute, this ‚Ä¶","ref":"/en/docs/","tags":"","title":"Documentation"},{"body":"Vous souhaitez utiliser OSRD, y contribuer, ou simplement en comprendre le fonctionnement ? Cette documentation est pour vous !\n","categories":"","description":"","excerpt":"Vous souhaitez utiliser OSRD, y contribuer, ou simplement en ‚Ä¶","ref":"/fr/docs/","tags":"","title":"Documentation"},{"body":"Les guides pratiques sont des marches √† suivre. Vous √™tes guid√©s pas-√†-pas dans la r√©solution de probl√®mes, ou dans des sc√©narios classiques. Les connaissances requises sont plus √©lev√©es que pour les tutoriels, et le fonctionnement d‚ÄôOSRD doit √™tre compris.\n","categories":"","description":"Marches √† suivre pour des t√¢ches classiques","excerpt":"Marches √† suivre pour des t√¢ches classiques","ref":"/fr/docs/guides/","tags":"","title":"Guides pratiques"},{"body":"How-to guides are recipes. They guide you through the steps involved in addressing key problems and use-cases. They are more advanced than tutorials and assume some knowledge of how OSRD works.\n","categories":"","description":"Recipes for addressing key problems and use-cases","excerpt":"Recipes for addressing key problems and use-cases","ref":"/en/docs/guides/","tags":"","title":"How-to Guides"},{"body":" Le mot r√©servation ici a pour sens r√©servation de la resource itin√©raire, et non le sens commande plannifi√©e d‚Äôitin√©raire Description Les zones (ou TVDSection / DetectionSection) sont des partitions physiques des voies :\ncapables de d√©tecter la pr√©sence d‚Äôun train qui fournissent un service de r√©servation √† l‚Äôusage des routes Chaque zone a un certain nombre de configurations diff√©rentes. Par exemple, une zone sans aiguille aura deux configurations :\nsens pair sens impair Une zone avec une aiguille aura 4 configurations possibles :\nsens pair voie principale sens impair voie principale sens pair voie d√©viation sens impair voie d√©viation Chaque zone ne peut √™tre r√©serv√©e que pour une configuration donn√©e √† la fois, mais peut √™tre r√©serv√©e simultan√©ment par plusieurs routes. Une zone ne peut changer de configuration que lorsqu‚Äôelle n‚Äôest pas r√©serv√©e.\nEn discutant avec des experts m√©tiers, vont entendrez parler d‚Äôenclenchements: le terme viens de l‚Äô√©poque o√π les postes de signalisations √©taient enti√®rement m√©caniques. Les enclenchements √©taient alors des objets physiques qui emp√™chaient certaines configurations.\nUne cons√©quence de cet h√©ritage historique et que beaucoup de r√®gles ferroviaires sont exprim√©es par contraintes au lieu d‚Äô√™tre exprim√©es par garanties. Un enclenchement, c‚Äôest une garantie qu‚Äôune situation particuli√®re ne peut pas se produire.\n√âtat dynamique d‚Äôune zone enum ZoneState { /// A list of active reservations. /// Each reservation requires a particular configuration to be upheld. reservations: VecDeque\u003cZoneReservation\u003e, } struct ZoneReservation { /// The train which requires this reservation train: TrainHandle, // The configuration required for this reservation requirements: ZoneRequirements, /// The state of this reservation status: ZoneReservationStatus, } enum ZoneReservationStatus { /// In the process of being reserved, but not yet ready PRE_RESERVED, /// The train can arrive anytime RESERVED, /// The train is inside the zone OCCUPIED, /// The zone is pending release PENDING_RELEASE, } struct ZoneRequirements { entry: Option\u003cDirDetector\u003e, exit: Option\u003cDirDetector\u003e, movable_elements: Map\u003cMovableElement, MovableElementConfig\u003e, } impl ZoneState { /// Get the combined requirements for all the currently active reservations fn get_combined_requirements(\u0026self) -\u003e Option\u003cZoneRequirements\u003e { return self.reservations .map(|res| \u0026res.requirements) .reduce(|a, b| ZoneRequirements::combine(a, b)) } } Exigences de conception Les zones doivent pouvoir √™tre verrouill√©es dans une configuration particuli√®re. Il doit √™tre possible pour plusieurs routes de partager une r√©servation de configuration. Il doit √™tre possible d‚Äôobserver l‚Äô√©volution de statut d‚Äôune r√©servation. Il doit √™tre possible de faire √©voluer le statut d‚Äôune r√©servation. D√©pendances statique les d√©tecteurs qui d√©limitent chaque zone statique les aiguilles dans chaque zone dynamique capacit√© d‚Äôobserver l‚Äôoccupation des zones dynamique capacit√© d‚Äôactionner les √©l√©ments mobiles Op√©rations espacement: Observer l‚Äô√©tat d‚Äôune zone routage: Verrouiller et d√©verrouiller la zone : permet d‚Äôobtenir un droit d‚Äôaction. Toutes les op√©rations en √©criture n√©cessitent d‚Äôavoir acquis le verrou. routage: Attendre que toutes les r√©servations d‚Äôune zone expirent routage: Pr√©-r√©server une configuration de zone routage: Confirmer la r√©servation d‚Äôune zone routage: Attendre que la r√©servation de la zone soit occup√©e par son train routage: Relacher une r√©servation de zone ","categories":"","description":"G√®re l'√©tat de r√©servation des zones","excerpt":"G√®re l'√©tat de r√©servation des zones","ref":"/fr/docs/reference/design-docs/interlocking/reservation/","tags":"","title":"Reservation"},{"body":"OSRD can be used to perform two types of calculations:\nStandalone train simulation: calculation of the travel time of a train on a given route without interaction between the train and the signalling system. Simulation: ‚Äúdynamic‚Äù calculation of several trains interacting with each other via the signalling system. 1 - The input data A running time calculation is based on 5 inputs:\nInfrastructure: Line and track topology, position of stations and passenger buildings, position and type of points, signals, maximum line speeds, corrected line profile (gradients, ramps and curves). The blue histogram is a representation of the gradients in [‚Ä∞] per position in [m]. The gradients are positive for ramps and negative for slopes.\nThe orange line represents the cumulative profile, i.e. the relative altitude to the starting point.\nThe blue line is a representation of turns in terms of radii of curves in [m].\nThe rolling stock: The characteristics of which needed to perform the simulation are shown below. The orange curve, called the effort-speed curve, represents the maximum motor effort as a function of the speed of travel.\nThe length, mass, and maximum speed of the train are shown at the bottom of the box.\nThe departure time is then used to calculate the times of passage at the various points of interest (including stations).\nAllowances: Time added to the train‚Äôs journey to relax its running (see page on allowances).\nThe time step for the calculation of numerical integration. 2 - The results The results of a running time calculation can be represented in different forms:\nThe space/time graph (GET): represents the path of trains in space and time, in the form of generally diagonal lines whose slope is the speed. Stops are shown as horizontal plates. Example of a GET with several trains spaced about 30 minutes apart.\nThe x axis is the time of the train, the y axis is the position of the train in [m].\nThe blue line represents the most tense running calculation for the train, the green line represents a relaxed, so-called ‚Äúeconomic‚Äù running calculation.\nThe solid rectangles surrounding the paths represent the portions of the track successively reserved for the train to pass (called blocks).\nThe space/speed graph (SSG): represents the journey of a single train, this time in terms of speed. Stops are therefore shown as a drop in the curve to zero, followed by a re-acceleration. The x axis is the train position in [m], the y axis is the train speed in [km/h].\nThe purple line represents the maximum permitted speed.\nThe blue line represents the speed in the case of the most stretched running calculation.\nThe green line represents the speed in the case of the ‚Äúeconomic‚Äù travel calculation.\nThe timetable for the passage of the train at the various points of interest. ","categories":"","description":"","excerpt":"OSRD can be used to perform two types of calculations:\nStandalone ‚Ä¶","ref":"/en/docs/explanation/running_time_calculation/","tags":"","title":"Running time calculation"},{"body":"While exploring the graph, it is possible to end up in locations that would generate conflicts. They can be avoided by adding delay.\nShifting the departure time The departure time is defined as an interval in the module parameters: the train can leave at a given time, or up to x seconds later. Whenever possible, delay should be added by shifting the departure time.\nfor example : a train can leave between 10:00 et 11:00. Leaving at 10:00 would cause a conflict, the train actually needs to enter the destination station 15 minutes later. Making the train leave at 10:15 solves the problem.\nIn OSRD, this feature is handled by keeping track, for every edge, of the maximum duration by which we can delay the departure time. As long as this value is enough, conflicts are avoided this way.\nThis time shift is a value stored in every edge of the path. Once a path is found, the value is summed over the whole path. This is added to the departure time.\nFor example :\na train leaves between 10:00 and 11:00. The initial maximum time shift is 1:00. At some point, an edge becomes unavailable 20 minutes after the train passage. The value is now at 20 for any edge accessed from here. The departure time is then delayed by 5 minutes to avoid a conflict. The maximum time shift value is now at 15 minutes. This process is applied until the destination is found, or until no more delay can be added this way. Engineering allowances Once the maximum delay is at 0, the delay needs to be added between two points of the path.\nThe idea is the same as the one used to fix speed discontinuities: new edges are created, replacing the previous ones. The new edges have an engineering allowance, to add the delay where it is possible.\ncomputing an engineering allowance is a feature of the running-time calculation module. It adds a given delay between two points of a path, without affecting the speeds on the rest of the path.\n","categories":"","description":"","excerpt":"While exploring the graph, it is possible to end up in locations that ‚Ä¶","ref":"/en/docs/reference/design-docs/stdcm/pathfinding_module/conflict_avoidance/","tags":"","title":"Conflict avoidance"},{"body":"En explorant le graphe, il arrive souvent de tomber sur des situations qui m√®neraient √† des conflits. Il faut √™tre en mesure de rajouter du d√©lai pour les √©viter.\nD√©calage du temps de d√©part Dans les param√®tres de l‚Äôalgorithme, le temps de d√©part est donn√© sous la forme d‚Äôune fen√™tre : un temps de d√©part au plus t√¥t et au plus tard. Tant que c‚Äôest possible, il est toujours pr√©f√©rable de d√©caler le temps de d√©part pour √©viter les conflits.\nPar exemple : un train doit partir entre 10:00 et 11:00. En partant √† 10:00, cela provoque un conflit, le train doit entrer en gare d‚Äôarriv√©e 15 minutes plus tard. Il suffit de faire partir le train √† 10:15 pour r√©gler le probl√®me.\nDans OSRD, cette fonctionnalit√© est g√©r√©e en gardant une trace, √† chaque ar√™te, du d√©calage maximal du temps de d√©part qui pourra √™tre ajout√© sur la suite du parcours. Tant que cette valeur est suffisante, tous les conflits sont √©vit√©s par ce moyen.\nLe d√©calage du temps de d√©part est une valeur stock√©e sur chaque ar√™te et additionn√©e √† la fin de la recherche de chemin.\nPar exemple :\nun train doit partir entre 10:00 et 11:00. La recherche commence avec un d√©lai maximal de 1:00. Apr√®s quelques ar√™tes, une non-disponibilit√© est constat√©e 20 minutes apr√®s notre passage. La valeur passe donc √† 20 minutes pour la suite du parcours. Le temps de d√©part est ensuite d√©cal√© de 5 minutes pour contourner un conflit, modifiant le d√©calage maximal √† 15 minutes. Ce proc√©d√© continue jusqu‚Äô√† arriver √† la fin du trajet, ou jusqu‚Äôau point o√π il faut ajouter plus de d√©lai. Marges de construction Quand la valeur de d√©calage maximal du temps de d√©part tombe √† 0, il faut rajouter du d√©lai entre deux points du parcours du train.\nLe principe est le m√™me que pour r√©gler les discontinuit√©s de vitesse : le graphe est parcouru en arri√®re pour cr√©er de nouvelles ar√™tes.\nLa marge de construction est une fonctionnalit√© du calcul de marche permettant d‚Äôajouter un d√©lai donn√© entre deux point du parcours.\n","categories":"","description":"","excerpt":"En explorant le graphe, il arrive souvent de tomber sur des situations ‚Ä¶","ref":"/fr/docs/reference/design-docs/stdcm/pathfinding_module/conflict_avoidance/","tags":"","title":"Contourner les conflits"},{"body":"Le calcul de marche dans OSRD est un processus √† 4 √©tapes, utilisant chacune le syst√®me d‚Äôenveloppes :\nConstruction du profil de vitesse le plus restrictif Ajout des diff√©rentes courbes de freinage Ajout des diff√©rentes courbes d‚Äôacc√©l√©ration et v√©rification des courbes de vitesse constante Application de marge(s) ¬†\nCalcul du profil de vitesse le plus restrictif Une premi√®re enveloppe est calcul√©e au d√©but de la simulation en regroupant toutes les limites de vitesse statiques :\nvitesse maximale de la ligne vitesse maximale du mat√©riel roulant limitations temporaires de vitesse (en cas de travaux sur une ligne par exemple) limitations de vitesse par cat√©gorie de train limitations de vitesse selon la charge du train limitations de vitesse correspondant √† des panneaux de signalisation La longueur du train est √©galement prise en compte pour s‚Äôassurer que le train n‚Äôacc√©l√®re qu‚Äôune fois sa queue ayant quitt√© la zone de plus faible vitesse. Un d√©calage est alors appliqu√© √† la courbe en pointill√©e rouge. L‚Äôenveloppe r√©sultante (courbe noire) est appel√©e MRSP (Most Restricted Speed Profile) correspondant donc au profil de vitesse le plus restrictif. C‚Äôest sur cette enveloppe que seront calcul√©es les √©tapes suivantes.\nLa ligne pointill√©e rouge repr√©sente la vitesse maximale autoris√©e en fonction de la position. La ligne noire repr√©sente le MRSP o√π la longueur du train a √©t√© prise en compte.\nIl est √† noter que les diff√©rentes envelopeParts composant le MRSP sont des donn√©es d‚Äôentr√©e, elles ne correspondent donc pas √† des courbes avec une r√©alit√© physique.\nCalcul du profil de vitesse maximale En partant du MRSP, toutes les courbes de freinage sont calcul√©es gr√¢ce au syst√®me d‚Äôoverlay (voir ici pour plus de d√©tails sur les overlays), c‚Äôest-√†-dire en cr√©ant des envelopeParts qui seront plus restrictives que le MRSP. La courbe ainsi obtenue est appel√©e Max Speed Profile (profil de vitesse maximale). Il s‚Äôagit de l‚Äôenveloppe de vitesse maximale du train, tenant compte de ses capacit√©s de freinage.\nEtant donn√© que les courbes de freinage ont un point de fin impos√© et que l‚Äô√©quation de freinage n‚Äôa pas de solution analytique, il est impossible de pr√©dire leur point de d√©part. Les courbes de freinage sont donc calcul√©es √† rebours en partant de leur point cible, c‚Äôest-√†-dire le point dans l‚Äôespace o√π une certaine limite de vitesse est impos√©e (vitesse cible finie) ou le point d‚Äôarr√™t (vitesse cible nulle).\nPour des raisons historiques en production horaire, les courbes de freinages sont calcul√©es avec une d√©c√©l√©ration forfaitaire, dite d√©c√©l√©ration horaire (typiquement ~0,5m/s¬≤) sans prendre en compte les autres forces. Cette m√©thode a donc √©galement √©t√© impl√©ment√©e dans OSRD, permettant ainsi de calculer les freinages de deux mani√®res diff√©rentes : avec ce taux horaire ou avec une force de freinage qui vient simplement s‚Äôajouter aux autres forces.\nCalcul du profil d‚Äôeffort maximal Pour chaque point correspondant √† une augmentation de vitesse dans le MRSP ou √† la fin d‚Äôune courbe de freinage d‚Äôarr√™t, une courbe d‚Äôacc√©l√©ration est calcul√©e. Les courbes d‚Äôacc√©l√©ration sont calcul√©es en tenant compte de toutes les forces actives (force de traction, r√©sistance √† l‚Äôavancement, poids) et ont donc un sens physique.\nPour les envelopeParts dont le sens physique n‚Äôa pas encore √©t√© v√©rifi√© (qui √† ce stade sont les phases de circulation √† vitesse constante, provenant toujours du MRSP), une nouvelle int√©gration des √©quations de mouvement est effectu√©e. Ce dernier calcul est n√©cessaire pour prendre en compte d‚Äô√©ventuels d√©crochages de vitesse dans le cas o√π le train serait physiquement incapable de tenir sa vitesse, typiquement en pr√©sence de fortes rampes (voir cet exemple).\nL‚Äôenveloppe qui r√©sulte de ces ajouts de courbes d‚Äôacc√©l√©rations et de la v√©rification des plateaux de vitesse est appel√©e Max Effort Profile (profil d‚Äôeffort maximal).\nA ce stade, l‚Äôenveloppe obtenue est continue et a un sens physique du d√©but √† fin. Le train acc√©l√®re au maximum, roule aussi vite que possible en fonction des diff√©rentes limites de vitesse et de ses capacit√©s motrices, et freine au maximum. Le calcul de marche obtenu s‚Äôappelle la marche de base. Elle correspond au trajet le plus rapide possible pour le mat√©riel roulant donn√© sur le parcours donn√©.\nApplication de marge(s) Apr√®s avoir effectu√© le calcul de la marche de base (correspondant au Max Effort Profile dans OSRD), il est possible d‚Äôy appliquer des marges (allowances). Les marges sont des ajouts de temps suppl√©mentaire au parcours du train. Elles servent notamment √† lui permettre de rattraper son retard si besoin ou √† d‚Äôautres besoins op√©rationnels (plus de d√©tails sur les marges ici).\nUne nouvelle enveloppe Allowances est donc calcul√©e gr√¢ce √† des overlays pour distribuer la marge demand√©e par l‚Äôutilisateur sur l‚Äôenveloppe d‚Äôeffort maximal calcul√©e pr√©c√©demment.\nDans le calcul de marche d‚ÄôOSRD, il est possible de distribuer les marges d‚Äôune mani√®re lin√©aire, en abaissant toutes les vitesses d‚Äôun certain facteur, ou √©conomique, c‚Äôest-√†-dire en minimisant la consommation d‚Äô√©nergie pendant le parcours du train.\n","categories":"","description":"","excerpt":"Le calcul de marche dans OSRD est un processus √† 4 √©tapes, utilisant ‚Ä¶","ref":"/fr/docs/explanation/running_time_calculation/pipeline/","tags":"","title":"Le processus de calcul de marche"},{"body":"The walk calculation in OSRD is a 4-step process, each using the envelopes system:\nConstruction of the most restrictive speed profile Addition of the different braking curves Adding the different acceleration curves and checking the constant speed curves Application of allowance(s) ¬†\nCalculation of the Most Restricted Speed Profile (MRSP) A first envelope is calculated at the beginning of the simulation by grouping all static velocity limits:\nmaximum line speed maximum speed of rolling stock temporary speed limits (e.g. in case of works on a line) speed limits by train category speed limits according to train load speed limits corresponding to signposts The length of the train is also taken into account to ensure that the train does not accelerate until its tail leaves the slowest speed zone. An offset is then applied to the red dashed curve. The resulting envelope (black curve) is called the Most Restricted Speed Profile (MRSP). It is on this envelope that the following steps will be calculated.\nThe red dotted line represents the maximum permitted speed depending on the position. The black line represents the MRSP where the train length has been taken into account.\nIt should be noted that the different envelopeParts composing the MRSP are input data, so they do not correspond to curves with a physical reality.\nCalculation of the Max Speed Profile Starting from the MRSP, all braking curves are calculated using the overlay system (see here for more details on overlays), i.e. by creating envelopeParts which will be more restrictive than the MRSP. The resulting curve is called Max Speed Profile. This is the maximum speed envelope of the train, taking into account its braking capabilities.\nSince braking curves have an imposed end point and the braking equation has no analytical solution, it is impossible to predict their starting point. The braking curves are therefore calculated backwards from their target point, i.e. the point in space where a certain speed limit is imposed (finite target speed) or the stopping point (zero target speed).\nFor historical reasons in hourly production, braking curves are calculated at SNCF with a fixed deceleration, the so-called hourly deceleration (typically ~0.5m/s¬≤) without taking into account the other forces. This method has therefore also been implemented in OSRD, allowing the calculation of braking in two different ways: with this hourly rate or with a braking force that is simply added to the other forces.\nCalculation of the Max Effort Profile For each point corresponding to an increase in speed in the MRSP or at the end of a stop braking curve, an acceleration curve is calculated. The acceleration curves are calculated taking into account all active forces (traction force, driving resistance, weight) and therefore have a physical meaning.\nFor envelopeParts whose physical meaning has not yet been verified (which at this stage are the constant speed running phases, always coming from the MRSP), a new integration of the equations of motion is performed. This last calculation is necessary to take into account possible speed stalls in case the train is physically unable to hold its speed, typically in the presence of steep ramps (see this example).\nThe envelope that results from the addition of the acceleration curves and the verification of the speed plates is called the Max Effort Profile.\nAt this stage, the resulting envelope is continuous and has a physical meaning from start to finish. The train accelerates to the maximum, runs as fast as possible according to the different speed limits and driving capabilities, and brakes to the maximum. The resulting travel calculation is called the basic running time. It corresponds to the fastest possible route for the given rolling stock on the given route.\nApplication of allowance(s) After the calculation of the basic run (corresponding to the Max Effort Profile in OSRD), it is possible to apply allowances. Allowances are additions of extra time to the train‚Äôs journey. They are used to allow the train to catch up if necessary or for other operational purposes (more details on allowances here).\nA new Allowances envelope is therefore calculated using overlays to distribute the allowance requested by the user over the maximum effort envelope calculated previously.\nIn the OSRD running calculation it is possible to distribute the allowances in a linear way, by lowering all speeds by a certain factor, or in an economic way, i.e. by minimising the energy consumption during the train run.\n","categories":"","description":"","excerpt":"The walk calculation in OSRD is a 4-step process, each using the ‚Ä¶","ref":"/en/docs/explanation/running_time_calculation/pipeline/","tags":"","title":"Pipeline"},{"body":"Architecture documents are meant to help understand how OSRD works overall.\n","categories":"","description":"Learn more about OSRD architecture","excerpt":"Learn more about OSRD architecture","ref":"/en/docs/reference/architecture/","tags":"","title":"Architecture"},{"body":"Les documents d‚Äôarchitecture permettent de comprendre comment OSRD fonctionne globalement.\n","categories":"","description":"D√©tails li√© √† l'architecture de OSRD","excerpt":"D√©tails li√© √† l'architecture de OSRD","ref":"/fr/docs/reference/architecture/","tags":"","title":"Architecture"},{"body":" Tout le code du d√©pot OSRD est mis √† disposition sous la licence LGPLv3. En contribuant du code, vous acceptez la redistribution de votre contribution sous cette license.\nLa licence LGPL interdit de modifier OSRD sans publier le code source de l‚Äôapplication modifi√©e: profitez du travail des autres, et laissez les autres profiter de votre travail !\nCette contrainte n‚Äôest pas contagieuse √† travers les API: Il est possible d‚Äôutiliser OSRD comme biblioth√®que, framework ou serveur pour s‚Äôinterfacer avec des composants propri√©taires. N‚Äôh√©sitez pas √† proposer des changements pour r√©pondre √† vos besoins.\nMise en place La plupart des d√©veloppeurs OSRD utilisent Linux (y compris WSL). Vous pouvez utiliser Windows ou MacOS, mais pourriez rencontrer quelques probl√®mes. Obtenir le code source Installer git1 Ouvrir un terminal2 dans le dossier qui contiendra le code source d‚ÄôOSRD git clone git@github.com:osrd-project/osrd Lancer l‚Äôapplication Gr√¢ce √† docker, on peut facilement compiler, configurer, et lancer les diff√©rents composants apr√®s un changement. On peut aussi choisir de lancer seulement une partie des composants.\nInstaller docker 13. Suivre le README d‚ÄôOSRD. Partager vos changements Ce chapitre d√©crit le processus aboutissant √† l‚Äôint√©gration de code au sein du projet. Si vous avez besoin d‚Äôaide, ouvrez une issue ou envoyez un message instantan√©.\nSi vous n‚Äô√™tre pas un habitu√© de Git, suivez ce tutoriel\nCr√©ez une branche\nSi vous comptez contribuer r√©guli√®rement, vous pouvez demander acc√®s au d√©pot principal. Sinon, cr√©ez un fork.\nAjoutez des changements sur votre branche\nEssayez de d√©couper votre travail en √©tapes macroscopiques, et sauvegardez vos changements dans un commit √† la fin de chaque √©tape. Essayez de suivre les conventions du projet.\nConservez votre branche √† jour\ngit switch \u003cyour_branch\u003e git fetch git rebase origin/dev Ouvrez une pull request\nUne fois que vos changements sont pr√™ts, il est temps de proposer de les int√©grer √† la branche dev. Cela se fait dans l‚Äôinterface web de Github. Si possible, faites des PRs d‚Äôunit√©s logiques et atomiques √©galement (√©vitez de m√©langer le refactoring, les nouvelles fonctionnalit√©s et la correction de bugs en m√™me temps). Ajoutez une description aux PR pour expliquer ce qu‚Äôelles font et pourquoi. Aidez le relecteur en suivant les conseils donn√©s dans l‚Äôarticle de mtlynch. Ajouter les balises area:\u003caffected_area\u003e pour montrer quelle partie de l‚Äôapplication a √©t√© impact√©e. Cela peut √™tre fait via l‚Äôinterface web.\nPrennez en compte les retours\nUne fois que votre pull request est ouverte, d‚Äôautres contributeurs doivent donner leur avis sur votre proposition:\nN‚Äôimporte qui peut donner son avis Il est n√©cessaire d‚Äôobtenir l‚Äôapprobation d‚Äôun code owner pour pouvoir int√©grer le changement. Il est d‚Äôusage de prendre en compte tous les commentaires critiques Les commentaires sont souvent √©crits dans un style plut√¥t direct, dans le soucis de collaborer efficacement vers une solution acceptable par tous. Une fois que tous les commentaires ont √©t√© pris en compte, un mainteneur int√®gre le changement. En tant que reviewer tentez de suivre les recommandations de mtlynch.\nN‚Äôh√©sitez pas √† relancer vos interlocuteurs, plusieurs fois si besoin.\nStyle des commits Le format g√©n√©ral des commits est le suivant :\ncomposant: description du changement √† l'imp√©ratif Description d√©taill√©e du contenu et de la motivation du changement, si le titre n'est pas compl√®tement √©vident. le message comme le code doit √™tre en anglais tout en minuscule il peut y avoir plusieurs composants, s√©par√©s par des : quand il y a une relation hi√©rarchique, ou des , sinon dans l‚Äôid√©al, le corps du commit contient une description du changement. Sous Linux, utilisez le gestionnaire de packet de votre distribution, comme par exemple apt-get.¬†‚Ü©Ô∏é¬†‚Ü©Ô∏é\nSous Windows, ouvrez Git Bash¬†‚Ü©Ô∏é\nSous Windows/WSL, Docker Desktop est recommand√©¬†‚Ü©Ô∏é\n","categories":"","description":"Apporter des modifications au code d'OSRD","excerpt":"Apporter des modifications au code d'OSRD","ref":"/fr/docs/guides/contribute/code/","tags":"","title":"Contribuer du code"},{"body":"Set things up Most OSRD developers use Linux (incl. WSL). Windows and MacOS should work too, but you may run into some issues. Get the source code Install git.1 Open a terminal2 in the folder where the source code of OSRD will be located Run git clone git@github.com:osrd-project/osrd Launch the application Thanks to docker, one can easily compile, configure, and run all services after making a change. One can also start only a subset of the services.\nInstall docker. 13 Follow OSRD‚Äôs README. Share your changes The source code of OSRD is available under the LGPLv3 license. By contributing to the codebase, you consent to the distribution of your changes under the project‚Äôs license.\nLGPLv3 forbids modifying source code without sharing the changes under the same license: use other people‚Äôs work, and share yours!\nThis constraint does not propagate through APIs: You can use OSRD as a library, framework or API server to interface with proprietary software. Please suggest changes if you need new interfaces.\nThis chapter is about the process of integrating changes into the common code base. If you need help at any stage, open an issue or message us.\nIf you are not used to Git, follow this tutorial\nCreate a branch\nIf you intend to contribute regularly, you can request access to the main repository. Otherwise, create a fork.\nAdd changes to your branch\nBefore you start working, try to split your work into macroscopic steps. At the end of each stop, save your changes into a commit. Try to make commits of logical and atomic units. Try to follow style conventions.\nKeep your branch up-to-date\ngit switch \u003cyour_branch\u003e git fetch git rebase origin/dev Open a pull request\nOnce your changes are ready, you have to request integration with the dev branch. If possible, make PR of logical and atomic units too (avoid mixing refactoring, new features and bug fix at the same time). Add a description to PRs to explain what they do and why. Help the reviewer by following advice given in mtlynch article. Add tags Area:\u003caffected_area\u003e to show which part of the application have been impacted. It can be done through the web interface.\nTake feedback into account\nOnce your pull request is open, other contributors can review your changes:\nAny user can review your changes Your code has to be approved by a contributor familiar with the code All users are expected to take comments into account. Comments tend to be written in an open and direct manner. The intent is to efficiently collaborate towards a solution we all agree on. Once all discussions are resolved, a maintainer integrates the change. As a reviewer try to follow advice given in mtlynch article.\nIf you believe somebody forgot to review / merge your change, please speak out, multiple times if needs be.\nGit commit style The overall format for git commits is as follows:\ncomponent: imperative description of the change Detailed description of the change and what motivates it, if it is not entirely obvious from the title. the commit message, just like the code, must be in english all lowercase there can be multiple components separated by : in case of hierarchical relationships, with , otherwise the body of the commit should probably contain a detailed description of the change Under Linux, use your distribution‚Äôs package manager, such as apt-get¬†‚Ü©Ô∏é¬†‚Ü©Ô∏é\nUnder Windows, open Git Bash¬†‚Ü©Ô∏é\nUnder Windows/WSL, Docker Desktop is recommended¬†‚Ü©Ô∏é\n","categories":"","description":"Integrate changes into OSRD","excerpt":"Integrate changes into OSRD","ref":"/en/docs/guides/contribute/code/","tags":"","title":"Contribute code"},{"body":"L‚Äôapplication OSRD est divis√©e en plusieurs services √©crits dans plusieurs langues. Nous essayons de suivre les bonnes pratiques g√©n√©rales en mati√®re de code et de respecter les sp√©cificit√©s de chaque langue lorsque cela est n√©cessaire.\nR√®gles g√©n√©rales Expliquez ce que vous faites et pourquoi. Documentez le nouveau code. Ajoutez des tests clairs et simples. D√©composez le travail en morceaux intelligibles. Prenez le temps de choisir de bons noms. √âvitez les abr√©viations peu connues. Contr√¥le et coh√©rence de la r√©utilisation du code de tiers : une d√©pendance est ajout√©e seulement si elle est absolument n√©cessaire. Chaque d√©pendance ajout√©e diminue notre autonomie et notre coh√©rence. Ne pas r√©inventer la roue : En opposition au point pr√©c√©dent, ne r√©inventez pas tout √† tout prix. S‚Äôil existe une d√©pendance dans l‚Äô√©cosyst√®me qui est le standard ‚Äúde-facto‚Äù, nous devrions fortement envisager de l‚Äôutiliser. Plus de code et de recommandations g√©n√©rales dans le d√©p√¥t principal CONTRIBUTING.md. Demandez toute l‚Äôaide dont vous avez besoin ! ","categories":"","description":"Conventions de codes et bonnes pratiques","excerpt":"Conventions de codes et bonnes pratiques","ref":"/fr/docs/guides/contribute/conventions/","tags":"","title":"Conventions"},{"body":"Design documents are meant to help understand and participate in designing software.\nEach design document describes a number of things about a piece of software:\nits goals its constraints how its inputs and outputs were modeled how it works ","categories":"","description":"Learn more about how the software was designed","excerpt":"Learn more about how the software was designed","ref":"/en/docs/reference/design-docs/","tags":"","title":"Design documents"},{"body":"Les documents de conceptions d√©crivent comment et pourquoi un composant logiciel a √©t√© con√ßu, de l‚Äôexposition du probl√®me √† la solution technique, en passant par le chemin pris pour y arriver.\n","categories":"","description":"D√©tails li√©s √† la conceptions de solutions techniques","excerpt":"D√©tails li√©s √† la conceptions de solutions techniques","ref":"/fr/docs/reference/design-docs/","tags":"","title":"Documents de conception"},{"body":"Une des ambitions d‚ÄôOSRD est d‚Äôaider √† la planification horaire √† l‚Äô√©chelle europ√©enne.\nPour atteindre cet objectif, OSRD doit tenir compte des sp√©cificit√©s locales en consultant et collaborant avec les compagnies ferroviaires et les gestionnaires d‚Äôinfrastructure.\nEn √©change de leur contribution, ces entreprises¬†:\nProfitent des efforts de d√©veloppement commun¬†; Peuvent se baser sur les outils communs pour cr√©er les leurs1¬†; Participent √† la feuille de route et √† la direction technique du projet √† la mesure de leur contribution. OSRD est actuellement d√©velopp√© par:\nune √©quipe de d√©veloppeurs √† plein temps au sein de SNCF R√©seau, gr√¢ce √† un financement de SNCF R√©seau, de l‚ÄôEtat Fran√ßais et de l‚ÄôUnion Europ√©enne¬†; des contributeurs individuels. La fondation Open Rail La fondation Open Rail est une association √† but non lucratif en cours de cr√©ation ayant pour objectif d‚Äôorganiser le travail autour d‚Äôoutils logiciels communs au monde du ferroviaire.\nTant qu‚Äôelles ne modifient pas les outils communs sans partager leurs am√©liorations, voir les d√©tails de la license LGPLv3.¬†‚Ü©Ô∏é\n","categories":"","description":"Organisation et gouvernance d'OSRD","excerpt":"Organisation et gouvernance d'OSRD","ref":"/fr/about/governance/","tags":"","title":"Gouvernance"},{"body":"One of the ambitions of OSRD is to help with timetabling on a European scale.\nTo reach this goal, OSRD has to take local features into account by consulting and collaborating with railway companies and infrastructure operators.\nAnd by contributing to OSRD, these companies:\nProfit from all the common development efforts Can freely build on the common effort to achieve their own goals1 Participate in the roadmap and technical direction of the project to the extent of their contribution OSRD is currently developped by:\nA team of full-time developpers at SNCF R√©seau, financed by SNCF R√©seau, the French state and the European Union Individual contributors The Open Rail Foundation The Open Rail Foundation is an upcoming non-profit commited to organizing cooperative work around railway software tools.\nAs long as they don‚Äôt modify the common tools without sharing their improvements. See the details of the LGPLv3 license.¬†‚Ü©Ô∏é\n","categories":"","description":"Governance and organisation of OSRD","excerpt":"Governance and organisation of OSRD","ref":"/en/about/governance/","tags":"","title":"Governance"},{"body":"Le mod√®le de simulation d√©finit le r√¥le et comportement des diff√©rents objets simul√©s au sein d‚ÄôOSRD.\nCette mod√©lisation est un compromis entre de multiples enjeux:\nfid√©lit√© de la simulation interpr√©tabilit√© des r√©sultats adaptabilit√© du mod√®le √† diff√©rentes technologies et usages, que cela soit en terme de signalisation, de poste d‚Äôaiguillage, ou d‚Äôusage des donn√©es En particulier, certaines subtilit√©s propres aux syst√®mes pratiques ont √©t√© sacrifi√©es sur l‚Äôautel de la compatibilit√© et de l‚Äôinterpr√©tabilit√©:\nun signal doit forc√©ment s‚Äôaddresser √† un train en particulier: les signaux n‚Äôont pas d‚Äôaspect par d√©faut; ils n‚Äôexistent que pour √™tre vus les itin√©raires / routes sont form√©es √† destination d‚Äôun train en particulier Ce document est une description du mod√®le de fonctionnement cible d‚ÄôOSRD. Il a pour objectif de renseigner d√©veloppeurs et experts m√©tiers sur le fonctionnement du simulateur. Des changements y sont apport√©s au fil de l‚Äô√©volution du projet.\nCe mod√®le est en cours d‚Äôimpl√©mentation\nArchitecture flowchart TD %%%% NODES train[Train] %% ‚Üì signaling[Signalisation] %% ‚Üì routing[Routage] ordering[Ordonnancement] %% ‚Üì reservation[R√©servation] %% ‚Üì location[Localisation] movable-elements[\"√âl√©ments mobiles\"] %%%% EDGES train -- r√©agit √† --\u003e signaling train -- r√©clame les itin√©raires --\u003e ordering ordering -- commande --\u003e routing signaling -- observe --\u003e reservation routing -- observe et r√©serve --\u003e reservation reservation -- observe --\u003e location reservation -- actionne --\u003e movable-elements train -- informe --\u003e location %%%% CLICKABLE LINKS click train href \"./train/\" _self click ordering href \"./ordering/\" _self click signaling href \"./signaling/\" _self click routing href \"./routing/\" _self click reservation href \"./reservation/\" _self click location href \"./location/\" _self click movable-elements href \"./movable-elements/\" _self Pistes d'√©volution Gestion des overlaps Remerciements Par ordre alphab√©tique:\nChristophe M√©min Djamal Bellebia Gilles Dessagne Nathana√´l Dias ","categories":"","description":"D√©crit le fonctionnement du poste d'aiguillage virtuel","excerpt":"D√©crit le fonctionnement du poste d'aiguillage virtuel","ref":"/fr/docs/reference/design-docs/interlocking/","tags":"","title":"Poste d'aiguillage"},{"body":"Les guides de r√©f√©rence technique contiennent des r√©f√©rences techniques pour les API et autres aspects de la machinerie OSRD. Ils pr√©sentent son fonctionnement et la mani√®re de l‚Äôexploiter en partant du principe que les concepts cl√©s de base sont ma√Ætris√©s.\n","categories":"","description":"Machinerie interne et APIs","excerpt":"Machinerie interne et APIs","ref":"/fr/docs/reference/","tags":"","title":"R√©f√©rence technique"},{"body":"Description Les routes ont pour responsabilit√© d‚Äôautoriser le d√©placement des trains dans l‚Äôinfrastructure. Elles doivent se terminer √† un point o√π l‚Äôarr√™t du train est pr√©vu (en terme de signalisation, pas voyageur). Les routes sont assimilables √† des itin√©raires, ou √† des suites d‚Äôitin√©raires et d‚Äôinstallations de pleine voie. Les routes n‚Äôont pas de lien direct avec le cantonnement et la signalisation. Elles nourissent des informations sur la disponibilit√© des voies qui sont utilis√©es par le cantonnement et la signalisation. Une route est un chemin de d√©tecteur en d√©tecteur. Elle repr√©sente une portion de chemin qu‚Äôil est s√ªr pour un train d‚Äôemprunter. Les routes ont des points de lib√©ration, qui sont des d√©tecteurs qui d√©limitent quand d√©truire l‚Äôitin√©raire, ce qui permet d‚Äôimpl√©menter transit souple, rigide, et entre-deux. Une route peut √™tre √† nouveau form√©e alors qu‚Äôun train est d√©j√† en train de la parcourir. Cela permet √† plusieurs trains de se suivre sur la m√™me route. Cycle de vie d‚Äôune route Les routes n‚Äôont pas d‚Äô√©tat, mais leur commande donne lieu √† une suite d‚Äô√©v√©nements syst√©matique :\nle syst√®me commande toutes les routes sur le trajet du train dans l‚Äôordre, sans attendre la commande doit √™tre accept√©e par le r√©gulateur lorsque le r√©gulateur accepte la commande, la formation commence le droit d‚Äôaction de chaque zone de la route est acquis, selon un ordre global en parall√®le pour toutes les zones: si la zone n‚Äôest pas dans la configuration souhait√©e: si elle est d√©j√† r√©serv√©e, attendre que les r√©servations expirent sinon, la mettre dans la configuration souhait√©e en d√©pla√ßant les aiguilles pr√©-r√©server la zone pour le passage du train le droit d‚Äôaction de la zone est c√©d√© une fois que la formation est termin√©e, la route est √©tablie pour chaque zone, transformer la pr√©-r√©servation du train en r√©servation d√®s que la route est √©tablie, un processus de destruction de la route commence pour chaque zone de la route donnant lieu √† une lib√©ration attendre que le train quitte la zone (que la r√©servation passe de l‚Äô√©tat OCCUPIED √† l‚Äô√©tat PENDING_RELEASE) lib√©rer la r√©servation des zones du d√©but de la route jusqu‚Äô√† la zone actuelle Piste d'√©volution Certains postes d‚Äôaiguillages ont un enclenchement entre itin√©raires de sens contraire (affrontement) qui emp√™che l‚Äôactivation d‚Äôune route en menant √† une zone avec un transit en sens contraire. Il serait envisageable de r√©server une zone suppl√©mentaire √† la fin du chemin prot√©g√© par la route, par s√©curit√©. Piste d'√©volution Certains itin√©raires en gare ne permettent pas le partage du chemin par plusieurs trains Piste d'√©volution En pratique, il pourrait √™tre int√©ressant d‚Äôintroduire une notion de route partielle afin de r√©duire le nombre de routes n√©cessaires: une route partielle est une portion de route qu‚Äôil n‚Äôest pas s√ªr d‚Äôactiver ind√©pendament. Exigences de conception Le syst√®me doit, indirectement ou directement:\npermettre √† la signalisation de d√©terminer si une section de voie est pr√™te √† √™tre emprunt√©e. permettre l‚Äôordonnancement des trains selon des crit√®res configurables. permettre la destruction progressive (transit souple) de l‚Äôitin√©raire apr√®s le passage du train. il doit √™tre possible d‚Äôavoir plusieurs processus de commande actifs au m√™me moment pour la m√™me route, afin de supporter des trains qui se suivent D√©pendances statique le chemin des routes de d√©tecteur √† d√©tecteur\nstatique la position requise des aiguilles, par zone\nstatique les points de lib√©ration des zones (qui impl√©mentent le transit souple / rigide)\ndynamique r√©gulateur soumettre des commandes\ndynamique r√©servation acqu√©rir et relacher un droit d‚Äôaction par zone\ndynamique r√©servation attendre que les r√©servations d‚Äôune zone expirent\ndynamique √©l√©ments mobiles d√©placer des aiguilles\ndynamique r√©servation pr√©-r√©server une zone\ndynamique r√©servation promouvoir une pr√©-r√©servation en r√©servation\ndynamique r√©servation lors de la destruction de la route, attendre qu‚Äôune r√©servation passe en PENDING_RELEASE\ndynamique r√©servation lib√©rer une r√©servation\nOp√©rations commander une route: d√©marre un processus asynchrone qui ne se terminera que lorsque la route aura √©t√© √©tablie. Un processus de destruction doit d√©marrer d√®s que la route est √©tablie. Notes de conception Ces notes permettent d‚Äôexpliquer les d√©cisions qui ont √©t√© prises, afin de pouvoir plus ais√©ment les comprendre et √©voluer.\nInformer la signalisation Sachant que:\nil peut y avoir beaucoup de zones partant d‚Äôun m√™me point, il est pr√©f√©rable d‚Äô√©viter de contraindre les signaux √† observer une liste de routes il est potentiellement difficile d‚Äôassocier un √©tat clair √† chaque route Il en ressort plusieurs mani√®res d‚Äôinformer la signalisation de la navigabilit√© des voies:\nsoit directement, en faisant observer √† la signalisation les points d‚Äôentr√©e des routes. Si plusieurs routes partent du m√™me endroit, elles partageraient un objet entr√©e: moins de complexit√© dans la couche de r√©servation, plus de complexit√© dans la couche de routage soit indirectement, via la couche de r√©servation des zones, qui auraient un √©tat suppl√©mentaire pour marquer leur navigabilit√©: moins de complexit√© dans la couche de routage, plus de complexit√© dans la couche de r√©servation avantage le processus d‚Äôactivation des routes n‚Äôaurait pas besoin d‚Äôattendre l‚Äôarriv√©e du train, la couche de r√©servation s‚Äôen occuperait. avantage d√©couplage entre routage et cantonnement / signalisation. La seconde option a √©t√© choisie, car :\nelle permet d‚Äôavoir un couplage moins fort entre la signalisation et les routes. elle √©vite aussi au processus d‚Äôactivation des routes d‚Äôattendre le passage du train alors que la couche de r√©servation le fait d√©j√†. Cycle de vie des routes et √©tat des zones Plusieurs enjeux motivent le cycle de vie des routes et l‚Äô√©tat des zones :\nd‚Äôune part, l‚Äô√©tat des zones est au coeur de la d√©tection de conflit : il doit √™tre possible d‚Äôextraire d‚Äôune simulation d‚Äôun train seul ses besoins en ressources d‚Äôautre part, il faut qu‚Äôune simulation multi-train fonctionne correctement : le temps de d√©placement des aiguilles selon la configuration actuellement en place, en particulier, est un point de friction important ","categories":"","description":"G√®re le cycle des routes","excerpt":"G√®re le cycle des routes","ref":"/fr/docs/reference/design-docs/interlocking/routing/","tags":"","title":"Routage"},{"body":"OSRD application is split in multiple services written in several languages. We try to follow general code best practices and follow specificity for each languages when required.\nGeneral rules Explain what you‚Äôre doing and why. Document new code with doc comments. Include clear, simple tests. Break work into digestible chunks. Take the time to pick good names. Avoid non well-known abbreviations. Control and consistency over 3rd party code reuse: Only add a dependency if it is absolutely necessary. Every dependency we add decreases our autonomy and consistency. Don‚Äôt reinvent every wheel: As a counter to the previous point, don‚Äôt reinvent everything at all costs. If there is a dependency in the ecosystem that is the ‚Äúde-facto‚Äù standard, we should heavily consider using it. More code general recommendations in main repository CONTRIBUTING.md. Ask for any help that you need! ","categories":"","description":"Coding style guide and best practices","excerpt":"Coding style guide and best practices","ref":"/en/docs/guides/contribute/conventions/","tags":"","title":"Style guide"},{"body":"Technical reference guides contain technical reference for APIs and other aspects of OSRD‚Äôs machinery. They describe how it works and how to use it but assume that you have a basic understanding of key concepts.\n","categories":"","description":"Internal machinery and APIs","excerpt":"Internal machinery and APIs","ref":"/en/docs/reference/","tags":"","title":"Technical reference"},{"body":"\n","categories":"","description":"OSRD's data-flow diagram","excerpt":"OSRD's data-flow diagram","ref":"/en/docs/reference/architecture/data_flow/","tags":"","title":"Data-flow"},{"body":"\n","categories":"","description":"Sch√©ma des flux des donn√©es d'osrd","excerpt":"Sch√©ma des flux des donn√©es d'osrd","ref":"/fr/docs/reference/architecture/data_flow/","tags":"","title":"Flux des donn√©es"},{"body":"It is a multi-service architecture where several software components interact with each other. This choice was made to ensure the modularity of the code and to guarantee the exploitability of certain OSRD services by external applications.\n","categories":"","description":"OSRD's services architecture","excerpt":"OSRD's services architecture","ref":"/en/docs/reference/architecture/services/","tags":"","title":"Services"},{"body":"Il s‚Äôagit d‚Äôune architecture multi-services o√π plusieurs composants logiciels interagissent entre eux. Ce choix a √©t√© fait pour assurer la modularit√© du code et pour garantir l‚Äôexploitabilit√© de certains services d‚ÄôOSRD par des applications ext√©rieures.\n","categories":"","description":"Architecture des services de l'application","excerpt":"Architecture des services de l'application","ref":"/fr/docs/reference/architecture/services/","tags":"","title":"Services"},{"body":" This document is pending review\nDescription The signaling layer includes all signals, which respond to track occupancy and reservation. Signals can be of different types, and are modularly loaded. Only their behavior towards the state of the infrastructure and the train‚Äôs reaction to signaling matters.\nSignals are connected to each other by blocks. Blocks define the movements authorized by signaling.\nGoals The signaling system is at the crossroads of many needs:\nit must allow for realistic signaling simulation in a multi-train simulation it must allow the conflict detection system to determine which resources are required for the train it must allow application users to edit and display signals it must allow for visualization of signals on a map Design requirements: Static data:\nmust enable the front-end to display the signals must enable the infrastructure editor to configure signals must enable the back-end to simulate signals must be close to realistic industry models must allow for the modeling of composite signals, which carry several logical signals within a single physical signal To simulate signaling:\nblocks must be generated for both user convenience and pathfinding for each signal, its next compatible signal and protected zones must be deduced the minimum necessary information must be provided to the signaling modules for their operation using signaling modules without having to instantiate a complete simulation must be enabled the design of the signaling module API must allow for signals to be loaded in any order { # unique identifier for the signaling system \"id\": \"BAL\", \"version\": \"1.0\", # a list of roles the system assumes \"roles\": [\"MA\", \"SPEED_LIMITS\"], # the schema of the dynamic state of signals of this type \"signal_state\": [ {\"kind\": \"enum\", \"field_name\": \"aspect\", values: [\"VL\", \"A\", \"S\", \"C\"]}, {\"kind\": \"flag\", \"field_name\": \"ralen30\"}, {\"kind\": \"flag\", \"field_name\": \"ralen60\"}, {\"kind\": \"flag\", \"field_name\": \"ralen_rappel\"} ], # the schema of the settings signals of this type can read \"signal_settings\": [ {\"kind\": \"flag\", \"field_name\": \"Nf\", \"display_name\": \"Non-franchissable\"}, {\"kind\": \"flag\", \"field_name\": \"has_ralen30\", \"default\": false, \"display_name\": \"Ralen 30\"}, {\"kind\": \"flag\", \"field_name\": \"has_rappel30\", \"default\": false, \"display_name\": \"Rappel 30\"}, {\"kind\": \"flag\", \"field_name\": \"has_ralen60\", \"default\": false, \"display_name\": \"Ralen 60\"}, {\"kind\": \"flag\", \"field_name\": \"has_rappel60\", \"default\": false, \"display_name\": \"Rappel 60\"} ], # these are C-like boolean expressions: # true, false, \u003cflag\u003e, \u003cenum\u003e == value, \u0026\u0026, || and ! can be used # used to evaluate whether a signal is a block boundary. \"block_boundary_when\": \"true\", # used to evaluate whether a signal is a route boundary. \"route_boundary_when\": \"Nf\", # used for naive conflict detection. \"constraining_ma_when\": \"aspect != VL\" } Assumptions Each physical signal can be decomposed into a list of logical signals, all of which are associated with a signaling system. Blocks have a type. It is possible to determine, given only the signal, its delimiting properties. Blocks never cross route boundaries. Blocks which are not covered by routes do not exist, or can be ignored. At any time, trains only use one signaling system capable of transmitting movement authority. Design of Signaling Systems Each signaling system has:\nA unique identifier (a string). A set of roles: Transmission of Movement Authority Transmission of speed limits Its signal state type, which enables deducing: The graphical representation of the signal How a train would react to the signal If the signal state constrains Movement Authority The signal parameter types, names and description, which enable front-end edition of signal parameters. The block and route conditions, which enable evaluating whether a signal delimits blocks or routes, given its parameters. Note that if a signaling system has a dual role of transmitting Movement Authority (MA) and speed limits, not all signals in this system are necessarily tasked with transmitting speed limit information.\nDesign of blocks The blocks have several attributes:\nA signaling system that corresponds to that displayed by its first signal. A path, which is a list of direction + detector pairs (just like route paths). An entry signal, (optional when the block starts from a buffer stop). Intermediate signals, if any (only used by systems with distant signals). An exit signal, (optional when the block ends at a buffer stop). The path is expressed from detector to detector so that it can be overlayed with the route graph.\nA few remarks:\nThere can be multiple blocks with the same path, as long as they have different signaling systems. Trains only use a block at a time, and ignore others. Blocks do not have a state: one can rely on the dynamic state of the zones that make it up. Blocks are used to figure out which signals protect which zones in a given context. Design of signals Physical signal are made up of one or more logical signals, which are displayed as a single unit on the field. During simulation, logical signals are treated as separate signals.\nEach logical signal is associated with a signaling system, which defines if the signal transmits Movement Authority, speed limits, or both.\nLogical signals have one or more drivers. Signal drivers are responsible for computing signal state. Any given signal driver only works for a given pair of signaling systems, where the first one is displayed by the signal, and the second is the one displayed by the next signal.\nWhen a logical signal has an empty driver list, its content is deduced from neighboring signals.\nFor example, a BAL signal that is both a departure of the TVM block and a departure of the BAL block, it will have two drivers: BAL-BAL and BAL-TVM.\nRaw signal format The raw signal format is the user-editable description of a physical signal.\nRaw signals have a list of logical signals, which are independently simulated units sharing a common physical display. Each logical signal has:\na signaling system user-editable settings, as specified in the signaling system description a list of allowed next signaling systems, which are used to load drivers For example, this signal encodes a BAL signal which starts both a BAL and a TVM block:\n{ # signals must have location data. # this data is omitted as its format is irrelevant to how signals behave \"logical_signals\": [ { # the signaling system shown by the signal \"signaling_system\": \"BAL\", # the settings for this signal, as defined in the signaling system manifest \"settings\": {\"has_ralen30\": \"true\", \"Nf\": \"true\"}, # this signal can react to BAL or TVM signals # if the list is empty, the signal is assumed to be compatible with all following signaling systems \"next_signaling_systems\": [\"BAL\", \"TVM\"] } ] } For example, this signal encodes a BAL signal which starts a BAL block, and shares its physical display / support with a BAPR signal starting a BAPR block:\n{ # signals must have location data. # this data is omitted as its format is irrelevant to how signals behave \"logical_signals\": [ { \"signaling_system\": \"BAL\", \"settings\": {\"has_ralen30\": \"true\", \"Nf\": \"true\"}, \"next_signaling_systems\": [\"BAL\"] }, { \"signaling_system\": \"BAPR\", \"settings\": {\"Nf\": \"true\", \"distant\": \"false\"}, \"next_signaling_systems\": [\"BAPR\"] } ] } Such signal descriptions can be condensed down into a simplified description string, for the specific use-case of representing / generating signal icons: BAL[Nf=true,ralen30=true]+BAPR[Nf=true,distant=false]\nLoading Signal Parameters The first step of loading the signal is to characterize the signal in the signaling system. This step produces an object that describes the signal.\nDuring the loading of the signal:\nthe signaling system corresponding to the provided name is identified the signal parameters are loaded and validated according to the signaling system spec the signal‚Äôs block and route delimiting properties are evaluated Loading the Signal Once signal parameters are loaded, drivers can be loaded. For each driver:\nThe driver implementation is identified from the (signaling_system, next_signaling_system) pair. It is verified that the signaling system outgoing from the driver corresponds to the one of the signal. It is verified that there is no existing driver for the incoming signaling system of the driver. This step produces a Map\u003cSignalingSystem, SignalDriver\u003e, where the signaling system is the one incoming to the signal. It then becomes possible to construct the loaded signal.\nConstructing Blocks The framework creates blocks between signals following the routes present in the infrastructure, and the block properties of the signals. Checks are made on the created block graph: it must always be possible to choose a block for each signal and each state of the infrastructure. Speed Limits Speed limits are represented as ranges on routes. They start their life as ranges on track sections, and are lifted to ranges on routes as follows:\nDirectional speed limits by track are elevated to routes. The same speed limit can be on multiple routes. For each speed limit, the route graph is traversed in reverse searching for signals capable of handling the limit: Only speed limits not preceded by another limit with identical properties are considered. Each signal must signal its interest in a speed limit: Not concerned, Concerned but to be announced by another signal, or Concerned and terminal. For each speed limit planned along the train‚Äôs path, the signals in the announcement chain are added to the list of those to be simulated for the train. enum SpeedLimitHandling { /** This signal isn't supposed to announce this limit */ Ignore, /** This signal should announce this limit, but cannot */ Error, /** This signal can announce this limit, and is part of an ongoing chain */ Chain, /** This signal can announce this limit, and ends the chain */ EndChain, } fn handles_speed_limit( self: SignalSettings, speed_limit: SpeedLimit, distance_mm: u64, ) -\u003e SpeedLimitHandling; fn handles_speed_limit_chain( self: SignalSettings, speed_limit: SpeedLimit, chain_signal: Signal, distance_mm: u64, ) -\u003e SpeedLimitHandling; Block validation The validation process helps to report invalid configurations in terms of signaling and blockage. The validation cases we want to support are:\nThe signaling system may want to validate, knowing if the block starts / ends on a buffer: the length of the block the spacing between the block signals, first signal excluded Each signal in the block may have specific information if it is a transition signal. Therefore, all signal drivers participate in the validation. In practice, there are two separate mechanisms to address these two needs:\nThe signaling system module is responsible for validating signaling within blocks. Signal drivers take care of validating transitions between blocks. extern fn report_warning(/* TODO */); extern fn report_error(/* TODO */); struct Block { startsAtBufferStop: bool, stopsAtBufferStop: bool, signalTypes: Vec\u003cSignalingSystemId\u003e, signalSettings: Vec\u003cSignalSettings\u003e, signalPositions: Vec\u003cDistance\u003e, length: Distance, } /// Runs in the signaling system module fn check_block( block: Block, ); /// Runs in the signal driver module fn check_signal( signal: SignalSettings, block: Block, // The partial block downstream of the signal - no signal can see backward ); Signal lifecycle Before a train startup:\nthe path a of the train can be expressed is given, both as routes and blocks the signal queue a train will encounter is established During the simulation:\nalong a train movement, the track occupation before it are synthesized when a train observes a signal, its state is evaluated Signal state evaluation Signals are modeled as an evaluation function, taking a view of the world and returning the signal state\nenum ZoneStatus { /** The zone is clear to be used by the train */ CLEAR, /** The zone is occupied by another train, but otherwise clear to use */ OCCUPIED, /** The zone is incompatible. There may be another train as well */ INCOMPATIBLE, } interface MAView { /** Combined status of the zones protected by the current signal */ val protectedZoneStatus: ZoneStatus val nextSignalState: SignalState val nextSignalSettings: SignalSettings } interface DirectSpeedLimit { /** Distance between the signal and the speed limit */ val distance: Distance val speed: Speed } interface IndirectSpeedLimit { val distanceToNextSignal: Distance val nextSignalState: SignalState val nextSignalSettings: SignalSettings } interface SpeedLimitView { /** A list of speed limits directly downstream of the signal */ val directSpeedLimits: List\u003cDirectSpeedLimit\u003e /** A list of speed limits which need to be announced in a signal chain */ val indirectSpeedLimits: List\u003cIndirectSpeedLimit\u003e } fun signal(maView: MAView?, limitView: SpeedLimitView?): SignalState { // ... } The view should allow access to the following data:\na synthetized view of zones downstream until the end of the train‚Äôs MA the block chain the state of downstream signals which belong to the current block chain Signaling view path The path along which the MAView and SpeedLimitView live is best expressed using blocks:\nblocks can be added to extend the view along the path of a train the view can be reduced by removing blocks, as the train passes by signals Simulation outside the train path Everything mentionned so far was designed to simulate signals between a train the end of its movement authority, as all others signals have no influence over the behavior of trains (they cannot be seen, or are disregarded by drivers).\nNevertheless, one may want to simulate and display the state of all signals at a given point in time, regardless of which signals are in use.\nSimulation rules are as follows:\nif a signal starts blocks which have differing paths, it is simulated as if it were at the end of a route if a signal starts blocks which all start the same path, it is simulated in the same view as the next signals in this path Dependencies For the block graph generation:\nroute graph. For each route: waypoints: List\u003cDiDetector\u003e signals: OrderedMap\u003cPosition, UnloadedSignal\u003e speed_limits: RangeMap\u003cPosition, SpeedLimit\u003e, including the logic for train category limits signaling systems drivers For evaluation:\ntrain path in blocks portion of the path to evaluate drivers state of the zones in the section to evaluate Operations Instantiating a view creates a framework for observing signals Planning the path signals to the view the blocks that the train will traverse Observing a signal subscribe to the state of a signal (through the view) Passing a signal signals that a signal has been passed by the train (through the view) Appendices Research Questions Are there any blocks that overlap the end of a route? SNCF(Lo√Øc): No. Are there any signals which rely on the state of the one after next signal? SNCF(Lo√Øc): No. Are there signals that change behavior based on the active block in front of them? SNCF(Lo√Øc): Yes, for slowdowns. Are there signals that are the start of blocks of different types? SNCF(Lo√Øc): Yes. Can the behavior of a signal depend on which block is active after the end of the current block? SNCF(Lo√Øc): Yes, with slowdowns or blinking yellow. Do some signaling systems need additional information in the blocks? SNCF(Lo√Øc): Kind of, there are slowdowns, but it‚Äôs not specifically carried by the block. Is it nominal for a train to have multiple active signaling systems at the same time? SNCF(Lo√Øc): No. When and by whom are the blocks generated? What data is necessary for generating the blocks? ","categories":"","description":"Describes the signaling model","excerpt":"Describes the signaling model","ref":"/en/docs/reference/design-docs/signaling/","tags":"","title":"Signaling"},{"body":" Ce document est en attente de revue\nDescription La couche de signalisation comprend l‚Äôensemble des signaux, qui r√©agissent au cantonnement et √† la r√©servation. Les signaux peuvent √™tre de diff√©rent types, et sont charg√©s de mani√®re modulaire. Seul importe leur comportement vis-√†-vis de l‚Äô√©tat de l‚Äôinfrastructure, et la r√©action des trains √† la signalisation.\nLes signaux sont reli√©s entre eux par des cantons. Les cantons d√©finissent les mouvements autoris√©s par la signalisation.\nObjectifs Le syst√®me de signalisation est √† la crois√©e de nombreux besoins:\nil doit permettre de simuler la signalisation de mani√®re r√©aliste, dans une simulation multi-trains il doit permettre au syst√®me de d√©tection de conflits de d√©terminer quelles ressources sont requises pour le train il doit permettre aux utilisateurs de l‚Äôapplication d‚Äô√©diter et d‚Äôafficher les signaux il doit permettre de visualiser les signaux sur une carte Exigences de conception Les donn√©es statiques :\ndoivent permettre au front de r√©pr√©senter les signaux (choisir une image) doivent permettre √† l‚Äô√©diteur de configurer les signaux doivent permettre au back de simuler les signaux doivent √™tre proches du m√©tier doivent permettre de mod√©liser des signaux composites, qui repr√©sentent en un seul signal physique plusieurs signaux logiques Pour la simulation de la signalisation :\ndes cantons doivent √™tre g√©n√©r√©s, √† la fois pour l‚Äôutilisateur et la compatibilit√© pathfinding chaque signal doit conna√Ætre le prochain signal compatible chaque signal doit conna√Ætre les zones qu‚Äôil prot√®ge fournir aux modules de signalisation le minimum d‚Äôinformation n√©cessaire √† leur fonctionnement pouvoir utiliser un module de signalisation sans avoir √† instancier une simulation compl√®te pouvoir avoir des modules qu‚Äôon puisse charger dans un ordre ind√©pendant Pr√©suppos√©s chaque signal physique peut √™tre d√©compos√© en une liste de signaux logiques, qui sont tous associ√©s √† un syst√®me de signalisation les cantons ont un type il est possible de d√©terminer √©tant donn√© le seul signal, ses propri√©t√©s de cantonnement il n‚Äôexiste pas de cantons qui chevauchent une fin ou un d√©but de route les cantons qui ne sont pas couverts par des routes n‚Äôexistent pas ou peuvent √™tre ignor√©s un train n‚Äôutilise qu‚Äôun seul syst√®me de signalisation capable de transmettre la MA √† la fois Design des syst√®mes de signalisation Chaque syst√®me de signalisation a :\nun identifiant unique (une chaine de caract√®res) un ensemble de r√¥les : transmission de la MA transmission des limites de vitesse son type d‚Äô√©tat de signal, qui doit permettre de : savoir s‚Äôil est contraignant √† cause d‚Äôune MA r√©duite d√©terminer une repr√©sentation graphique de ce signal faire r√©agit un train √† ce signal les param√®tres du signal, qui sont utilis√©s √† la fois dans le front pour le configurer et dans le back pour d√©terminer les informations de cantonnement li√©es au signal la condition de cantonnement, qui permet de savoir si un signal d√©limite un canton Il est √† noter que si un syst√®me de signalisation a un double r√¥le transmission de MA et des limites de vitesse, tous les signaux dans ce syst√®me ne sont pas forc√©ment charg√©s de transmettre des informations de limite de vitesse.\n{ # unique identifier for the signaling system \"id\": \"BAL\", \"version\": \"1.0\", # a list of roles the system assumes \"roles\": [\"MA\", \"SPEED_LIMITS\"], # the schema of the dynamic state of signals of this type \"signal_state\": [ {\"kind\": \"enum\", \"field_name\": \"aspect\", values: [\"VL\", \"A\", \"S\", \"C\"]}, {\"kind\": \"flag\", \"field_name\": \"ralen30\"}, {\"kind\": \"flag\", \"field_name\": \"ralen60\"}, {\"kind\": \"flag\", \"field_name\": \"ralen_rappel\"} ], # the schema of the settings signals of this type can read \"signal_settings\": [ {\"kind\": \"flag\", \"field_name\": \"Nf\", \"display_name\": \"Non-franchissable\"}, {\"kind\": \"flag\", \"field_name\": \"has_ralen30\", \"default\": false, \"display_name\": \"Ralen 30\"}, {\"kind\": \"flag\", \"field_name\": \"has_rappel30\", \"default\": false, \"display_name\": \"Rappel 30\"}, {\"kind\": \"flag\", \"field_name\": \"has_ralen60\", \"default\": false, \"display_name\": \"Ralen 60\"}, {\"kind\": \"flag\", \"field_name\": \"has_rappel60\", \"default\": false, \"display_name\": \"Rappel 60\"} ], # these are C-like boolean expressions: # true, false, \u003cflag\u003e, \u003cenum\u003e == value, \u0026\u0026, || and ! can be used # used to evaluate whether a signal is a block boundary. \"block_boundary_when\": \"true\", # used for conflict detection. \"constraining_ma_when\": \"aspect != VL\" } Design des cantons Les cantons ont plusieurs attributs:\nun syst√®me de signalisation qui correspond √† celui affich√© par son premier signal. un chemin, qui repr√©sente les zones prot√©g√©es par le canton, et leur √©tat attendu (au m√™me format que le chemin des routes) un signal d‚Äôentr√©e, (optionnel quand le canton pars d‚Äôun butoir) des signaux interm√©diaires √©ventuels (c‚Äôest utilis√© avec des syst√®mes du style BAPR) un signal de sortie, (optionnel quand le canton se termine √† un butoir) Le chemin est exprim√© de d√©tecteur en d√©tecteur afin de pouvoir faire un rapprochement avec le graphe des routes.\nQuelques remarques:\nil peut y avoir plusieurs syst√®mes de signalisation superpos√©s sur la m√™me infrastructure. le mod√®le pars du principe qu‚Äôun seul syst√®me √† la fois est actif pour la gestion de la MA un canton n‚Äôa pas d‚Äô√©tat: on peut se reposer sur l‚Äô√©tat dynamique des zones qui le compose les signaux utilisent les cantons pour savoir quelles zones sont √† prot√©ger √† un instant donn√© Design des signaux Chaque signal physique est compos√© d‚Äôun ou plusieurs signaux logique, dont les aspects sont combin√©s pour √™tre repr√©sent√©s sur le terrain. Lors de la simulation, les signaux logiques sont trait√©s comme des signaux diff√©rents.\nChaque signal logique est associ√© √† un syst√®me de signalisation, qui d√©finit si le signal transmet Chaque signal logique peut avoir un certain nombre de pilotes. Les\nSignal non charg√© Un signal non charg√© correspond √† l‚Äôobjet capable de transmettre de l‚Äôinformation au train. Les signaux non charg√©s portent :\nun syst√®me de signalisation des param√®tres sp√©cifiques √† leur syst√®me de signalisation (comme Nf et has_ralen30 pour bal) Les signaux non charg√©s sont utilis√©s pour d√©crire statiquement l‚Äôinfrastructure, et sont pens√©s pour √™tre √©dit√©s par l‚Äôutilisateur.\nEn fonction du contexte, diff√©rents m√©canismes peuvent √™tre √† la source de cette information : ce sont des pilotes (drivers). Chaque signal peut porter plusieurs pilotes. Par exemple, un signal BAL qui est √† la fois un d√©part de canton TVM et un d√©part de canton BAL aura deux pilotes: bal-bal et bal-TVM.\n{ # signals must have location data. # this data is omited as its format is irrelevant to how signals behave \"logical_signals\": [ { # the signaling system shown by the signal \"signaling_system\": \"bal\", # the settings for this signal, as defined in the signaling system manifest \"settings\": [\"has_ralen30=true\", \"Nf=true\"], # all the ways the signal can be driven # optional: if not present, we determine the drivers automatically \"drivers\": [ # the signal can react to a following bal signal {\"next_signaling_system\": \"bal\"}, # the signal can react to a following TVM signal {\"next_signaling_system\": \"TVM\"} ] } ] } { # signals must have location data. # this data is omited as its format is irrelevant to how signals behave \"logical_signals\": [ { # the signaling system shown by the signal \"signaling_system\": \"bal\", # the settings for this signal, as defined in the signaling system manifest \"settings\": [\"has_ralen30=true\", \"Nf=true\"], # all the ways the signal can be driven \"drivers\": [ # the signal can react to a following bal signal {\"next_signaling_system\": \"bal\"} ] }, { # the signaling system shown by the signal \"signaling_system\": \"bapr\", # all the ways the signal can be driven \"drivers\": [ # the signal can react to a following bal signal {\"next_signaling_system\": \"bapr\"} ] } ] } Une chaine de charact√®re simplifi√©e de description du type de signal peut √™tre g√©n√©r√©. Ici: bal[Nf=true,ralen30=true]+bapr.\nChargement des param√®tres du signal La premi√®re √©tape du chargement du signal est de charact√©riser le signal dans le syst√®me de signalisation. Cette √©tape produit un objet qui d√©crit le signal.\nLors du chargement du signal :\nle syst√®me de signalisation correspondant au nom fourni est identifi√© les param√®tres du signal sont charg√©s et valid√©s suivant la spec du syst√®me de signalisation le r√¥le de cantonnement du signal est √©valu√© √† partir de l‚Äôexpression Chargement du signal Une fois que les param√®tres du signal sont charg√©s, il devient possible de charger ses pilotes. Pour chaque pilote :\nl‚Äôimpl√©mentation du pilote est identifi√©e √† partir de la paire (signaling_system, next_signaling_system) on v√©rifie que le syst√®me de signalisation sortant du pilote correspond √† celui du signal on v√©rifie qu‚Äôil n‚Äôexiste pas d√©j√† de pilote pour le syst√®me de signalisation entrant du pilote Cette √©tape produit une Map\u003cSignalingSystem, SignalDriver\u003e, o√π le syst√®me de signalisation est celui en entr√©e du signal. Il devient ensuite possible de construire le signal charg√©.\nConstruction des cantons le framework cr√©e des cantons entre les signaux en suivant les routes pr√©sentes dans l‚Äôinfrastructure, et les propri√©t√©s de cantonnement des signaux des v√©rifications sont faites sur le graphe de cantons cr√©√© : il doit toujours pouvoir √™tre possible de choisir un canton pour chaque signal et chaque √©tat de l‚Äôinfrastructure Limites de vitesse Les limites de vitesse sont repr√©sent√©es comme des ranges sur des itin√©raires. Elles commencent leur vie comme des ranges sur des track sections, et sont lift√©es en ranges sur des itin√©raires de la mani√®re suivante :\nLes limites de vitesse directionnelles par track sont remont√©es sur les itin√©raires. La m√™me limite de vitesse peut √™tre sur plusieurs itin√©raires. Pour chaque limite de vitesse, le graphe des itin√©raires est parcouru √† l‚Äôenvers √† la recherche de signaux capable de g√©rer la limite : Seules les limites de vitesse qui ne sont pas pr√©c√©d√©es par une autre limite aux propri√©t√©s identiques sont prises en compte Chaque signal doit signaler son int√©r√™t par rapport √† une limite de vitesse: Pas concern√©, Concern√© mais devant √™tre annonc√© par un autre signal, ou concern√© et terminal. pour chaque limite de vitesse pr√©vue sur le chemin du train, les signaux dans la cha√Æne d‚Äôannonce sont ajout√©s √† la liste de ceux qui seront simul√©s pour le train enum SpeedLimitHandling { /** This signal isn't supposed to announce this limit */ Ignore, /** This signal should announce this limit, but cannot */ Error, /** This signal can announce this limit, and is part of an ongoing chain */ Chain, /** This signal can announce this limit, and ends the chain */ EndChain, } fn handles_speed_limit( self: SignalSettings, speed_limit: SpeedLimit, distance_mm: u64, ) -\u003e SpeedLimitHandling; fn handles_speed_limit_chain( self: SignalSettings, speed_limit: SpeedLimit, chain_signal: Signal, distance_mm: u64, ) -\u003e SpeedLimitHandling; Validation des cantons La validation permet de signaler des configurations invalides en terme de signalisation et de cantonnement. Les cas de figure de validation que l‚Äôon souhaite supporter sont les suivants:\nle syst√®me de signalisation peut vouloir valider, sachant si le canton pars / se termine sur un butoir : la longueur du canton l‚Äôespacement entre les signaux du canton, premier signal exclu chaque signal du canton peut avoir des informations specifiques s‚Äôil est un signal de transition. Par cons√©quent, tout les drivers de signaux participent a la validation. En pratique, il existe deux m√©canismes distincts pour r√©pondre √† ces deux besoins :\nle module de syst√®me de signalisation s‚Äôoccupe de valider la signalisation dans le canton les pilote de signaux, s‚Äôoccupe de valider les transitions entre cantons extern fn report_warning(/* TODO */); extern fn report_error(/* TODO */); struct Block { startsAtBufferStop: bool, stopsAtBufferStop: bool, signalTypes: Vec\u003cSignalingSystemId\u003e, signalSettings: Vec\u003cSignalSettings\u003e, signalPositions: Vec\u003cDistance\u003e, length: Distance, } /// Runs in the signaling system module fn check_block( block: Block, ); /// Runs in the signal driver module fn check_signal( signal: SignalSettings, block: Block, // The partial block downstream of the signal - no signal can see backward ); Cycle de vie des signaux Avant le d√©part d‚Äôun train:\nle chemin d‚Äôun train peut √™tre exprim√© soit en routes soit en cantons. Ces deux chemins doivent √™tre superpos√©s la file de signaux que le train va rencontrer est √©tablie Lors de la simulation :\nau fil du d√©placement du train, les informations d‚Äôoccupation des voies devant lui sont synth√©tis√©es lorsqu‚Äôun train observe un signal, son √©tat est √©valu√© √âvaluation de l‚Äô√©tat des signaux Les signaux sont mod√©lis√©s comme une fonction d‚Äô√©valuation, qui consomme les param√®tres pouvant influencer son comportement, et retourne l‚Äô√©tat actuel du signal.\nLa fonction d‚Äô√©valuation prend en param√®tres, la vue est choisie pour le moment, car plus flexible.\nenum ZoneStatus { /** The zone is clear to be used by the train */ CLEAR, /** The zone is occupied by another train, but otherwise clear to use */ OCCUPIED, /** The zone is incompatible. There may be another train as well */ INCOMPATIBLE, } interface MAView { /** Combined status of the zones protected by the current signal */ val protectedZoneStatus: ZoneStatus val nextSignalState: SignalState val nextSignalSettings: SignalSettings } interface DirectSpeedLimit { /** Distance between the signal and the speed limit */ val distance: Distance val speed: Speed } interface IndirectSpeedLimit { val distanceToNextSignal: Distance val nextSignalState: SignalState val nextSignalSettings: SignalSettings } interface SpeedLimitView { /** A list of speed limits directly downstream of the signal */ val directSpeedLimits: List\u003cDirectSpeedLimit\u003e /** A list of speed limits which need to be announced in a signal chain */ val indirectSpeedLimits: List\u003cIndirectSpeedLimit\u003e } fun signal(maView: MAView?, limitView: SpeedLimitView?): SignalState { // ... } La vue doit permettre d‚Äôacc√©der aux donn√©es suivantes :\nune synth√®se de l‚Äô√©tat des zones en aval jusqu‚Äô√† la MA du train la chaine de cantons l‚Äô√©tat des signaux en aval pr√©sents dans la chaine de cantons du train Chemin de la vue signalisation Le chemin de la vue signalisation est exprim√© en cantons :\ndes cantons peuvent √™tre rajouter pour √©tendre la vue la vue peut √™tre r√©duite en supprimant des cantons Simulation hors chemin du train Il est possible de simuler la signalisation hors du chemin du train :\nsi un signal donne sur des cantons empruntant des chemins diff√©rents, il est simul√© comme s‚Äôil √©tait en bout d‚Äôitin√©raire, et sera donc au carr√© si un signal donne sur des cantons empruntant le m√™me chemin, il est simul√© avec les autres signaux de la suite, dans une vue construite √† cet effet D√©pendances Pour la g√©n√©ration du graphe de cantons :\ngraphe des routes. Pour chaque route : waypoints: List\u003cDiDetector\u003e signals: OrderedMap\u003cPosition, UnloadedSignal\u003e speed_limits: RangeMap\u003cPosition, SpeedLimit\u003e, y compris la logique de limite par categorie de train syst√®mes de signalisation pilotes Pour l‚Äô√©valuation :\nchemin du train en cantons portion du chemin √† √©valuer pilotes √©tat des zones dans la section √† √©valuer Op√©rations instancier une vue cr√©e un cadre dans lequel observer des signaux pr√©voir le chemin signaler √† la vue les cantons qui seront emprunt√©s par le train observer un signal s‚Äôabonner √† l‚Äô√©tat d‚Äôun signal (via la vue) d√©passer un signal signaler qu‚Äôun signal a √©t√© d√©pass√© par le train (via la vue) Annexes Questions de recherche est-ce qu‚Äôil existe des cantons qui chevauchent une fin de route ? non (loic)\nest-ce qu‚Äôil existe des existe des signaux LL(2) ? non en france\nest-ce qu‚Äôil existe des signaux qui changent de comportement en fonction du canton actif devant eux ? oui, pour les ralentissements\nest-ce qu‚Äôil existe des signaux qui sont le d√©part de cantons de types diff√©rents (bal et bapr par exemple) ? OUI LOL, tvm meme\nest-ce que le comportement d‚Äôun signal peut d√©prendre de quel canton est actif apr√®s le signal de fin du canton actuel ? oui, avec les ralentissements ou jaune cli\nest-ce que certains de signalisation ont besoin d‚Äôavoir des informations suppl√©mentaires dans les cantons ? mouais, y‚Äôa des ralentissements, mais c‚Äôest pas sp√©cialement port√© par le canton\nest-il nominal qu‚Äôun train aie plusieurs syst√®mes de signalisation actifs simultan√©ment ? non\nquand et par qui les cantons sont-ils g√©n√©r√©s ?\nquelles sont les donn√©es n√©cessaires √† la g√©n√©ration des cantons ?\n","categories":"","description":"D√©crit la mod√®le de signalisation","excerpt":"D√©crit la mod√®le de signalisation","ref":"/fr/docs/reference/design-docs/signaling/","tags":"","title":"Signalisation"},{"body":" This document is a work in progress\nConflict detection is the process of looking for timetable conflicts. A timetable conflict is any predictable condition which disrupts planned operations. Planned operations can be disrupted if a train is slowed down, prevented from proceeding, or delayed.\nOne of the core features of OSRD is the ability to automatically detect some conflicts:\nspacing conflicts: insufficient spacing between trains sharing the same path routing conflicts: insufficient spacing between trains with intersecting paths Some other kinds of conflicts may be detected later on:\nmaintenance conflicts: planned maintenance disrupts the path of a train power delivery conflicts: combined power delivery requirements exceeds capacity Conflict detection relies on interlocking and signaling modeling and simulation to:\nfigure out what each actor requires to perform its duty undisturbed detect conflicting requirements Design constraints The primary design goals are as follows:\nenable threading new train paths into an existing timetable (see STDCM) produce conflicts which can be linked back to a root cause operate in way that can be visualized and interpreted scale to real world timetables: millions of yearly trains, tens of thousands of daily trains In addition to these goals, the following constraints apply:\nit must be possible to thread new train paths into timetables with existing conflicts it must not cause false-negatives: if no conflicts are detected, a multi-train simulation of the same timetable must not yield any slowdowns it cannot rely on data we do not have it has to enable later support of mobile block systems it has to rely on existing signaling and interlocking simulation it has to enable detecting conflicts regardless of the signaling system in use it has to support transitions between signaling systems it has to support conflicts between different signaling systems Conflict modeling Actors are objects which cause resources to be used:\ntrain paths (or someone / something on the behalf of the train) maintenance work Actors need resources to be available to proceed, such as:\nzones, which have one state per way to traverse it switches, which have one state per position station platforms, which could be used to prevent two large trains from occupying both sides of a tiny platform Actor emit resource requirements, which:\ndescribe the need of an actor for a resource, for a given time span describe what the resource is needed for detail how the resource is used, such as switch position, zone entry and exit Resource requirements can turn out to be either satisfied or conflicting with other requirements, depending on compatibility rules.\nCompatibility rules differ by requirement purpose and resource type. For example:\nspacing requirements are exclusive: simultaneous requirements for the same resource are conflicting zone and switch requirements are shareable: simultaneous requirements are satisfied if the resource configuration is identical For conflict detection to work, resource requirements have to be at least as extensive as what‚Äôs required to guarantee that a train path will not be disturbed.\nRouting conflicts Context For trains to proceed safely along their planned path:\nswitches have to be moved in the appropriate position level crossings have to activate risks of collision with other trains have to be mitigated In practice, the path of trains is partitioned into routes, which when set, ensure a train can safely follow the route.\nRoutes have the following lifestyle:\nAs a train approaches the start of one of its routes, it is called by an operator. If all resources required to safely use the route are available, switches and level crossings start to move. If a resources is not available, e.g. because another train has reserved a section of track, this process is delayed until all conditions are met. Once all resources are configured and reserved, the route is set and ready to be followed. Before that point, the entry of the route was protected by signaling, which prevented the train from moving past the entry point. As the train moves along the route, it is destroyed. When the tail of the trail releases key detectors along the route, resources before this detector are released, and can this be reserved by other routes. For a train to proceed through a route unimpeded, the following things have to happen:\nThe route has to be set before the train arrives, and before it is slowed down by signaling. The route has to be called, so that is it set in time. All resources required for the route to start setting at call time have to be available. Generating requirements struct RouteRequirement { route: RouteId, set_deadline: Time, zone_requirements: Vec\u003cRouteZoneRequirement\u003e, } struct RouteZoneRequirement { zone: ZoneId, entry_det: DirDetectorId, exit_det: DirDetectorId, release_time: Time, switches: Map\u003cSwitchId, SwitchConfigId\u003e, } Routing requirements are generated by the following algorithm:\nCompute the set deadline using signaling simulation. The set deadline is the point in time at which the train would be slowed down if the route were not set. For each zone in each route, simulate when it would be released, and thus not required anymore. Route overlaps are not yet supported.\nRequirement compatibility rules Requirement compatibility is evaluated for all RouteZoneRequirements, grouped by zone. Requirements A and B, ordered such that A.set_deadline \u003c= B.set_deadline, are compatible if and only if either:\ntheir active time span does not overlap, such that A.release_time \u003c= (B.set_deadline - activation_time), where the activation time is the delay required to reconfigure from A.switches to B.switches. (A.entry_det, A.exit_det, A.switches) == (B.entry_det, B.exit_det, B.switches) Spacing conflicts Context Even if interlocking mitigates some of the risks associated with operating trains, a major one is left out: head to tail collisions, caused by insufficient spacing.\nThis responsibility is handled by signaling, which conveys both interlocking and spacing constraints.\nSignaling helps trains slow down until the end of their movement authority, which is either:\nbehind the tail of the next train at the end of the last route set for this train Spacing requirements are emitted for zones which if occupied, would cause a slowdown, and zones occupied by the train\nGenerating requirements struct SpacingRequirement { zone: ZoneId, begin_time: Time, end_time: Time, } Every time the driver sees a signal, generate updated spacing requirements by calculating which zones, if occupied, would trigger a slowdown:\nstart by assuming the zone just after the head of the train is occupied until the train is not slowed down, move the occupied section one zone further away from the train Requirement compatibility rules Requirement compatibility is evaluated for all SpacingRequirements, grouped by zone.\nRequirements A and B are compatible if and only if their [begin_time, end_time] ranges do not overlap.\nIncremental requirement generation Routing requirements sequenceDiagram participant client as Client participant gen as Routing resource generator client -\u003e\u003e gen: initial path + train movement loop gen -\u003e\u003e client: prefix path extension needed client -\u003e\u003e gen: extra prefix path + train movement end gen -\u003e\u003e client: resource requirements After an initial path is given, the requirement generator can ask for more prefix path (before the start of the route). The client responds with:\nthe extra prefix path the movement of the train over time on the given prefix path If the initial path has multiple routes, the last route is the one resource requirements are emitted for.\nSpacing requirements sequenceDiagram participant client as Client participant gen as Spacing resource generator client -\u003e\u003e gen: initial path + train movement loop gen -\u003e\u003e client: postfix path extension needed client -\u003e\u003e gen: extra postfix path end gen -\u003e\u003e client: resource requirements After an initial path is given, the requirement generator can ask for more postfix path (before the start of the route).\nVisualizing requirements Full-page requirements diagram\n","categories":"","description":"Detect unrealistic timetables","excerpt":"Detect unrealistic timetables","ref":"/en/docs/reference/design-docs/conflict-detection/","tags":"","title":"Conflict detection"},{"body":" The purpose of allowances As explained in the calcul du Max Effort Profile, the basic running time represents the most stretched run normally achievable, i.e. the fastest possible run of the given equipment on the given route. The train accelerates to the maximum, travels as fast as possible according to the different speed limits and driving capabilities, and brakes to the maximum.\nThis basic run has a major disadvantage: if a train leaves 10 minutes late, it will arrive at best 10 minutes late, because by definition it is impossible for it to run faster than the basic run. Therefore, trains are scheduled with one or more allowances added. The allowances are a relaxation of the train‚Äôs route, an addition of time to the scheduled timetable, which inevitably results in a lowering of running speeds.\nA train running in basic gear is unable to catch up!\nAllowances types There are two types of allowances:\nThe regularity allowance: this is the additional time added to the basic running time to take account of the inaccuracy of speed measurement, to compensate for the consequences of external incidents that disrupt the theoretical run of trains, and to maintain the regularity of the traffic. The regularity allowance applies to the whole route, although its value may change at certain intervals. The construction allowance: this is the time added/removed on a specific interval, in addition to the regularity allowance, but this time for operational reasons (dodging another train, clearing a track more quickly, etc.) A basic running time with an added allowance of regularity gives what is known as a standard walk.\nAllowance distribution Since the addition of allowance results in lower speeds along the route, there are a number of possible routes. Indeed, there are an infinite number of solutions that result in the same journey time.\nAs a simple example, in order to reduce the running time of a train by 10% of its journey time, it is possible to extend any stop by the time equivalent to this 10%, just as it is possible to run at 1/1.1 = 90.9% of the train‚Äôs capacity over the entire route, or to run slower, but only at high speeds‚Ä¶\nThere are currently two algorithms for margin distribution in OSRD: linear and economic.\nLinear distribution Linear allowance distribution is simply lowering the speeds by the same factor over the area where the user applies the allowance. Here is an example of its application:\nThe advantage of this distribution is that the allowance is spread evenly over the entire journey. A train that is late on 30% of its journey will have 70% of its allowance for the remaining 70% of its journey.\nEconomic distribution The economic distribution of the allowance, presented in detail in this document (MARECO is an algorithm designed by the SNCF research department), consists of distributing the allowance in the most energy-efficient way possible. It is based on two principles:\na maximum speed, avoiding the most energy-intensive speeds run-on zones, located before braking and steep gradients, where the train runs with the engine off thanks to its inertia, allowing it to consume no energy during this period An example of economic walking. Above, the gradients/ramps encountered by the train. The areas of travel on the track are shown in blue.\n","categories":"","description":"","excerpt":" The purpose of allowances As explained in the calcul du Max Effort ‚Ä¶","ref":"/en/docs/explanation/running_time_calculation/allowances/","tags":"","title":"Allowances"},{"body":" La raison d‚Äô√™tre des marges Comme expliqu√© dans le calcul du Max Effort Profile, la marche de base repr√©sente la marche la plus tendue normalement r√©alisable, c‚Äôest-√†-dire le trajet le plus rapide possible du mat√©riel donn√© sur le parcours donn√©. Le train acc√©l√®re au maximum, roule aussi vite que possible en fonction des diff√©rentes limites de vitesse et de ses capacit√©s motrices, et freine au maximum.\nCette marche de base pr√©sente un inconv√©nient majeur : si un train part avec 10min de retard, il arrivera au mieux avec 10min de retard, car par d√©finition il lui est impossible de rouler plus vite que la marche de base. Par cons√©quent, les trains sont programm√©s avec un ajout d‚Äôune ou de plusieurs marges. Les marges sont une d√©tente du trajet du train, un ajout de temps √† l‚Äôhoraire pr√©vu, qui se traduit in√©vitablement par un abaissement des vitesses de circulation.\nUn train circulant en marche de base est incapable de rattraper son retard !\nLe type de marge On distingue deux types de marges :\nLa marge de r√©gularit√© : il s‚Äôagit du temps compl√©mentaire ajout√© √† la marche de base pour tenir compte de l‚Äôimpr√©cision de la mesure de la vitesse, pour pallier les cons√©quences des incidents ext√©rieurs venant perturber la marche th√©orique des trains, et pour maintenir la r√©gularit√© de la circulation. La marge de r√©gularit√© s‚Äôapplique sur l‚Äôensemble du trajet, bien que sa valeur puisse changer sur certains intervalles. La marge de construction : il s‚Äôagit du temps ajout√© / retir√© sur un intervalle sp√©cifique, en plus de la marge de r√©gularit√©, mais cette fois pour des raisons op√©rationnelles (esquiver un autre train, lib√©rer une voie plus rapidement, etc.) Une marche de base √† laquelle on vient ajouter une marge de r√©gularit√© donne ce que l‚Äôon appelle une marche type.\nLa distribution de la marge L‚Äôajout de marge se traduisant par un abaissement des vitesses le long du trajet, plusieurs marches types sont possibles. En effet, il existe une infinit√© de solutions aboutissant au m√™me temps de parcours.\nEn guise d‚Äôexemple simple, pour d√©tendre la marche d‚Äôun train de 10% de son temps de parcours, il est possible de prolonger n‚Äôimporte quel arr√™t de l‚Äô√©quivalent en temps de ces 10%, tout comme il est possible de rouler √† 1/1,1 = 90,9% des capacit√©s du train sur l‚Äôensemble du parcours, ou encore de rouler moins vite, mais seulement aux vitesses √©lev√©es‚Ä¶\nIl y a pour l‚Äôinstant deux algorithmes de distribution de la marge dans OSRD : lin√©aire et √©conomique.\nLa distribution lin√©aire La distribution de marge lin√©aire consiste simplement √† abaisser les vitesses d‚Äôun m√™me facteur sur la zone o√π l‚Äôutilisateur applique la marge. En voici un exemple d‚Äôapplication :\nCette distribution a pour avantage de r√©partir la marge de la m√™me mani√®re sur tout le trajet. Un train prenant du retard √† 30% de son trajet disposera de 70% de sa marge pour les 70% de trajets restants.\nLa distribution √©conomique La distribution √©conomique de la marge, pr√©sent√©e en d√©tail dans ce document (MARECO est un algorithme con√ßu par la direction de la recherche SNCF), consiste √† r√©partir la marge de la mani√®re la plus √©conome possible en √©nergie. Elle est bas√©e sur deux principes :\nune vitesse plafond, √©vitant les vitesses les plus consommatrices en √©nergie des zones de marche sur l‚Äôerre, situ√©es avant les freinages et les fortes pentes, o√π le train circule √† moteur coup√© gr√¢ce √† son inertie, permettant de ne consommer aucune √©nergie pendant ce laps de temps Un exemple de marche √©conomique. En haut, les pentes/rampes rencontr√©es par le train. Les zones de marche sur l‚Äôerre sont repr√©sent√©es en bleu.\n","categories":"","description":"","excerpt":" La raison d‚Äô√™tre des marges Comme expliqu√© dans le calcul du Max ‚Ä¶","ref":"/fr/docs/explanation/running_time_calculation/allowances/","tags":"","title":"Les marges"},{"body":"Une des fonctionnalit√©s qui doit √™tre support√©e par STDCM est la marge de r√©gularit√©. L‚Äôutilisateur doit pouvoir indiquer une valeur de marge, exprim√©e en fonction de la distance ou du temps de parcours, et cette marge doit √™tre ajout√©e au trajet.\nPar exemple : l‚Äôutilisateur peut indiquer une marge de 5 minutes au 100km. Sur un trajet de 42km, un trajet de 10 minutes au plus rapide doit maintenant durer 12 minutes et 6 secondes.\nLe probl√®me se situe au niveau de la d√©tection de conflits. En effet, ralentir le train d√©cale l‚Äôensemble du sillon dans le temps et augmente la capacit√© consomm√©e. La marge doit donc √™tre prise en compte pendant l‚Äôexploration pour d√©tecter correctement les conflits.\nPour plus de difficult√©, la marge doit suivre le mod√®le MARECO. La marge n‚Äôest pas r√©partie uniform√©ment sur le trajet, mais selon un calcul qui n√©cessite de conna√Ætre l‚Äôensemble du trajet.\nMarge lin√©aire exprim√©e en fonction du temps de parcours Pour commencer, le probl√®me est r√©solu avec une marge lin√©aire, c‚Äôest-√†-dire r√©partie uniform√©ment sur le parcours du train. La vitesse est simplement multipli√©e par un facteur constant.\nLes enveloppes. calcul√©es pendant l‚Äôexploration du graphe ne sont pas modifi√©es, celles-ci sont toujours √† vitesse maximale. Mais elles sont accompagn√©es du facteur de vitesse, qui est utilis√© pour calculer les temps de parcours et les conflits.\nC‚Äôest seulement quand le chemin est trouv√© que la marge est appliqu√©e √† l‚Äôenveloppe finale. Parce qu‚Äôil s‚Äôagit uniquement de multiplication par un facteur, les conflits ne peuvent pas appara√Ætre ici.\nMarge lin√©aire exprim√©e en fonction de la distance Le principe ici est g√©n√©ralement similaire, mais avec une difficult√© suppl√©mentaire : le facteur n‚Äôest pas constant au long du trajet. En effet, un train roulant √† faible vitesse parcours moins de distance dans un m√™me intervalle de temps qu‚Äôun train √† pleine vitesse. La vitesse est r√©duite d‚Äôun facteur plus faible quand le train roule moins vite.\nComme le train ne roule pas √† vitesse constante pendant son trajet, le facteur de vitesse √©volue d‚Äôune ar√™te √† l‚Äôautre. Cela provoque des courbes de vitesse irr√©guli√®res.\nMarge mareco Il s‚Äôagit ici exclusivement d‚Äôun post-traitement, car il est impossible de calculer une courbe mareco sans conna√Ætre l‚Äôint√©gralit√© du trajet. La d√©tection de conflit pendant l‚Äôexploration se base exclusivement sur la courbe avec une marge lin√©aire.\nCela implique que des conflits peuvent appara√Ætre pendant cette √©tape. Pour les √©viter, la proc√©dure suivante est appliqu√©e :\nUne marge est appliqu√©e √† la courbe sur l‚Äôensemble du trajet avec l‚Äôalgorithme mareco Le premier conflit provoqu√© par le changement est recherch√© S‚Äôil existe, l‚Äôapplication de mareco sera s√©par√©e en deux intervalles. Le point √† la position du conflit est alors fix√© dans l‚Äôespace-temps par rapport √† la courbe avec une marge lin√©aire, qui elle ne g√©n√®re pas de conflit. Le proc√©d√© est r√©p√©t√© it√©rativement jusqu‚Äô√† une absence de conflit. ","categories":"","description":"","excerpt":"Une des fonctionnalit√©s qui doit √™tre support√©e par STDCM est la marge ‚Ä¶","ref":"/fr/docs/reference/design-docs/stdcm/pathfinding_module/standard_allowance/","tags":"","title":"Marge de r√©gularit√©"},{"body":"The STDCM module must be usable with standard allowances. The user can set an allowance value, expressed either as a function of the running time or the travelled distance. This time must be added to the running time, so that it arrives later compared to its fastest possible running time.\nFor example: the user can set a margin of 5 minutes per 100km. On a 42km long path that would take 10 minutes at best, the train should arrive 12 minutes and 6 seconds after leaving.\nThis can cause problems to detect conflicts, as an allowance would move the end of the train slot to a later time. The allowance must be considered when we compute conflicts as the graph is explored.\nThe allowance must also follow the MARECO model: the extra time isn‚Äôt added evenly over the whole path, it is computed in a way that requires knowing the whole path. This is done to optimize the energy used by the train.\nLinear margin expressed as a function of time As a first step, the problem is solved with a linear margin, i.e. added evenly over the whole path. The speed is simply modified by a constant factor.\nThe envelopes. computed during the graph traversal are not modified, they are always at maximum speed. But they are paired with a speed factor, which is used to compute running time and to evaluate conflicts.\nThe final envelope, with the allowance, is only computed once a path is found.\nLinear margin expressed as a function of distance The principle is generally the same, but with an extra difficulty: the speed factor isn‚Äôt constant over the path. When a train goes faster, it travels more distance in the same time, which increases the allowance time and the speed factor.\nBecause the train speed changes over the path, the speed factor changes from one edge to another. This causes irregular speed curves.\nMARECO Allowances This is exclusively a post-processing step, because it isn‚Äôt possible to compute the MARECO envelope without knowing the full train path. When looking for a path, linear allowances are used.\nThis means that conflicts may appear at this step. To avoid them, the following procedure is applied:\nA mareco allowance is applied over the whole path. If there are conflict, the first one is considered. The mareco allowance is split in two intervals. The point where the first conflict appeared is set to be at the same time as the envelope with a linear allowance, removing the conflict at this point. This process is repeated iteratively until no conflict is found. ","categories":"","description":"","excerpt":"The STDCM module must be usable with standard allowances. The user can ‚Ä¶","ref":"/en/docs/reference/design-docs/stdcm/pathfinding_module/standard_allowance/","tags":"","title":"Standard allowance"},{"body":" ","categories":"","description":"Comment faire des retours constructifs","excerpt":"Comment faire des retours constructifs","ref":"/fr/docs/guides/contribute/code-reviews/","tags":"","title":"Passer du code en revue"},{"body":"OSRD permet d‚Äôajouter un nouveau train dans une grille horaire d√©j√† √©tablie, sans g√©n√©rer aucun conflit avec les autres trains. L‚Äôapplication directe de cette fonctionnalit√© est appel√©e la recherche de sillon de derni√®re minute.\nL‚Äôacronyme STDCM (Short Term Digital Capacity Management) est utilis√© pour parler du concept en g√©n√©ral.\n","categories":"","description":"","excerpt":"OSRD permet d‚Äôajouter un nouveau train dans une grille horaire d√©j√† ‚Ä¶","ref":"/fr/docs/reference/design-docs/stdcm/","tags":"","title":"Recherche de sillons de derni√®re minute (STDCM)"},{"body":" ","categories":"","description":"How to give useful feedback","excerpt":"How to give useful feedback","ref":"/en/docs/guides/contribute/code-reviews/","tags":"","title":"Review code"},{"body":"OSRD can be used to find a slot for a train in an already established timetable, without causing conflicts with other trains.\nThe acronym STDCM (Short Term Digital Capacity Management) is used to describe this concept in general.\n","categories":"","description":"","excerpt":"OSRD can be used to find a slot for a train in an already established ‚Ä¶","ref":"/en/docs/reference/design-docs/stdcm/","tags":"","title":"Search for last-minute train slots (STDCM)"},{"body":" Cette page est une √©bauche, contribuez-y! D√©finition La couche d‚Äôordonnancement a pour responsabilit√© d‚Äô√©tablir l‚Äôordre de commande des itin√©raires, et par cons√©quent, l‚Äôordre de passage des trains. La m√©thode exacte utilis√©e pour prendre cette d√©cision n‚Äôimporte pas, du moment qu‚Äôelle garanti que la simulation se termine (elle ne doit pas amener de trains en nez-√†-nez, ou cr√©er d‚Äôautre cas de figure de blocage).\nIl est possible d‚Äôimpl√©menter un module d‚Äôordonnancement via des tableaux d‚Äôordre de succession des trains aux aiguilles.\nExigences de conception Il doit √™tre possible de connecter n‚Äôimporte quel algorithme d‚Äôordonnancement Le module d‚Äôordonnancement doit approuver les commandes de routes. Op√©rations train: Des itin√©raires sont command√©s pour chaque trains, aussi loin et aussi t√¥t que possible. L‚Äôapprobation de la commande est soumise au r√©gulateur, qui peut la retarder ind√©finiment, selon des crit√®res de son choix. ","categories":"","description":"D√©cide de l'ordre de formation des itin√©raires","excerpt":"D√©cide de l'ordre de formation des itin√©raires","ref":"/fr/docs/reference/design-docs/interlocking/ordering/","tags":"","title":"Ordonnancement"},{"body":"Cette page pr√©cise certains d√©tails d‚Äôimpl√©mentation. Sa lecture n‚Äôest pas n√©cessaire pour comprendre les principes g√©n√©raux, mais peut aider avant de se plonger dans le code.\nSTDCMEdgeBuilder Cette classe est utilis√©e pour simplifier la cr√©ation d‚Äôinstances de STDCMEdge, les ar√™tes du graphe. Celles-ci contiennent de nombreux attributs, la plupart pouvant √™tre d√©termin√©s en fonction du contexte (comme le n≈ìud pr√©c√©dent). La classe STDCMEdgeBuilder permet de rendre certains attributs optionnels et en calcule d‚Äôautres.\nUne fois instanci√© et param√©tr√©, un EdgeBuilder a deux m√©thodes :\nCollection\u003cSTDCMEdge\u003e makeAllEdges() permet de cr√©er toutes les ar√™tes possibles dans le contexte donn√© pour une route donn√©e. S‚Äôil y a plusieurs ‚Äúouvertures‚Äù entre des blocks d‚Äôoccupation, une ar√™te est cr√©√©e par ouverture. Tous les conflits, leurs √©vitements et les attributs associ√©s sont d√©termin√©s ici.\nSTDCMEdge findEdgeSameNextOccupancy(double timeNextOccupancy) : Cette m√©thode permet d‚Äôobtenir l‚Äôar√™te passant par une certaine ‚Äúouverture‚Äù (quand elle existe), identifi√©e ici par le temps de la prochaine occupation sur la route. Elle est utilis√©e √† chaque fois qu‚Äôune ar√™te doit √™tre re-cr√©√©e dans un contexte diff√©rent, comme pour appliquer une marge ou corriger une discontinuit√©. Elle appelle la m√©thode pr√©c√©dente.\nRecherche de chemin Evaluation des distances La fonction utilis√©e pour d√©terminer la distance (au sens de la recherche de chemin) d√©termine quel chemin sera privil√©gi√©. Le chemin obtenu sera toujours le plus court en fonction du crit√®re donn√©.\nIci, deux param√®tres sont utilis√©s : le temps de parcours total et l‚Äôheure de d√©part. Le second a un poids tr√®s faible par rapport au premier, pour s√©lectionner en priorit√© le chemin le plus rapide. Les d√©tails du calcul sont indiqu√©s dans les commentaires des m√©thodes concern√©es.\nHeuristiques L‚Äôalgorithme de recherche de chemin dans le graphe est un A*, avec une heuristique bas√©e sur les coordonn√©es g√©ographiques.\nCependant, la g√©om√©trie des infrastructures g√©n√©r√©es sont arbitraires, elle ne correspond pas aux distances indiqu√©es sur les voies. Il est donc possible que, sur ces infrastructures, les chemins obtenus ne soient pas les plus courts.\nIl est en th√©orie possible d‚Äôutiliser cette heuristique pour d√©terminer si le chemin en cours d‚Äôexploration pourra mener √† une solution dont le temps de parcours ne d√©passe pas le maximum. Mais pour la m√™me raison, ajouter ce crit√®re rend STDCM inutilisable sur les infrastructures g√©n√©r√©es. Plus de d√©tails dans cette issue.\n","categories":"","description":"","excerpt":"Cette page pr√©cise certains d√©tails d‚Äôimpl√©mentation. Sa lecture n‚Äôest ‚Ä¶","ref":"/fr/docs/reference/design-docs/stdcm/pathfinding_module/implementation_details/","tags":"","title":"D√©tails d'impl√©mentation"},{"body":"This page is about implementation details. It isn‚Äôt necessary to understand general principles, but it helps before reading the code.\nSTDCMEdgeBuilder This refers to this class in the project.\nThis class is used to make it easier to create instances of STDCMEdge, the graph edges. Those contain many attributes, most of which can be determined from the context (e.g. the previous node). The STDCMEdgeBuilder class makes some parameters optional and automatically computes others.\nOnce instantiated and parametrized, an STDCMEdgeBuilder has two methods:\nCollection\u003cSTDCMEdge\u003e makeAllEdges() can be used to create all the possible edges in the given context for a given route. If there are several ‚Äúopenings‚Äù between occupancy blocks, one edge is instantiated for each opening. Every conflict, their avoidance, and their related attributes are handled here.\nSTDCMEdge findEdgeSameNextOccupancy(double timeNextOccupancy): This method is used to get the specific edges that uses a certain opening (when it exists), identified here with the time of the next occupancy block. It is called whenever a new edge must be re-created to replace an old one. It calls the previous method.\nPathfinding The methods mentioned here are defined in this class.\nCost function The function used to define pathfinding cost sets which path is used over another. The result is always the one that minimizes this cost (as long as the heuristic is admissible).\nHere, two parameters are used: total run time and departure time. The latter has a very small weight compared to the former, so that the fastest path is found. More details are explained in the documentation of those methods.\nHeuristics The algorithm used to find a path is an A*, with a heuristic based on geographical coordinates.\nHowever, the coordinates of generated infrastructures are arbitrary and don‚Äôt reflect the track distance. It means that, for the generated infrastructures, the path may not always be the shortest one.\nIt would be possible to use this heuristic to determine whether the current node can lead to a path that doesn‚Äôt take longer than the maximum allowed total run time. But for the same reason, adding this feature would break any STDCM test on generated infras. More details in this issue.\n","categories":"","description":"","excerpt":"This page is about implementation details. It isn‚Äôt necessary to ‚Ä¶","ref":"/en/docs/reference/design-docs/stdcm/pathfinding_module/implementation_details/","tags":"","title":"Implementation details"},{"body":"","categories":"","description":"Programming interfaces specifications","excerpt":"Programming interfaces specifications","ref":"/en/docs/reference/apis/","tags":"","title":"APIs"},{"body":"","categories":"","description":"Sp√©cification des interfaces de programmation","excerpt":"Sp√©cification des interfaces de programmation","ref":"/fr/docs/reference/apis/","tags":"","title":"APIs"},{"body":"\nLe projet a pour ambition de r√©pondre √† une large gamme de besoins autour de la planification ferroviaire :\nconception des plans de transport √©tudes d‚Äôexploitation gestion d‚Äôinfrastructure production de sillons de derni√®re minute Conception des plans de transport La conception de plans de transport consiste √† formuler une r√©ponse1 aux sch√©mas de dessertes2. OSRD fournit d√©j√† un certain nombre de fonctionnalit√©s utiles √† cette fin :\nbase d‚Äôinfrastructure ferroviaire √† la voie base de donn√©es de mat√©riel roulant possibilit√© de modifier l‚Äôinfrastructure visualisation de grilles horaires application de diff√©rents types de marges sur les sillons, y compris une marge √©conomique, qui minimise l‚Äô√©nergie consomm√©e Les perspectives futures comprennent notamment :\nla d√©tection automatique de conflits3 synth√®se d‚Äôinfrastructure √† la ligne √† partir d‚Äôinfrastructure √† la voie visualisation sch√©matique du plan de transport module d‚Äôoptimisation de la capacit√© en ligne, d‚Äôoccupation de la voie en gare et de roulement mat√©riel √âtudes d‚Äôexploitation Les √©tudes d‚Äôexploitation permettent d‚Äô√©valuer la capacit√© de l‚Äôinfrastructure √† r√©pondre √† la demande et de la mettre en coh√©rence avec les besoins de transport. Elles permettent de prendre des d√©cisions d‚Äôinvestissements d‚Äôinfrastructure publique √©clair√©es.\nOSRD permet de r√©pondre √† ce besoin en :\nfournissant une base d‚Äôinfrastructure ferroviaires √† la voie fournissant une base de donn√©es de mat√©riel roulant donnant la possibilit√© de modifier l‚Äôinfrastructure existante et ajouter des installations permettant de visualiser les grilles horaires permettant d‚Äôappliquer diff√©rents types de marges sur les sillons, dont une r√©partition √©conomique, qui minimise l‚Äô√©nergie consomm√©e. fournissant un simulateur de signalisation Les perspectives futures comprennent notamment :\nd√©tection de conflits3 √©valuation de la robustesse d‚Äôune grille horaire via un module de simulation stochastique calcul automatique de d√©bit et capacit√© Gestion d‚Äôinfrastructure Le traitement d‚Äôinformations li√©es √† l‚Äôinfrastructure ferroviaire √©tant un besoin commun √† toutes les fonctionnalit√©s d‚ÄôOSRD, un module d√©di√© permet de :\nvisualiser sur une carte les diff√©rents types d‚Äôobjets utilisables dans l‚Äôapplication √©diter l‚Äôinfrastructure ferroviaire rechercher des objets importer de nouvelles infrastructures4 Sillons de derni√®re minute Si une grande partie des sillons5 sont √©tablis longtemps √† l‚Äôavance, une proportion grandissante ne sont command√©s que tr√®s peu de temps avant le d√©part souhait√© du train, notament avec le d√©veloppement du fret.\nIl faut par cons√©quent √™tre capable de r√©pondre non seulement rapidement (moins de 3 minutes) √† ces demandes, mais aussi correctement, ce qui n‚Äôest pas possible sans automatisation.\nUne offre de sillon correcte doit r√©pondre √† de nombreux crit√®res, notamment :\nprendre en compte les travaux sur l‚Äôinfrastructure ne pas g√©n√©rer de conflits3 avec des sillons d√©j√† √©tablis, y compris en gare estimer de mani√®re r√©aliste le comportement du train, et donc le moment auquel le train atteint ou quitte des endroits critiques Si certains outils automatis√©s sont capables de fournir des r√©ponses aux demandes de sillons de derni√®re minute, aucun ne prend encore en compte tous ces crit√®res, en particulier la gestion des conflits3 en gare.\nCet outil est en cours de d√©veloppement, et devrait √™tre disponible dans les ann√©es √† venir.\nSous forme de plan d‚Äôexploitation¬†‚Ü©Ô∏é\nUn sch√©ma de desserte est une demande d‚Äôoffre de transport, qui comprend:\nla repr√©sentation des trains demand√©s leur itin√©raire les arr√™ts √† desservir ¬†‚Ü©Ô∏é Un conflit se produit lorsque la circulation d‚Äôun train en g√™ne un autre¬†‚Ü©Ô∏é¬†‚Ü©Ô∏é¬†‚Ü©Ô∏é¬†‚Ü©Ô∏é\nRailJSON est le format de fichier d‚Äôinfrastructure utilis√© par OSRD. Il est libre, document√©, con√ßu pour √™tre agnostique au gestionnaire d‚Äôinfrastructure, facile √† g√©n√©rer et manipuler.¬†‚Ü©Ô∏é\nUn sillon est un droit de passage sur le r√©seau ferroviaire, inscrit dans l‚Äôespace et dans le temps. Il est vendu par un gestionnaire d‚Äôinfrastructure (GI) √† une entreprise ferroviaire (EF).¬†‚Ü©Ô∏é\n","categories":"","description":"Applications et axes directeurs","excerpt":"Applications et axes directeurs","ref":"/fr/about/use-case/","tags":"","title":"Cas d'utilisation"},{"body":"This wiki is meant to help software engineers have a deep understanding of railway systems.\nIt can only happen if content is added as needed. If something is missing, contribute!\n","categories":"","description":"International railway wiki","excerpt":"International railway wiki","ref":"/en/docs/railway-wiki/","tags":"","title":"Railway Wiki"},{"body":"\nOSRD is meant to fulfill a range of use-cases related to railway planning:\ntimetabling operation studies infrastructure management short term capacity management Timetabling Timetabling is about designing a transport service in order to meet the transit needs.\nOSRD addresses this by providing:\na track level railway infrastructure database a rolling stock database an infrastructure edition tool a timetabling tool train path allowances, including an allowance distribution which minimizes energy use Planned features include:\nautomated conflict detection1 line level infrastructure synthesis from track level infrastructure interactive timetable diagrams a throughput and rolling stock turnover optimizer Operation studies Operation studies assess the ability of infrastructures to meet demand, and balance infrastructure capacity with transportation needs. They enable informed public infrastructure investment decisions.\nOSRD addresses this need by providing:\na track level railway infrastructure database a rolling stock database an infrastructure edition tool a timetabling tool train path allowances, including an allowance distribution which minimizes energy use a signaling simulator Planned features include:\nautomated conflict detection1 automated timetable robustness assessment using stochastic simulation automated throughput analyzer Infrastructure management Processing railway infrastructure data is a requirement shared by all of OSRD‚Äôs features. Therefore, a dedicated module provides:\na customizable infrastructure map an infrastructure editor a search feature an import tool2 Short term capacity management Even though most train paths3 are allocated years before operations, a growing part is allocated shortly before the planned departure time. This change is largely due to growing demand for rail freight.\nThere is therefore a need for timely (less than 3 minutes) and correct answers, which cannot be achieved without automation.\nA correct train path must, among other things:\ntake planned infrastructure work into account avoid generating conflicts1 with planned trains, including inside stations realistically estimate train behavior, and thus when the train reaches or leaves critical locations Even though some tools can currently provide answers, none currently takes all of the above into account, especially station conflicts.\nThis tool is undergoing active development, and should be available within the coming years.\nA conflicts occurs when the movement of a train interferes with another¬†‚Ü©Ô∏é¬†‚Ü©Ô∏é¬†‚Ü©Ô∏é\nOSRD uses the RailJSON rail infrastructure file format. It is a free and documented format, designed to be infrastructure manager-agnostic, easy to generate and use.¬†‚Ü©Ô∏é\nA train paths is a right of way on the rail network, bounded in time and space. Train paths are sold by infrastructure managers to railway companies.¬†‚Ü©Ô∏é\n","categories":"","description":"Use cases related to rail transport planning","excerpt":"Use cases related to rail transport planning","ref":"/en/about/use-case/","tags":"","title":"Use cases"},{"body":"Ce wiki a pour objectif de rendre accessible aux d√©veloppeurs des informations sur le monde ferroviaire.\nCela ne peut se produire que si le contenu est ajout√© lorsque n√©cessaire. Si quelque chose manque, contribuez !\n","categories":"","description":"Wiki ferroviaire international","excerpt":"Wiki ferroviaire international","ref":"/fr/docs/railway-wiki/","tags":"","title":"Wiki Ferroviaire"},{"body":" Infrastructure Rolling Stock ","categories":"","description":"","excerpt":" Infrastructure Rolling Stock ","ref":"/en/docs/reference/apis/json_schema/","tags":"","title":"JSON Schemas"},{"body":" Infrastructure Rolling Stock ","categories":"","description":"","excerpt":" Infrastructure Rolling Stock ","ref":"/fr/docs/reference/apis/json_schema/","tags":"","title":"JSON Schemas"},{"body":"Description Les contraintes sur ce qu‚Äôest un train sont relativement faibles. Il doit seulement avoir un identifiant, qui permet aux autres syst√®mes de garder des r√©f√©rences vers des trains.\nExigences de conception Les trains occupent les zones. Les trains doivent √™tre suivis pour pr√©server leur ordre de passage. Les trains ont pour responsabilit√© de demander les itin√©raires devant eux. ","categories":"","description":"Repr√©sente un train dans la simulation","excerpt":"Repr√©sente un train dans la simulation","ref":"/fr/docs/reference/design-docs/interlocking/train/","tags":"","title":"Train"},{"body":"√Ä compl√©ter : ouvrez une issue en cas de mot manquant\nA ADV : Appareil de voie B BA : Block automatique BAL : Block automatique lumineux BAPR : Block automatique √† permissivit√© restreinte BM : Block manuel BMCV : BM par circuit de voie BMVU : BM de voie unique C CAPI : Cantonnement assist√© par informatique CC : Commande et contr√¥le COVIT : Contr√¥le de vitesse CT : Cantonnement t√©l√©phonique D DAAT : Dispositif d‚Äôarr√™t automatique des trains DMI : Driver machine interface : dispositif qui permet la communication entre le syst√®me bord et le conducteur DV : Double voie E EOA : End of authority (fin d‚Äôautorisation de mouvement) EPSF : √âtablissement public de s√©curit√© ferroviaire ETCS : European train control system (syst√®me europ√©en de contr√¥le commande des trains) ERTMS : European rail traffic management system (syst√®me europ√©en de gestion du trafic ferroviaire) EVC : European vital computer. (ordinateur europ√©en de s√©curit√©) : calculateur de bord qui supervise la marche du train en fonction des donn√©es sol et bord F FA : Fermeture automatique FS : Full supervision (supervision compl√®te) : mode technique dans lequel le train est supervis√© en vitesse et d√©placement = marche normale attribu√©e au train G GI : Gestionnaire d‚Äôinfrastructure GSM/GFU : Global system for mobile communication/Groupe ferm√© d‚Äôutilisateurs GSM-R : Global system for mobile communication railways (Syst√®me de communication t√©l√©phonique pour mobile d√©di√© aux chemins de fer) GSM-R Data : Syst√®me de transmission de donn√©es entre les installations ¬´ sol ¬ª et les installations ¬´ bord ¬ª via le r√©seau GSM-R I ICS : Installations de circulation √† contre-sens IPCS : Installations permanentes de contre-sens IS : Installation de s√©curit√© ITCS : Installations temporaires de contre-sens J JRU : Juridical recording unit (Enregistreur des param√®tres d‚Äôexploitation) K KVB : Contr√¥le de vitesse par balises L LEU : Line side electronic unit (codeur ERTMS) LGV : Ligne √† grande vitesse M MA : Movement authority : autorisation donn√©e √† un train de circuler vers un point donn√© en tant que mouvement supervis√© N Nf : Non franchissable NL : Non leading (non en t√™te) : Mode technique de circulation utilis√© pour la double traction ou la pousse O OS : On sight (conduite √† vue) : mode technique de circulation qui autorise le conducteur √† s‚Äôavancer en marche √† vue. En ETCS1, le mode OS accompagn√© du message textuel national ¬´ Voie de service ¬ª impose la marche en manoeuvre pour la r√©ception sur voie de service P PI ETCS : Point d‚Äôinformation ETCS : constitu√© d‚Äôune ou plusieurs balises transmettant des informations vers le bord (par exemple PI avanc√© ou PI signal) PL : Pleine ligne PLD : Point limite de domaine : point o√π une transition entre ETCS et un autre syst√®me de signalisation a lieu PN : Passage √† niveau PO : Point op√©rationnel : collection de points repr√©sentant un lieu d‚Äôint√©r√™t, voir exemple. PR : Point remarquable : voir PO R RBC : Radio block center : syst√®me centralis√© fonctionnant avec les enclenchements afin d‚Äô√©tablir et de contr√¥ler l‚Äôespacement et le mouvement des trains en envoyant et recevant des informations par radio en ETCS2 ou 3 RFN : R√©seau Ferr√© National RST : Radio sol-train RT : Renseignement technique RV : Reversing (refoulement) : mode technique de circulation utilis√© pour permettre au train de reculer d‚Äôurgence sans signaux ni ordre dans une zone pr√©d√©finie. Ce mode n‚Äôest pas utilis√© sur le RFN S SGS : Syst√®me de gestion de la s√©curit√© SH : Shunting (manoeuvre) : mode technique de circulation manoeuvre SN : System national : mode technique de circulation de niveau STM SR : Staff responsible (responsabilit√© agent) : mode technique de circulation utilis√© dans les situations d√©grad√©es. Il est utilisable sous la responsabilit√© respective de l‚Äôagent-circulation et du conducteur STM : Specific transmission module (Module sp√©cifique de transmission) : ce dispositif permet √† l‚ÄôETCS d‚Äôutiliser un syst√®me de signalisation national T TECS : Tableau lumineux d‚Äôentr√©e √† contre sens TIV : Tableau indicateur de vitesse TR : Trip : mode technique de circulation entra√Ænant une application irr√©versible du freinage d‚Äôurgence par le syst√®me ETCS jusqu‚Äô√† l‚Äôarr√™t du train TSCS : Tableau lumineux de sortie √† contre sens TVM : Transmission voie machine V VB : Voie banalis√©e VP : Voie principale VS : Voie de service VU : Voie unique VUT : Voie unique temporaire VUTP : Voie unique temporaire √† caract√®re permanent ","categories":"","description":"Glossaire th√©matique d'OSRD et du ferroviaire","excerpt":"Glossaire th√©matique d'OSRD et du ferroviaire","ref":"/fr/docs/railway-wiki/glossary/","tags":"","title":"Glossaire"},{"body":"Please open an issue if you‚Äôre missing a word\n","categories":"","description":"Glossary of OSRD and railway vocabulary","excerpt":"Glossary of OSRD and railway vocabulary","ref":"/en/docs/railway-wiki/glossary/","tags":"","title":"Glossary"},{"body":"Open source is a software development practice, where the software‚Äôs source code1 :\nusually developped by multiple actors, in an open and transparent way free and available for all can be modified or used for derivative work by anyone can be freely distributed In practice, open source is both a legal framework for collaborative work, and a set of practices.\nOSRD and Open Source Applied to OSRD, Open Source has multiple avantages :\nthe algorithms and know-how developped with the project are free for all development cost and results are shared between actors it makes interoperability between software systems easier by helping make the landscape more homogeneous and standardized helps focus collaboration around common interests enables actors to tailor the software to their own interests enables researchers to contribute and benefit from the project it allows public actors to meet their transparency goals Using open source to enable industrial collaboration is not a new idea:\nBlender is a modelling, rendering and 3D animation software, which has recently become major point of industry collaboration for this industry Linux, a Windows alternative used by Google, Microsoft, Amazon, Apple, most websites, cloud platforms, mobile phones, routers, and more. All these companies rely on and contribute to Linux tremendously Android is the common base software for most phones. Phone manufacturers regularly contribute to android PostgreSQL, MySQL, SQLite and other open source data bases collectively dominate the database market. Any actor with special needs can improve an existing open source tool rather than create a new one. Both Firefox and Chrome are Open Source Wordpress is the CMS which runs 43% of all websites. A flock of companies contribute to Wordpress and make extensions Odoo is a powerful modular ERP, which has a community not unlike Wordpress All these projects share the common property of being essential to a number of companies, without being part of what these companies sell.\nIt thus makes sense for these companies to collaborate with peers and competitors to build common tools, which makes exchanges easier and helps improve quality of service for all.\nProcesses These processes are not specific to open source: many companies work in a similar way. In practice, most open source software is developed using a forge. Through this forge, developers and users can access the source code, report bugs, plan tasks, and integrate new changes to the code. Anyone can suggest a change, report a bug or plan a task.\nAll changes go through a peer review, not unlike those used by the scientific community. Reviewers are software developers most familiar with components affected by the change.\nChanges are integrated into the code base when everyone involved agrees to. Maintainers are responsible for keeping the project working and consistent. Maintainers are choosen among developers by developers. What motivates whether to integrate a change or not is technical viability: the goal of everyone involved is to maintain high level of service and quality standard.\nSource code is a set of text documents which describes how a piece of software works. It‚Äôs the result of the work of software developers.¬†‚Ü©Ô∏é\n","categories":"","description":"OSRD and Open Source","excerpt":"OSRD and Open Source","ref":"/en/about/opensource/","tags":"","title":"Open Source"},{"body":"L‚Äôopen source est une pratique de d√©veloppement logiciel, o√π le code source1 du logiciel est :\ng√©n√©ralement d√©velopp√© de mani√®re ouverte et collaborative, par des acteurs vari√©s accessible et gratuitement utilisable par tous tout le monde est libre de proposer un changement, ou cr√©er un logiciel d√©riv√© redistribuable par tous En pratique, l‚Äôopen source est √† la fois un cadre l√©gal pour le travail collaboratif, et un ensemble de pratiques.\nApplication √† OSRD Dans le contexte d‚ÄôOSRD, ce mod√®le a de multiples avantages :\nles algorithmes et le savoir-faire d√©velopp√© est ouvert √† tous les co√ªts de d√©veloppement et r√©sultats sont mutualis√©s entre les diff√©rents acteurs permet de faciliter l‚Äôinterop√©rabilit√© entre syst√®mes d‚Äôinformation en facilitant la standardisation et l‚Äôuniformisation permet de catalyser la collaboration d‚Äôacteurs aux objectifs communs permet √† chaque acteur d‚Äôadapter librement le logiciel √† ses besoins il permet aux organismes de recherche publics de contribuer directement, et de profiter du projet il permet aux acteurs publics de r√©pondre √† leurs imp√©ratifs de transparence L‚Äôutilisation d‚Äôun projet open source comme catalyseur de collaboration industrielle a de nombreux ant√©c√©dents :\nBlender est un outil de mod√©lisation, rendu, et animation 3D tr√®s complet, qui est r√©cemment devenu une plateforme de collaboration industrielle majeure pour l‚Äôindustrie audiovisuelle Linux, une alternative √† Windows qui √©quipe Google, Microsoft, Amazon, Apple, la plupart des sites internet, plateformes cloud, t√©l√©phones, routeurs, et bien plus. Toutes ces entreprises contribuent et se reposent √©norm√©ment sur Linux Android est une base commune pour la majorit√© des t√©l√©phones vendus. Les fabriquants contribuent r√©guli√®rement √† Android PostgreSQL, MySQL, SQLite et d‚Äôautres bases de donn√©e open source dominent collectivement ce march√©. Un acteur aux besoins in√©dits peut contribuer √† un outil open source plut√¥t qu‚Äôen cr√©er un nouveau. √Ä la fois Firefox et Chrome sont Open Source Wordpress est le CMS au coeur de 43% des sites internet en activit√©. Une arm√©e d‚Äôentreprises contribuent et produisent des extensions Odoo est un ERP modulaire tr√®s complet, √† la communaut√© similaire √† Wordpress Toutes ces projets ont en commun d‚Äô√™tre essentiel au business d‚Äôun grand nombre d‚Äôentreprises, sans pour autant √™tre ce que l‚Äôentreprise commercialise.\nAinsi, ces entreprises d√©cident de collaborer avec leurs pairs ou concurrents √† des outils communs, afin de faciliter les √©changes et d‚Äôam√©liorer la qualit√© de leur service.\nFonctionnement pratique Ce mode de fonctionnement n‚Äôest pas sp√©cifique √† l‚Äôopen source : beaucoup d‚Äôentreprises adoptent un fonctionnement identique, √† la diff√©rence pr√®s qu‚Äôil est maintenu priv√©. En pratique, les logiciels libre sont d√©velopp√©s via une forge. Cette forge donne acc√®s au code source, un outil de gestion des bugs / t√¢ches, et un outil servant √† int√©grer des changements dans le code. Tout le monde peut proposer un changement, signaler un bug ou proposer une t√¢che.\nLes propositions de changement sont soumis √† une revue par les pairs, semblables √† celles de la communaut√© scientifique. Les individus en charge de la revue (les reviewers) sont ceux qui sont les plus familliers avec les composants affect√©s par le changement.\nLes changements sont int√©gr√©s par des mainteneurs sur la base du consensus entre reviewers. Les mainteneurs sont responsables de la coh√©rence technique du projet, et obtiennent cette position par consensus. L‚Äôint√©gration des changement n‚Äôest motiv√©e que par leur viabilit√© technique : l‚Äôobjectif des mainteneurs et reviewers est de s‚Äôassurer que le projet reste de bonne qualit√©.\nLe code source est un ensemble de documents texte qui d√©finit comment fonctionne une application. C‚Äôest le produit du travail de d√©veloppeurs logiciels.¬†‚Ü©Ô∏é\n","categories":"","description":"OSRD et l'Open Source","excerpt":"OSRD et l'Open Source","ref":"/fr/about/opensource/","tags":"","title":"Open Source"},{"body":"Cette section est destin√©e √† exposer les principes g√©n√©raux relatifs :\naux signaux aux r√©gimes d‚Äôexploitation des lignes (√† venir) aux diff√©rents syst√®mes d‚Äôespacement des trains La grande majorit√© des informations de cette section sont extraites du document p√©dagogique de l‚Äô√âtablissement Public de S√©curit√© Ferroviaire (EPSF) √©dit√© le 05 juillet 2017.\n","categories":"","description":"Les signaux, r√©gimes d'exploitation des trains, et les syst√®mes d'espacement des trains","excerpt":"Les signaux, r√©gimes d'exploitation des trains, et les syst√®mes ‚Ä¶","ref":"/fr/docs/railway-wiki/signalling/","tags":"","title":"Signalisation"},{"body":"Open Data is the practice of making data public accessible under a permissive license. It is not the same as open source, which only applies to software.\nOpen data and open source have a symbiotic relationship : without open data, an open source railway software can only be used by industry insiders. Managing data access is hard, expensive, often not necessary, and reduces the availability of critical data.\nAlone, open data already brings a number of key benefits:\ncompanies can use open data in their products, which also promotes railway services researchers can study the data immediately, and can find the data by themselves Yet, open data used by an open source toolbox open up new prospects:\ncompanies and researchers can use the open source tools to analyse the data, which greatly reduces the barrier to entry by alleviating the need for custom or paid-for tools customers can use the toolbox to improve how they use railway services If multiple actors have open data exploitable by an open source tool, these datasets can be combined and used to provide and plan for common services.\nOSRD and Open Data having rolling stock and infrastructure open data enables anyone to simulate trains, study and evaluate the railway network having timetable open data enables anyone to study rail network usage ","categories":"","description":"OSRD and Open Data","excerpt":"OSRD and Open Data","ref":"/en/about/opendata/","tags":"","title":"Open Data"},{"body":"L‚Äôopen data, c‚Äôest la pratique de rendre publiquement accessible des donn√©es sous une license permissive. C‚Äôest une pratique distincte de l‚Äôopen source, qui ne s‚Äôapplique qu‚Äôau logiciel.\nOpen data et open source ont une relation symbiotique : sans Open Data, un logiciel open source ferroviaire n‚Äôest utilisable que par des initi√©s. G√©rer l‚Äôacc√®s aux donn√©es est difficile, co√ªteux, souvent inutile, et r√©duit l‚Äôaccessibilit√© de donn√©es pourtant essentielles.\nSeul, l‚Äôopen data pr√©sente d√©j√† un certain nombre d‚Äôavantages cl√©s :\ndes entreprises peuvent utiliser ces donn√©es dans leur produit, ce qui promeut les services ferroviaires des chercheurs peuvent √©tudier les donn√©es sans d√©marche particuli√®re, et d√©couvrir eux-m√™me les donn√©es disponibles Des donn√©es open data exploit√©es par une suite d‚Äôoutils open source ouvrent de nouveaux horizons :\nles chercheurs et entreprises peuvent maintenant exploiter les donn√©es sans avoir √† cr√©er leurs propres outils, ou en acqu√©rir par leurs propres moyens les clients de l‚Äôentreprise peuvent utiliser outils et donn√©es pour am√©liorer leur usage des services Si plusieurs acteurs mettent en open data des donn√©es exploitables par un m√™me logiciel open source, il devient √©galement possible de recouper les donn√©es et de fournir et plannifier des services communs.\nDans le cadre d‚ÄôOSRD si les donn√©es de mat√©riel roulant et d‚Äôinfrastructure sont en open data, alors il est possible pour tous de simuler des trajets, d‚Äô√©tudier et √©valuer le r√©seau ferroviaire si les donn√©es de grilles horaires sont accessibles en open data, alors il est possible pour tous d‚Äô√©tudier l‚Äôusage du r√©seau ","categories":"","description":"OSRD et l'Open Data","excerpt":"OSRD et l'Open Data","ref":"/fr/about/opendata/","tags":"","title":"Open Data"},{"body":"Les trains doivent circuler en toute s√©curit√©. Les risques majeurs li√©s aux circulations ferroviaires sont les suivants :\nle rattrapage des trains qui circulent dans le m√™me sens sur la m√™me voie ; la prise en √©charpe, c‚Äôest-√†-dire la collision lat√©rale de trains qui circulent sur des itin√©raires convergents ; le nez √† nez, c‚Äôest-√†-dire la collision frontale de trains qui circulent en sens contraire sur la m√™me voie ; le d√©raillement ; la collision avec un obstacle. On pr√©vient ces risques notamment par :\nla mise en place d‚Äôune signalisation ; l‚Äô√©tablissement d‚Äôun r√©gime d‚Äôexploitation de la ligne (double voie, voie banalis√©e, voie unique) ; la mise en place d‚Äôun syst√®me d‚Äôespacement des trains ; la mise en oeuvre de proc√©dures d‚Äôexploitation. D‚Äôautres dispositifs techniques contribuent √©galement √† couvrir ces risques tels que :\nles installations de s√©curit√©, notamment les enclenchements des postes d‚Äôaiguillage ; le DAAT qui est un dispositif permettant d‚Äôassurer l‚Äôarr√™t automatique des trains en cas de franchissement intempestif d‚Äôun point d‚Äôinformation avec signal d‚Äôarr√™t ferm√© ; le KVB, le COVIT (TVM) sont des exemples de syst√®mes de contr√¥le de la vitesse, avec contr√¥le de franchissement des signaux non franchissables ; le syst√®me de contr√¥le commande des trains, int√©gr√© dans l‚ÄôETCS. La s√©curit√© des circulations repose aussi sur le respect rigoureux des consignes et instructions op√©rationnelles par tous les agents concern√©s par la circulation des trains.\nCes proc√©dures sont de la responsabilit√© des exploitants ferroviaires. Elles sont d√©crites dans le manuel du syst√®me de gestion de la s√©curit√© (SGS) qu‚Äôils √©tablissent et qui fait l‚Äôobjet d‚Äôune instruction par l‚ÄôEPSF charg√© de d√©livrer le certificat ou l‚Äôagr√©ment de s√©curit√©.\n","categories":"","description":"","excerpt":"Les trains doivent circuler en toute s√©curit√©. Les risques majeurs ‚Ä¶","ref":"/fr/docs/railway-wiki/signalling/risks/","tags":"","title":"Les risques ferroviaires"},{"body":"Principe Pour transmettre au conducteur des ordres et informations li√©es √† la s√©curit√© des circulations, il est fait usage de signaux. Ces signaux peuvent indiquer des informations relatives aux limites de vitesse, peuvent servir √† garantir l‚Äôespacement des trains ou donner des indications diverses telles que l‚Äôacc√®s √† des voies de service, des ouvrages d‚Äôart √† gabarits r√©duit, etc.\nLa signalisation √† main La signalisation au sol La signalisation au sol est normalement implant√©e √† gauche ou au-dessus de la voie concern√©e.\nSignaux de protection Les signaux de protection sont destin√©s √† interdire l‚Äôacc√®s √† un itin√©raire, √† une aiguille, √† un PN, etc. Ils sont g√©n√©ralement man≈ìuvr√©s depuis des postes par des agents de SNCF R√©seau.\nSignaux de cantonnement Les signaux de cantonnement sont destin√©s √† assurer l‚Äôespacement des circulations de m√™me sens.\nSur les sections de lignes √©quip√©es en block automatique (BA), les signaux de cantonnement se ferment automatiquement d√®s l‚Äôoccupation du canton et restent ferm√©s jusqu‚Äô√† sa compl√®te lib√©ration.\nSur les sections de lignes √©quip√©es en block manuel (BM), les signaux de cantonnement sont man≈ìuvr√©s depuis des postes par des agents du service du GI charg√© de la gestion des circulations.\nSignaux d‚Äôannonce d‚Äôarr√™t Le carr√©, le s√©maphore et le feu rouge clignotant sont normalement annonc√©s √† distance par un avertissement qui peut lui-m√™me √™tre pr√©c√©d√©, en signalisation lumineuse, par un feu jaune clignotant.\nToutefois, les signaux qui ne peuvent √™tre abord√©s qu‚Äôen marche √† vue ou en marche en man≈ìuvre ne sont normalement pas annonc√©s (par exemple, le guidon d‚Äôarr√™t). Il en est de m√™me des signaux situ√©s sur voie principale √† la sortie des gares en impasse.\nSignaux d‚Äôindication de marche Le feu vert indique au conducteur que la circulation en marche normale est autoris√©e, s‚Äôy rien ne s‚Äôy oppose.\nSur les sections de ligne o√π la vitesse des trains est sup√©rieure √† 160 km/h, un feu vert clignotant pr√©c√®de g√©n√©ralement l‚Äôavertissement ou le feu jaune clignotant.\nSignaux de limitation de vitesse Ils limitent √† un taux d√©termin√© la vitesse des trains sur une partie de voie ou au franchissement de certains points particuliers (aiguille, travers√©e de gare, etc.).\nLes limitations permanentes de vitesse (en compl√©ment de celles pouvant figurer dans les RT) Sur des parties de voie par tableau indicateur de vitesse (TIV) ordinaire Au franchissement de certains points particuliers (exemple des aiguilles)\nRalentissement √† 30 km/h en signalisation lumineuse Ralentissement √† 60 km/h en signalisation lumineuse TIV mobiles Ces tableaux peuvent √™tre lumineux ou m√©caniques ; lorsqu‚Äôils sont ouverts ils pr√©sentent une bande verticale blanche continue.\nSi cela est n√©cessaire, l‚Äôemplacement de l‚Äôaiguille (ou de la premi√®re aiguille dans le cas d‚Äôaiguilles successives) est rep√©r√© par un chevron pointe en bas.\nLes limitations temporaires de vitesse Cette signalisation s‚Äôapplique sur des parties de voie (chantiers de travaux, etc.) sur lesquelles une limitation temporaire de vitesse doit √™tre observ√©e.\nSignaux indicateurs de direction Ils renseignent les conducteurs sur la direction g√©ographique qui leur est donn√©e.\nSignaux caract√©ristiques de prescriptions particuli√®res Ils renseignent les conducteurs sur des particularit√©s.\nOn trouve :\ndes tableaux des pancartes la bande lumineuse jaune la croix de Saint-Andr√© (annulation des signaux) Exemples de tableaux Exemples de pancartes Bande lumineuse jaune horizontale La bande lumineuse jaune horizontale est utilis√©e en compl√©ment de l‚Äôavertissement. Elle indique au conducteur que son train est dirig√© vers une voie √† quai de courte longueur ou bien que sa longueur se trouve r√©duite.\nCroix de Saint-Andr√© (annulation des signaux) Signalisation de sortie de certains faisceaux ou groupes de voies convergentes Elle peut √™tre constitu√©e de :\nLa signalisation de cabine Sur les lignes √† signalisation de cabine, le syst√®me transmet de mani√®re continue (ou discontinue) en cabine de conduite des ordres et une consigne de vitesse associ√©e √©ventuellement √† une distance but. La signalisation de cabine peut √™tre compl√©t√©e par une signalisation au sol dans certains cas pour :\nrep√©rer les points √† ne pas d√©passer, par exemple : donner des ordres de traction √©lectrique, des informations aux points d‚Äôentr√©e et de sortie du domaine de signalisation de cabine, etc. Des pancartes ou tableaux indiquent ces ordres et informations.\nCes rep√®res, pancartes ou tableaux sont implant√©s :\n√† gauche de la voie sur les plateformes √† une seule voie ; c√¥t√© piste, √† l‚Äôext√©rieur sur les plateformes √† deux voies ; dans le cas de plan de voie plus complexe, les pancartes ou tableaux sont fl√©ch√©s. Nota : les rep√®res ETCS et de la TVM ne sont pas fl√©ch√©s du fait de leur graphisme indiquant la voie √† laquelle ils s‚Äôadressent.\nPoint de transition de signalisation (entr√©e sur LGV, armement de la signalisation de cabine) Le point de transition de signalisation (tableau CAB), ainsi que l‚Äôarmement de la signalisation de cabine, se situent √† hauteur ou imm√©diatement en aval du dernier signal au sol (signal carr√©).\n","categories":"","description":"","excerpt":"Principe Pour transmettre au conducteur des ordres et informations ‚Ä¶","ref":"/fr/docs/railway-wiki/signalling/signals/","tags":"","title":"Les signaux"},{"body":"D√©finition Ensemble des r√®gles d‚Äôexploitation, c‚Äôest-√†-dire des r√®gles appliqu√©es pour organiser et assurer le trafic, propres √† une ligne en fonction des installations mises en ≈ìuvre pour en assurer l‚Äôexploitation.\nLes principaux r√©gimes d‚Äôexploitation sont : la voie unique, la voie banalis√©e, la double voie.\nPrincipe Il ne faut pas confondre r√©gime d‚Äôexploitation et nombre de voies sur une plateforme, car il existe des plateformes √† 2 voies qui ne sont pas des ¬´ double voie ¬ª, des plateformes √† 3 ou 4 voies qui sont des ¬´ double voie ¬ª, des plateformes √† 1 seule voie qui ne sont pas des ¬´ voie unique ¬ª.\nLes appellations et d√©finitions de ces r√©gimes d‚Äôexploitation sont donc tr√®s importantes, car elles entra√Ænent notamment des contraintes particuli√®res de conduite que ce soit en situation normale ou d√©grad√©e (implantation des signaux, marche √† vue ou r√®gle sp√©ciale de certains signaux par exemple).\nEn voie unique, l‚Äôorganisation de la circulation des trains des deux sens sur une m√™me voie g√©n√®re un risque sp√©cifique de nez √† nez en plus du risque de rattrapage √©galement pr√©sent sur les lignes √† double voie.\nL‚Äôexploitation sous le r√©gime de la ¬´ double voie ¬ª permet, par conception, d‚Äô√©viter le risque de nez √† nez, compte tenu de l‚Äôaffectation des trains √† un sens de circulation par voie. Cependant sur certaines lignes, la circulation des trains s‚Äôeffectue selon l‚Äôun des deux r√©gimes suivants : la voie unique ou la voie banalis√©e.\n","categories":"","description":"","excerpt":"D√©finition Ensemble des r√®gles d‚Äôexploitation, c‚Äôest-√†-dire des r√®gles ‚Ä¶","ref":"/fr/docs/railway-wiki/signalling/operation-modes/","tags":"","title":"Les r√©gimes d‚Äôexploitation des lignes"},{"body":"D√©finition Le syst√®me d‚Äôespacement des trains de m√™me sens, est destin√© √† √©viter les rattrapages et consiste √† fractionner la ligne en plusieurs cantons dont l‚Äôentr√©e est prot√©g√©e par un signal d‚Äôarr√™t.\nPrincipe Compte tenu de leur masse importante, de leur vitesse √©lev√©e, de la faible adh√©rence rail-roue, les trains ont besoin d‚Äôune distance importante pour s‚Äôarr√™ter.\nDe ce fait, la distance n√©cessaire pour obtenir l‚Äôarr√™t est g√©n√©ralement plus grande que la partie de voie visible par le conducteur. Dans ces conditions, le conducteur d‚Äôun train en marche ne voyant pas √† temps la queue d‚Äôun train arr√™t√© ou circulant √† plus faible vitesse devant lui risquerait de le heurter.\nPour pr√©venir le risque de rattrapage : un dispositif d‚Äôespacement des trains appel√© ¬´ cantonnement ¬ª est mis en place selon les principes suivants :\nla ligne est divis√©e en portions de voie appel√©es ¬´ cantons ¬ª l‚Äôentr√©e de chaque canton est normalement command√©e par un signal un seul train est normalement admis dans chaque canton aucun train ne peut normalement p√©n√©trer dans un canton occup√©, du fait du maintien √† la fermeture du signal d‚Äôentr√©e du canton durant tout le temps de son occupation Dans certains cas particuliers, la p√©n√©tration d‚Äôun train dans un canton occup√© ainsi que les modalit√©s de franchissement du signal d‚Äôentr√©e du canton sont pr√©vues dans une proc√©dure propre √† chaque mode de cantonnement.\nLes diff√©rents modes de cantonnement On distingue :\nle cantonnement t√©l√©phonique le block manuel par appareils (BM) le block automatique : lumineux (BAL) ou √† permissivit√© restreinte (BAPR) l‚ÄôETCS 1 g√©n√©ralement superpos√© √† la signalisation au sol l‚Äôespacement sur lignes √† grande vitesse (TVM, ETCS 2) Sur les sections de lignes √©quip√©es en cantonnement t√©l√©phonique ou en block manuel par appareils, les signaux de cantonnement sont manoeuvr√©s au sol ou depuis des postes par des agents du service du gestionnaire d‚Äôinfrastructure (GI) charg√© de la gestion des circulations d√©nomm√©s ¬´ gardes ¬ª.\nSur les sections de lignes √©quip√©es en BAL ou BAPR, les signaux de cantonnement se ferment automatiquement d√®s l‚Äôoccupation du canton et restent ferm√©s jusqu‚Äô√† sa compl√®te lib√©ration.\nSur les sections de lignes √† signalisation de cabine, √©quip√©es en TVM ou ETCS, les informations li√©es √† l‚Äôespacement des trains sont donn√©es au conducteur automatiquement directement en cabine de conduite.\nPour d√©terminer le mode et le cas √©ch√©ant les postes de cantonnement d‚Äôune section de ligne, il faut consulter les RT.\n","categories":"","description":"","excerpt":"D√©finition Le syst√®me d‚Äôespacement des trains de m√™me sens, est ‚Ä¶","ref":"/fr/docs/railway-wiki/signalling/spacing/","tags":"","title":"Les syst√®mes d'espacement des trains"},{"body":"Elles sont principalement exploit√©es selon les dispositions du r√©gime g√©n√©ral d‚Äôexploitation de la voie unique, certaines d‚Äôentre elles disposant d‚Äôun minimum d‚Äô√©quipement de signalisation sont d√©sign√©es ¬´ voie unique √† signalisation simplifi√©e ¬ª.\nD‚Äôautres lignes, peu fr√©quent√©es et ferm√©es au service voyageur sont exploit√©es selon le r√©gime de la voie unique √† trafic restreint.\nIl existe aussi un r√©gime d‚Äôexploitation en navette.\nEnfin d‚Äôautres lignes disposant d‚Äôinstallations de s√©curit√© s‚Äôopposant notamment au nez √† nez sont exploit√©es selon le r√©gime de la voie banalis√©e.\n","categories":"","description":"","excerpt":"Elles sont principalement exploit√©es selon les dispositions du r√©gime ‚Ä¶","ref":"/fr/docs/railway-wiki/signalling/operation-modes/single-track-lines/","tags":"","title":"Les lignes √† une seule voie"},{"body":"D√©finition R√©gime d‚Äôexploitation d‚Äôune ligne √† deux voies (ou plus) dans lequel chaque voie est normalement affect√©e √† la circulation des trains dans un sens d√©termin√©.\nPrincipe Le risque de nez √† nez Sur une ligne √† deux voies, les circulations empruntent normalement la voie de gauche dans le sens de la marche (voie de droite sur les lignes d√©sign√©es √† la documentation d‚Äôexploitation).\nLa double voie est exploit√©e selon les modalit√©s d√©finies par SNCF R√©seau qui pr√©voit que chaque agent du service de la gestion des circulations doit disposer en temps utile des informations n√©cessaires pour assurer le service de la circulation des trains, notamment les informations relatives √† l‚Äôordre th√©orique et r√©el de succession des trains, √† l‚Äôhoraire et aux voies de circulation des trains.\nDans certains cas, il peut √™tre n√©cessaire (travaux, incidents, etc.) d‚Äôorganiser la circulation des trains des deux sens sur une seule voie. Les circulations se d√©pla√ßant sur une voie en sens inverse du sens normal sont dites √† ¬´ contresens ¬ª sur une installation de contre sens (ICS) ou sur une voie unique temporaire (VUT). Elles sont dites √† ¬´ contre-voie ¬ª dans les autres cas.\nEn fonction des installations et √©quipements en place :\nutilisation d‚Äôinstallations qui s‚Äôopposent au nez √† nez : installation de contre sens (ICS) : installations permanentes de contre sens (IPCS) ou installations temporaires de contresens (ITCS) ; voie unique temporaire √† caract√®re permanent (VUTP) ; ou mise en place de proc√©dures : voie unique temporaire (VUT) ; mouvement √† contre voie. Le risque de rattrapage L‚Äôespacement est assur√© selon les principes d√©finis dans cette section. Sur une voie les signaux sont normalement implant√©s √† gauche.\n","categories":"","description":"","excerpt":"D√©finition R√©gime d‚Äôexploitation d‚Äôune ligne √† deux voies (ou plus) ‚Ä¶","ref":"/fr/docs/railway-wiki/signalling/operation-modes/double-track-lines/","tags":"","title":"La double voie"},{"body":"Context The onboard computer of ETCS-enabled trains has to compute a number of position / speed curves. Here is how it works:\nbelow all the curves, the speed indicator is white above the indication curve, the speed indicator is yellow above the permitted curve, the speed indicator is orange above the warning curve, an alarm rings above the intervention curves, an emergency break intervention is triggered Inputs In order to compute any of these curves, a number of things are needed:\ntarget data (the destination of the braking curve, which can be EOA and SvL or LOA and MRSP) train data infrastructure data infrastructure manager constants standardized constants Train max speed length rotating mass T_traction_cutoff: the time it take to cut off traction braking model, either lambda or gamma: lambda (braking weight/mass) gamma (contant deceleration at a given speed) correction factors (k_dry and k_wet for gamma braking) for braking curves Infrastructure corrected gradients (it incorporates curvature) odometry balises location Processes Braking coefficients: A_brake_emergency is the expected emergency braking capability, without safety margins A_brake_safe is the emergency braking coefficient, with safety margins A_brake_service is the expected service braking capability, without safety margins Speed / distance targets EOA end of movement authority: the location until which the train is allowed to move SvL supervized location: the protected location Curves SBD supervised braking deceleration: intermediary result computed from EOA and A_brake_service EBD emergency braking deceleration: intermediary result computed from SvL and A_brake_safe All the curves below are cut below a given release speed:\nEBI (emergency break intervention) computed from EBD, shifted in position and space given rolling stock metadata SBI1 computed from SBD, shifted in time with Tbs1 SBI2 computed from SBD, shifted in time with Tbs2 FLOI (also called SBI, the intervention curve) the minimum of SBI1 and SBI2 WARNING (warning curve) computed as a shift of FLOI by Twarning PS (permitted speed curve): shift of WARNING by time Tdriver INDICATION is a shift of PS by time Tindication ","categories":"","description":"European Train Control System","excerpt":"European Train Control System","ref":"/en/docs/railway-wiki/signalling/spacing/ertms/etcs/","tags":"","title":"ETCS"},{"body":"G√©n√©ralit√©s ETCS est le syst√®me europ√©en de contr√¥le commande des trains. La partie bord est interop√©rable. La partie sol peut √™tre diff√©rente selon les pays tout en r√©pondant aux m√™mes objectifs de fonctionnalit√©.\nIl existe quatre niveaux diff√©rents dont deux sont en service : L‚ÄôETCS 1 et L‚ÄôETCS 2. L‚ÄôETCS 0 est interdit en France. L‚ÄôETCS 3 est encore √† l‚Äô√©tat de d√©veloppement dans la plupart des pays de l‚ÄôUnion europ√©enne.\nIl s‚Äôagit d‚Äôun syst√®me de signalisation de cabine et de contr√¥le de vitesse faisant appel aux trois composantes suivantes :\nsol : pour la gestion des circulations comprenant notamment l‚Äôespacement, la protection des points √† prot√©ger et des circulations bord : pour l‚Äôaffichage des ordres et informations √† destination du conducteur et le contr√¥le de la bonne ex√©cution de ceux-ci, d√©nomm√© EUROCAB liaison : pour les √©changes de donn√©es entre le sol et le bord : liaison ponctuelle unidirectionnelle du sol vers le bord par EURO BALISES, liaison radiot√©l√©phonique continue et bidirectionnelle par GSM-R DATA pour ETCS2 d√©nomm√© EURORADIO. Sur le RFN, sont mis en oeuvre les niveaux d‚Äôexploitations suivants :\nL‚ÄôETCS1 sur certaines lignes parcourables jusqu‚Äô√† 220 km/h. Il correspond √† un syst√®me de signalisation de cabine, g√©n√©ralement superpos√© √† la signalisation au sol existante, dont les informations entre le sol et le bord sont transmises ponctuellement par eurobalise.\nL‚ÄôETCS2 sur certaines lignes √† grande vitesse. Il correspond √† un syst√®me de signalisation de cabine dont les informations entre le sol et le bord sont transmises en temps utile ou cycliquement par liaison permanente GSM-R DATA.\nL‚ÄôETCS2 est un syst√®me qui ne n√©cessite pas la mat√©rialisation des cantons sur le terrain.\nPr√©alablement √† tout d√©placement, les donn√©es relatives au train doivent √™tre saisies ou param√©tr√©es √† bord. Ainsi, le syst√®me peut, √† partir des donn√©es bord et sol, superviser le train, c‚Äôest-√†-dire contr√¥ler sa vitesse et ses d√©placements et intervenir en cas de n√©cessit√©.\nLa d√©tection d‚Äôune circulation sur une partie de voie est r√©alis√©e au moyen de circuits de voie ou de compteurs d‚Äôessieux. En ETCS2, la combinaison des √©quipements sol et bord est telle qu‚Äôelle ne n√©cessite, normalement, pas de signalisation compl√©mentaire au sol.\n√âquipement bord Le bord est constitu√© d‚Äôun DMI, d‚Äôun EVC, de capteurs odom√©triques (de vitesse), d‚Äôantennes pour la lecture des PI ETCS, un modem GSM-R (Euroradio) pour ETCS2, d‚Äôune unit√© juridique d‚Äôenregistrement des param√®tres d‚Äôexploitation, d‚Äôinterfaces avec le train.\nLe DMI Le DMI est l‚Äôinterface entre le conducteur et la machine. Il permet d‚Äôafficher les ordres et instructions en fonction des donn√©es sol et/ou bord. Le conducteur renseigne √©galement le syst√®me par saisie de donn√©es.\nL‚Äôespacement des circulations et la protection des points dangereux se traduisent par l‚Äôaffichage en temps utile d‚Äôune vitesse but et d‚Äôune distance but. La vitesse but doit √™tre respect√©e par le conducteur au point d√©fini par la distance but.\nEn ¬´ marche normale ¬ª, le DMI indique au conducteur la vitesse autoris√©e qui ne doit pas √™tre d√©pass√©e. Dans ce cas, il n‚Äôy a pas d‚Äôaffichage de la distance but et de la vitesse but.\nUn secteur pouvant pr√©senter diff√©rentes couleurs est utilis√© pour indiquer les ordres de vitesse ou d‚Äôarr√™t.\nEnfin, d‚Äôautres indications sont affich√©es telles que la signalisation de traction √©lectrique, le niveau d‚Äôexploitation, le mode technique. Les changements d‚Äôindication au DMI peuvent √™tre accompagn√©s d‚Äôindications sonores. Une zone en partie basse du DMI est √©galement r√©serv√©e pour l‚Äôaffichage de messages textuels. Certaines informations compl√©mentaires peuvent √©galement √™tre affich√©es par l‚Äôentreprise ferroviaire.\nDans cet exemple, le conducteur autoris√© √† circuler √† 140 km/h maximum, circule √† 125 km/h, il va devoir observer une phase de ralentissement afin de respecter la vitesse maxi de 100 km/h (vitesse But) √† une distance de 2850 m√®tres (distance But).\nLe DMI utilise un code couleur, avec la signification suivante :\nblanc/gris clair/gris fonc√© : aucune action imm√©diate n‚Äôest exig√©e du conducteur jaune : le conducteur doit intervenir si la vitesse r√©elle est proche de la vitesse autoris√©e (risque de passer √† la couleur orange en l‚Äôabsence de r√©action) orange : l‚Äôintervention est insuffisante (risque de passer √† la couleur rouge en l‚Äôabsence de r√©action du conducteur) rouge : r√©action trop tardive du conducteur, prise en charge par le syst√®me (peut revenir au jaune, au gris ou au blanc apr√®s une action appropri√©e) ETCS niveau 1 Transmission sol-bord Ce niveau utilise une transmission ponctuelle √† l‚Äôaide de balises plac√©es au pied des signaux et en amont. Ces balises (eurobalises) communiquent les donn√©es de signalisation au train.\nD√©tection des trains Le niveau 1 n√©cessite l‚Äôutilisation d‚Äôun syst√®me de d√©tection des trains au sol (tel que des circuits de voie, compteurs d‚Äôessieux et autres). Toutes ces informations sont donc transmises ponctuellement au train. La cadence de l‚Äôinformation donn√©e pouvant √™tre augment√©e en jouant sur le nombre de balises, ou en installant une boucle (euroloop), √©quivalent d‚Äôune balise, mais longeant la ligne sur une certaine distance.\nETCS niveau 2 Transmission sol-bord Les donn√©es de signalisation sont transmises de mani√®re permanente, via le r√©seau GSM-R. Le train communique constamment sa position (qu‚Äôil d√©termine avec un odom√®tre) au centre de contr√¥le qui lui communique en retour les actions √† effectuer (vitesse, arr√™t, etc.).\nDes eurobalises sont toujours pr√©sentes sur la voie pour recaler √©ventuellement l‚Äôodom√©trie embarqu√©e.\nD√©tection des trains Un syst√®me de d√©tection des trains au sol s‚Äôappuie sur l‚Äôexistence des circuits de voie pour localiser un train aval sur un canton. Cette information est transmise au radio block center (RBC) qui g√®re ensuite l‚Äôespacement entre deux circulations. Le train suiveur re√ßoit une nouvelle autorisation de circulation par l‚Äôinterm√©diaire de la liaison radio GSM-R. D√®s que le train aval lib√®re un canton le poste central de commande re√ßoit l‚Äôinformation correspondante du sol qui est transmise par liaison radio au train suiveur.\nAvantage Le niveau 2 rend disponible quasi imm√©diatement une information ¬´ lib√©ratoire ¬ª pour le train suiveur et contribue ainsi √† augmenter la fluidit√©. Cette imm√©diatet√© est la diff√©rence par rapport √† la signalisation conventionnelle, o√π une demi-minute est parfois n√©cessaire pour lib√©rer un aiguillage alors que le train est d√©j√† bien loin.\nLes modes techniques Les modes techniques utilis√©s sur le RFN sont :\nMode FS : Conduite en supervision compl√®te.\nToutes les donn√©es train et voie sont disponibles √† bord.\nLe DMI affiche :\nla vitesse r√©elle du train et la vitesse autoris√©e lors de l‚Äôapproche d‚Äôun EOA, d‚Äôun rep√®re d‚Äôarr√™t ETCS ou un heurtoir, la vitesse but et la distance but Le syst√®me ¬´ bord ¬ª supervise la vitesse, le d√©placement du train, le respect de l‚ÄôEOA mat√©rialis√© par un rep√®re d‚Äôarr√™t ETCS, un signal d‚Äôarr√™t ou un heurtoir en ETCS1.\nMode OS : Conduite en marche √† vue.\nToutes les donn√©es train et voie sont disponibles √† bord sauf l‚Äôassurance de la lib√©ration de toute ou partie de la voie allou√©e au train.\nLe DMI affiche les m√™mes indications qu‚Äôen mode FS.\nLe syst√®me ¬´ bord ¬ª assure √©galement la supervision comme en mode FS.\nMode SR : Conduite sous la responsabilit√© des agents.\nCe mode technique est utilis√© pour les situations d√©grad√©es et la proc√©dure ¬´ Mise en service ¬ª lorsque le bord n‚Äôa pas re√ßu d‚Äôallocation de voie. Le syst√®me ¬´ bord ¬ª ne supervise que la vitesse du mode SR et le franchissement des rep√®res d‚Äôarr√™t ETCS et des signaux d‚Äôarr√™t.\nMode SH : Circulation en man≈ìuvre.\nCe mode technique est s√©lectionn√© par le conducteur pour les mouvements de man≈ìuvre. Le syst√®me ¬´ bord ¬ª ne supervise que la vitesse du train.\nMode NL : Conduite d‚Äôun engin moteur non en t√™te du mouvement\nCe mode technique est utilis√© en cas de pousse ou de double traction.\nProtection contre le rattrapage En mode FS, une vitesse autoris√©e affich√©e sans la pr√©sentation de l‚ÄôEOA signifie ¬´ marche normale ¬ª.\nLa MA constitu√©e d‚Äôun ou plusieurs cantons est allou√©e canton par canton, par ajout successif d‚Äôun canton. Si le canton en aval du dernier canton allou√© est occup√© le train doit √™tre en mesure de s‚Äôarr√™ter avant l‚Äôentr√©e de ce canton. Le conducteur est alors avis√© par une indication sonore au DMI.\nD√®s lors, les indications de conduite (vitesse but √©gale √† 0 et une distance but) permettant de respecter la courbe de freinage sont affich√©es.\nLe conducteur doit ralentir de fa√ßon √† √™tre en mesure de s‚Äôarr√™ter avant l‚ÄôEOA, tout en respectant la vitesse autoris√©e.\n","categories":"","description":"European Train Control System","excerpt":"European Train Control System","ref":"/fr/docs/railway-wiki/signalling/spacing/ertms/etcs/","tags":"","title":"ETCS"},{"body":"1. Les installations permanentes de contresens (IPCS) Principe Certaines sections de ligne comportent des installations permanentes de contresens (IPCS). Ces installations accessibles sans arr√™t des trains √† l‚Äôentr√©e, permettent √† tout moment la circulation des trains √† contresens sans que les conducteurs en soient pr√©avis√©s autrement que par la signalisation.\nLe risque de nez √† nez Des enclenchements de s√©curit√© s‚Äôopposent √† l‚Äôexp√©dition de deux trains de sens contraire √† la rencontre l‚Äôun de l‚Äôautre.\nLe risque de rattrapage L‚Äôespacement des trains circulant dans le sens normal est assur√© dans les conditions habituelles.\nL‚Äôespacement des trains √† contresens est assur√© automatiquement.\nAvis au conducteur Les sections de ligne √©quip√©es d‚ÄôIPCS sont d√©sign√©es aux RT.\nLa circulation (entr√©e et sortie) sur IPCS est indiqu√©e au conducteur par la signalisation.\n2. Les installations temporaires de contresens (ITCS) Principe L‚ÄôITCS est un r√©gime temporaire d‚Äôexploitation permettant en double voie de faire circuler sur une voie des trains en sens inverse du sens normal.\nCes installations, accessibles sans arr√™t des trains √† l‚Äôentr√©e, permettent √† tout moment la circulation des trains √† contresens. Elles sont install√©es en pr√©vision de chantier de travaux qui vont n√©cessiter l‚Äôobstruction d‚Äôune des deux voies.\nLe risque de nez √† nez Des enclenchements de s√©curit√© s‚Äôopposent √† l‚Äôexp√©dition de deux trains de sens contraire √† la rencontre l‚Äôun de l‚Äôautre.\nLes ITCS ont leurs extr√©mit√©s dans les gares les plus rapproch√©es encadrant le chantier de travaux pr√©vu ou bien dans des postes de pleine voie existants ou cr√©√©s √† cet effet, consid√©r√©s d√®s lors comme des gares. Si le chantier se d√©place, les extr√©mit√©s de l‚ÄôITCS sont report√©es au fur et √† mesure de la progression du chantier par phases successives, chaque phase faisant l‚Äôobjet d‚Äôune ITCS distincte.\nLe risque de rattrapage L‚Äôespacement des trains circulant dans le sens normal est assur√© dans les conditions habituelles.\nL‚Äôespacement des trains √† contresens est assur√© automatiquement.\nAvis au conducteur Les informations n√©cessaires aux conducteurs sont fournies par le gestionnaire d‚Äôinfrastructure aux entreprises ferroviaires. Les particularit√©s de signalisation et d‚Äôexploitation de l‚ÄôITCS sont mentionn√©es.\nUn sch√©ma adapt√© √† ses besoins peut compl√©ter ces informations.\nLa circulation (entr√©e et sortie) sur ITCS est indiqu√©e au conducteur par la signalisation.\n3. Circulation √† contresens sur une ICS L‚Äôentr√©e d‚Äôun parcours √† contresens sur une ICS est rep√©r√©e par un tableau lumineux d‚Äôentr√©e √† contresens (TECS). Ce tableau, normalement √©teint, est group√© avec le panneau qui porte le carr√© prot√©geant l‚Äôaiguille d‚Äôentr√©e.\nExemple d‚Äôentr√©e √† contresens √† 60 km/h sur une section de ligne o√π la circulation normale se fait √† gauche\nLes signaux s‚Äôadressant aux conducteurs des trains circulant √† contresens sont :\nimplant√©s √† droite (disposition inverse sur les lignes o√π la circulation se fait normalement √† droite) ; r√©p√©t√©s sur les engins moteurs. Les ICS peuvent comporter √† contresens un ou plusieurs cantons.\nLa sortie d‚Äôun parcours √† contresens est rep√©r√©e par un tableau lumineux de sortie de contresens (TSCS). Ce tableau est group√© avec le panneau qui porte le signal ¬´ carr√© ¬ª prot√©geant l‚Äôaiguille de sortie.\n","categories":"","description":"","excerpt":"1. Les installations permanentes de contresens (IPCS) Principe ‚Ä¶","ref":"/fr/docs/railway-wiki/signalling/operation-modes/double-track-lines/opposite-direction-installations/","tags":"","title":"Les installations de contresens (ICS)"},{"body":"D√©finition R√©gime d‚Äôexploitation d‚Äôune ligne dans lequel les trains des deux sens circulent sur la m√™me voie, les dispositions √† prendre pour √©viter la rencontre de deux trains de sens contraire ne sont pas automatiques, mais r√©sultent de proc√©dures √† appliquer par les personnels affect√©s √† la circulation des trains, voire par les personnels des trains dans certains cas de lignes faiblement √©quip√©es. Ces dispositions sont d√©finies par le gestionnaire d‚Äôinfrastructure.\nPrincipe Le risque de nez √† nez Les documents horaires sont con√ßus en respectant des obligations fondamentales telles que le croisement obligatoire de deux trains en gare, qui permettent d‚Äô√©viter le nez √† nez pour les trains de sens contraires.\nCe risque est donc avant tout couvert par le respect de l‚Äôordre normal de circulation des trains figurant aux documents horaires.\nEn effet, le principe d‚Äôexploitation d‚Äôune ligne √† voie unique s‚Äôeffectue selon des modalit√©s d√©finies par le gestionnaire d‚Äôinfrastructure, qui pr√©voient notamment le respect absolu de l‚Äôordre th√©orique de succession des trains et en cons√©quence de l‚Äôordre chronologique d‚Äôoccupation de la voie unique. Une circulation qui n‚Äôest pas √† son ordre, ne peut occuper la voie unique sans proc√©dure.\nEn cas de modification de l‚Äôordre th√©orique (retard, train supprim√©, etc.), des proc√©dures permettent d‚Äôorganiser le nouvel ordre de circulation des trains (proc√©dures de reports de croisement, d√©passements, etc.).\nLe respect des proc√©dures reposant sur l‚Äôhumain, certaines lignes sont √©quip√©es d‚Äôune ¬´ barri√®re ¬ª technique de s√©curit√© le block manuel de voie unique (BMVU - voir 4.4.2.). Des moyens d‚Äôarr√™t compl√©mentaires (DAAT, GSM/GFU, RST, coupure d‚Äôurgence si la ligne est √©lectrifi√©e, ‚Ä¶) peuvent √™tre utilis√©s ou mis en place afin de r√©duire les cons√©quences d‚Äôune erreur humaine. Le risque de rattrapage Le risque de collision par rattrapage est couvert par le mode de cantonnement. Les diff√©rents modes de cantonnement existants sont :\nle cantonnement t√©l√©phonique (Voir - 4.3.) ; le cantonnement assist√© par informatique (CAPI - voir 4.3.) ; le cantonnement assist√© par informatique initi√© en 1995 (CAPI 95 - voir 4.3.) ; le block manuel de voie unique (BMVU - voir 4.4.2.). ","categories":"","description":"","excerpt":"D√©finition R√©gime d‚Äôexploitation d‚Äôune ligne dans lequel les trains ‚Ä¶","ref":"/fr/docs/railway-wiki/signalling/operation-modes/single-track-lines/single-track/","tags":"","title":"La voie unique"},{"body":"","categories":"","description":"Global System for Mobiles - Railways","excerpt":"Global System for Mobiles - Railways","ref":"/fr/docs/railway-wiki/signalling/spacing/ertms/gsm-r/","tags":"","title":"GSM-R"},{"body":"D√©finition Certaines lignes √† voie unique sont d√©sign√©es √† la documentation d‚Äôexploitation comme ¬´ Lignes √† voie unique √† signalisation simplifi√©e ¬ª. Par rapport au r√©gime g√©n√©ral de la voie unique, ce type de ligne se distingue par la mise en ≈ìuvre d‚Äôun minimum d‚Äô√©quipements. Ils se limitent √† une pancarte ¬´ gare ¬ª √† distance et √† un rep√®re d‚Äôentr√©e.\nPrincipe Le risque de nez √† nez Elles sont exploit√©es selon les modalit√©s du r√©gime g√©n√©ral d‚Äôexploitation de la voie unique (notamment le respect de l‚Äôordre th√©orique de circulation).\nLeur fonctionnement repose en outre sur l‚Äôarr√™t g√©n√©ral des circulations dans toutes les gares.\nLe risque de rattrapage La gestion de l‚Äôespacement est assur√©e par le cantonnement t√©l√©phonique.\nIl n‚Äôy a aucune barri√®re technique de s√©curit√©, toute erreur humaine peut avoir des cons√©quences graves. Des boucles de rattrapage peuvent permettre de pallier ces erreurs (DAAT, CAPI, GSM/GFU, RST, coupure d‚Äôurgence si la ligne est √©lectrifi√©e, etc.).\n","categories":"","description":"","excerpt":"D√©finition Certaines lignes √† voie unique sont d√©sign√©es √† la ‚Ä¶","ref":"/fr/docs/railway-wiki/signalling/operation-modes/single-track-lines/single-track-with-simplified-signalling/","tags":"","title":"La voie unique √† signalisation simplifi√©e (VUSS)"},{"body":"Principe Les installations de voie unique temporaire √† caract√®re permanent (VUTP) permettent la circulation occasionnelle des trains des deux sens sur une seule voie, entre deux gares, sans arr√™t √† l‚Äôentr√©e et sans pr√©avis aux conducteurs.\nLes sections de ligne √©quip√©es de VUTP sont d√©sign√©es aux RT.\nLe risque de nez √† nez Des enclenchements de s√©curit√© s‚Äôopposent √† l‚Äôexp√©dition de deux trains de sens contraire √† la rencontre l‚Äôun de l‚Äôautre.\nLe risque de rattrapage L‚Äôespacement des trains circulant dans le sens normal est assur√© dans les conditions habituelles.\nL‚Äôespacement des trains √† contresens est assur√© automatiquement.\nCirculation √† contresens L‚Äôentr√©e d‚Äôun parcours √† contresens est rep√©r√©e par un tableau VUT group√© avec le panneau qui porte le carr√© prot√©geant l‚Äôaiguille d‚Äôentr√©e.\nLa pr√©sentation du tableau VUT indique au conducteur :\nque le train est dirig√© et est autoris√© √† s‚Äôengager √† contresens ; qu‚Äô√† partir de ce tableau, les signaux qui le concernent sont implant√©s √† droite. Exemple d‚Äôentr√©e √† 30 km/h sur VUTP\nLa vitesse limite √† ne pas d√©passer est fix√©e √† 70 km/h.\nLa sortie du parcours √† contresens est rep√©r√©e par un tableau ¬´ FIN de VUT ¬ª group√© avec le panneau qui porte le signal carr√© prot√©geant l‚Äôaiguille de sortie.\nLa pr√©sentation du tableau ¬´ FIN de VUT ¬ª indique au conducteur :\nque le train est parvenu √† la fin du parcours √† contresens ; qu‚Äô√† partir de ce tableau, les signaux qui le concernent sont implant√©s √† gauche. ","categories":"","description":"","excerpt":"Principe Les installations de voie unique temporaire √† caract√®re ‚Ä¶","ref":"/fr/docs/railway-wiki/signalling/operation-modes/double-track-lines/temporary-single-track-of-permanent-nature/","tags":"","title":"La voie unique temporaire √† caract√®re permanent (VUTP)"},{"body":"","categories":"","description":"General Packet Radio Service","excerpt":"General Packet Radio Service","ref":"/fr/docs/railway-wiki/signalling/spacing/ertms/gprs/","tags":"","title":"GPRS"},{"body":"Principe Lorsqu‚Äôune cause quelconque (incident, ex√©cution de travaux, etc.), interdit l‚Äôutilisation d‚Äôune voie et en l‚Äôabsence d‚Äôinstallations permettant la circulation dans les deux sens en s√©curit√© sur l‚Äôautre voie (ICS, voie banalis√©e), la circulation des trains est organis√©e par les agents du service de gestion des circulations situ√©s aux extr√©mit√©s selon des proc√©dures adapt√©es.\nLa VUT est donc un r√©gime temporaire d‚Äôexploitation permettant, sur une ligne √† double voie non √©quip√©e d‚Äôinstallation de contresens, de faire circuler les trains des deux sens sur une seule et m√™me voie.\nLes trains devant circuler √† contre sens sont arr√™t√©s √† l‚Äôentr√©e.\nLa circulation sur la VUT dans les deux sens se fait selon le principe de la demande et de l‚Äôaccord de voie entre agents du service de la gestion des circulations.\nLa vitesse limite √† contre sens est de 70 km/h.\nLa sortie de la VUT est rep√©r√©e soit :\npar un signal carr√© implant√© √† gauche, √† droite ou au-dessus de la voie ; par un signal d‚Äôarr√™t √† main. Organisation La VUT est √©tablie entre les deux changements de voies utilisables les plus rapproch√©s qui en constituent les extr√©mit√©s.\nLa VUT est organis√©e par l‚Äôagent du service de la gestion des circulations qui exp√©die les trains √† contresens sur cette voie (gare B dans l‚Äôexemple ci-dessous) et qui doit aviser ou faire aviser les agents int√©ress√©s : agents des postes, des PN gard√©s, agents travaillant sur la voie ou les cat√©naires.\nCirculation sur la VUT Le risque de nez √† nez L‚Äôexp√©dition de tout train sur la VUT est subordonn√©e √† un accord de voie donn√© par l‚Äôagent du service de gestion des circulations de l‚Äôautre extr√©mit√© de la VUT √† l‚Äôagent-du service de gestion des circulations qui doit exp√©dier le train.\nLe risque de rattrapage Les trains de sens normal sont cantonn√©s dans les conditions habituelles.\nLes trains circulant √† contresens sont cantonn√©s t√©l√©phoniquement dans les conditions pr√©vues pour la voie unique (voir 4.3.).\nAvis au conducteur En sens normal : aucun avis n‚Äôest fait au conducteur, les trains circulent sans arr√™t √† l‚Äôentr√©e.\n√Ä contre sens : le conducteur est arr√™t√© √† l‚Äôentr√©e de la VUT puis inform√© par √©crit par l‚Äôagent du service de la gestion des circulations qu‚Äôil va circuler √† contresens en VUT.\nCet ordre √©crit reprend les points ou zones du parcours sur lesquels le conducteur doit appliquer des prescriptions particuli√®res.\nEn effet, les installations et la signalisation ne sont g√©n√©ralement pas pr√©vues pour les circulations en sens inverse du sens normal (PN, limitations de vitesse, etc.).\n","categories":"","description":"","excerpt":"Principe Lorsqu‚Äôune cause quelconque (incident, ex√©cution de travaux, ‚Ä¶","ref":"/fr/docs/railway-wiki/signalling/operation-modes/double-track-lines/temporary-single-track/","tags":"","title":"La voie unique temporaire (VUT)"},{"body":"D√©finition Ce r√©gime concerne des lignes ferm√©es au service voyageurs qui ne comportent normalement pas de signaux. Les r√®gles concernant le r√©gime g√©n√©ral d‚Äôexploitation de la voie unique ne sont pas applicables et sont remplac√©es par des modalit√©s particuli√®res d√©finies par le gestionnaire d‚Äôinfrastructure.\nPrincipe Une consigne locale d‚Äôexploitation adapt√©e √† chaque VUTR pr√©cise les caract√©ristiques d‚Äôexploitation comme la vitesse de la ligne, la signalisation, les √©tablissements, les liaisons t√©l√©phoniques, les PN, etc.\nElle est compl√©t√©e par un programme de circulation qui comporte les horaires des trains devant circuler et pr√©cise les dispositions particuli√®res concernant chaque train (trains entre lesquels l‚Äôespacement doit √™tre assur√©, croisements, etc.).\nCes lignes ne comportent normalement pas de signaux, les limitations de vitesse √† observer sur les aiguilles ainsi que les autres limitations permanentes de vitesse sont inscrites √† la consigne locale d‚Äôexploitation de la ligne ; elles ne sont pas rappel√©es par des signaux sur le terrain.\nPar principe, la vitesse de circulation ne d√©passe g√©n√©ralement pas 50 km/h.\nAucun enclenchement n‚Äôest pr√©vu. Chaque ligne d√©pend d‚Äôun agent de SNCF R√©seau d√©nomm√© ¬´ chef de ligne ¬ª. La s√©curit√© des circulations est assur√©e par le chef de ligne et par les agents des trains.\nNota : Les VUTR ne sont pas d√©finies dans les RT.\n","categories":"","description":"","excerpt":"D√©finition Ce r√©gime concerne des lignes ferm√©es au service voyageurs ‚Ä¶","ref":"/fr/docs/railway-wiki/signalling/operation-modes/single-track-lines/single-track-with-restricted-traffic/","tags":"","title":"La voie unique √† trafic restreint (VUTR)"},{"body":"","categories":"","description":"Futur Syst√®me de Communications Mobiles Ferroviaires","excerpt":"Futur Syst√®me de Communications Mobiles Ferroviaires","ref":"/fr/docs/railway-wiki/signalling/spacing/ertms/frmcs/","tags":"","title":"FRMCS"},{"body":"Principe Lorsqu‚Äôune cause quelconque (incident, secours, travaux inopin√©s de courte dur√©e, etc.), interdit l‚Äôutilisation d‚Äôune voie, en l‚Äôabsence d‚Äôinstallation permettant la circulation dans les deux sens sur l‚Äôautre voie (ICS, voie banalis√©e) et qu‚Äôil n‚Äôest pas envisag√© d‚Äôorganiser une VUT (par exemple, du fait que tr√®s peu de circulations seront concern√©es), la circulation d‚Äôun train n‚Äôempruntant pas le sens normal se fait alors √† contre-voie sur la voie non intercept√©e. Les trains devant circuler √† contre-voie sont arr√™t√©s √† l‚Äôentr√©e.\nLe mouvement √† contre-voie peut √™tre effectu√© :\nd‚Äôun point quelconque vers un point situ√© en amont (ces points pouvant √™tre un point de pleine voie, une gare, un √©vitement t√©l√©command√©) ; √† l‚Äôint√©rieur d‚Äôune gare. Organisation Mouvements √† contre-voie √† l‚Äôint√©rieur d‚Äôune gare Lorsqu‚Äôun mouvement √† contre-voie doit √™tre effectu√© √† l‚Äôint√©rieur d‚Äôune gare, il est organis√© √† l‚Äôinitiative de l‚Äôagent du service de gestion des circulations.\nLe conducteur est avis√© par l‚Äôagent du service de la gestion des circulations qu‚Äôil doit effectuer un mouvement √† contre-voie et que le mouvement s‚Äôeffectue :\nsoit comme une man≈ìuvre. Dans ce cas le conducteur sera renseign√© et guid√© par des signaux de man≈ìuvre ; soit par la transmission d‚Äôun ordre √©crit ou d‚Äôune d√©p√™che. Autres mouvements √† contre-voie d‚Äôune gare vers la gare en amont ou de la gare en avant vers un point de pleine voie L‚Äôagent charg√© d‚Äôorganiser ce mouvement √† contre-voie est l‚Äôagent du service de gestion des circulations de la gare dans laquelle le mouvement a son origine. d‚Äôun point de pleine voie vers la gare en arri√®re L‚Äôagent charg√© d‚Äôorganiser ce mouvement √† contre-voie est l‚Äôagent du service de gestion des circulations de la gare dans laquelle le mouvement se termine. Dans ces deux cas, l‚Äôagent du service de la gestion des circulations, apr√®s avoir obtenu l‚Äôassurance que la partie de voie √† parcourir est libre et le restera, remet un ordre √©crit ou transmet une d√©p√™che au conducteur pour circuler √† contre-voie. En pleine voie Le conducteur est responsable de ce mouvement, lorsqu‚Äôil prend l‚Äôinitiative d‚Äôex√©cuter ce mouvement : √† la suite d‚Äôune rupture d‚Äôattelage lorsque le train peut √™tre reconstitu√© ; √† la suite d‚Äôun l√©ger d√©passement du point d‚Äôarr√™t habituel dans un √©tablissement PL. Circulation √† contre-voie Apr√®s arr√™t du train, l‚Äôagent du service de la gestion des circulations, selon le cas, remet au conducteur un ordre √©crit ou le transmet par d√©p√™che. Cet ordre reprend les points ou zones du parcours sur lesquels le conducteur doit appliquer des prescriptions particuli√®res.\nEn effet, les installations et la signalisation ne sont g√©n√©ralement pas pr√©vues pour les circulations en sens inverse du sens normal (PN, limitations de vitesse, etc.).\nLorsque le conducteur est en t√™te du mouvement, la circulation s‚Äôeffectue en marche √† vue sur tout le parcours effectu√© √† contre-voie (le conducteur peut rencontrer un obstacle non prot√©g√©).\nLorsque le conducteur n‚Äôest pas en t√™te, la circulation est guid√©e par des signaux de man≈ìuvre.\nLa fin du parcours √† contre voie est g√©n√©ralement rep√©r√©e soit :\npar un signal carr√© ; par un signal d‚Äôarr√™t √† main. ","categories":"","description":"","excerpt":"Principe Lorsqu‚Äôune cause quelconque (incident, secours, travaux ‚Ä¶","ref":"/fr/docs/railway-wiki/signalling/operation-modes/double-track-lines/opposite-track-movement/","tags":"","title":"Mouvement √† contre-voie"},{"body":"D√©finition R√©gime d‚Äôexploitation d‚Äôune ligne sur laquelle la circulation d‚Äôun train ne peut √™tre autoris√©e qu‚Äôapr√®s d√©gagement du train pr√©c√©demment engag√©, l‚Äôengagement et le d√©gagement se faisant au m√™me point.\nPrincipe L‚Äôexploitation en navette consiste √† n‚Äôautoriser la pr√©sence que d‚Äôune seule circulation sur la section de ligne concern√©e, cette circulation revenant √† son point de d√©part, ce qui par conception limite les risques de collision de trains.\nToutefois, le programme peut inclure moyennant des proc√©dures adapt√©es des mouvements de desserte, avec ou sans possibilit√© de garage (desserte origine terminus ou desserte en antenne).\nL‚Äôacc√®s √† la voie exploit√©e en navette est command√© par un signal muni du DAAT ou du KVB.\n","categories":"","description":"","excerpt":"D√©finition R√©gime d‚Äôexploitation d‚Äôune ligne sur laquelle la ‚Ä¶","ref":"/fr/docs/railway-wiki/signalling/operation-modes/single-track-lines/single-track-shuttle/","tags":"","title":"L‚Äôexploitation en navette"},{"body":"","categories":"","description":"European Train Management Layer","excerpt":"European Train Management Layer","ref":"/fr/docs/railway-wiki/signalling/spacing/ertms/etml/","tags":"","title":"ETML"},{"body":"D√©finition R√©gime d‚Äôexploitation d‚Äôune ligne √† une ou plusieurs voies parcourues par les trains des deux sens. Sur ces voies, des installations de s√©curit√© s‚Äôopposent √† l‚Äôexp√©dition de deux trains de sens contraire √† la rencontre l‚Äôun de l‚Äôautre. Sur les lignes √† plusieurs voies banalis√©es, les trains d‚Äôun m√™me sens peuvent circuler indiff√©remment sur l‚Äôune quelconque de ces voies.\nPrincipe Une voie banalis√©e peut √™tre d√©coup√©e en plusieurs intervalles (points entre lesquels il n‚Äôexiste aucune possibilit√© de croisement ou d√©passement).\nSur une voie, quel que soit le sens :\nles signaux sont normalement implant√©s √† gauche ; le d√©coupage √©ventuel d‚Äôun intervalle en cantons est identique. Le risque de nez √† nez Les deux extr√©mit√©s d‚Äôun intervalle de voie banalis√©e sont √©quip√©es de signaux d‚Äôarr√™t non permissifs permettant d‚Äôarr√™ter et de retenir les trains se dirigeant vers l‚Äôintervalle. Elles sont reli√©es par un enclenchement entre itin√©raires de sens contraires.\nLe risque de nez √† nez est pris en charge notamment, par l‚Äôenclenchement entre itin√©raires de sens contraire. Cet enclenchement agit directement sur le circuit de commande des signaux de protection donnant acc√®s √† l‚Äôintervalle. Il n√©cessite la mise en oeuvre de circuits de voie ou de compteurs d‚Äôessieux qui interviennent en outre dans le block automatique (cf. rattrapage ci-dessous).\nLes installations de s√©curit√© s‚Äôopposent √† l‚Äôexp√©dition de deux trains de sens contraire dans le m√™me intervalle. Cette interdiction est maintenue tant que l‚Äôintervalle est occup√©.\nLe risque de rattrapage L‚Äôespacement est assur√© automatiquement. En signalisation au sol, l‚Äôespacement des trains de m√™me sens est assur√© par le block automatique par l‚Äôinterm√©diaire de circuits de voie ou de compteur d‚Äôessieux. Selon l‚Äôimportance du trafic, il peut s‚Äôagir de :\nBAPR : La longueur d‚Äôun canton de BAPR peut atteindre 15 km ou plus ; BAL : La longueur maximale d‚Äôun canton de BAL n‚Äôexc√®de pas g√©n√©ralement 2,8 km ce qui permet un √©coulement de trafic plus important. En signalisation de cabine, la TVM ou l‚ÄôETCS assurent l‚Äôespacement.\n","categories":"","description":"","excerpt":"D√©finition R√©gime d‚Äôexploitation d‚Äôune ligne √† une ou plusieurs voies ‚Ä¶","ref":"/fr/docs/railway-wiki/signalling/operation-modes/single-track-lines/single-track-two-ways/","tags":"","title":"La voie banalis√©e"},{"body":"","categories":"","description":"","excerpt":"","ref":"/en/blog/","tags":"","title":"OSRD Blog"},{"body":"","categories":"","description":"","excerpt":"","ref":"/fr/blog/","tags":"","title":"Blog OSRD"},{"body":" Open Source Railway Designer About Github An open source web application for railway infrastructure design, capacity analysis, timetabling and more! Railway design Design railway infrastructure and timetables\nCapacity Analysis Detect conflicts and visualize capacity\nShort-term planning Automatically add new trains to an existing timetable\nOpen source development Anyone can use, develop and distribute OSRD\nRead more ‚Ä¶\nOpen governance OSRD is publicly designed, decisions are taken collectively\nRead more ‚Ä¶\nDesigned for interoperability Make custom infrastructure formats and signaling systems work together\nSponsors ","categories":"","description":"","excerpt":" Open Source Railway Designer About Github An open source web ‚Ä¶","ref":"/en/","tags":"","title":"OSRD"},{"body":" Open Source Railway Designer √Ä propos Github Une application web, open source, de conception d'infrastructure ferroviaire, d'horaires, d'analyse de capacit√© et bien plus‚ÄØ! Conception ferroviaire Modifiez l‚Äôinfrastructure ferroviaire et les grilles horaires\nAnalyse de capacit√© D√©tectez les conflits et visualisez la capacit√©\nPlanning court-terme Ajoutez automatiquement de nouveaux trains dans une grille existante\nD√©veloppement Open source Tout le monde peut utiliser, redistribuer et d√©velopper OSRD\nLire plus ‚Ä¶\nGouvernance ouverte OSRD est con√ßu de mani√®re partag√©e et publique, les d√©cisions sont prises coll√©gialement\nLire plus ‚Ä¶\nCon√ßu pour l‚Äôinterop√©rabilit√© Faites vos simulations √† l‚Äôaide de formats d‚Äôinfrastructure et de syst√®mes de signalisation propri√©taires\nSponsors ","categories":"","description":"","excerpt":" Open Source Railway Designer √Ä propos Github Une application web, ‚Ä¶","ref":"/fr/","tags":"","title":"OSRD"},{"body":"Dreil√§nder hack, the annual meeting of German-speaking railway companies‚Ä¶ but not only! On 29 and 30 June, the ‚ÄúDreil√§nder hack‚Äù (the hackathon of the three countries) was held in Wien (Austria). Organised by DB (Germany), √ñBB (Austria) and SBB (Switzerland), this is an annual event dedicated to collaboration on shared railway-related challenges.\nWe were delighted to be invited to take part thanks to the OpenRail Foundation, and this year‚Äôs theme being ‚ÄúOpen Railways‚Äù, it would have been hard to refuse!\n24 hours to work together on a topic of common interest The 150 participants were divided into 16 working groups on a wide variety of topics such as:\nImagining a simple interface for ordering train paths (an important subject for the future of OSRD); Offering passenger information adapted to different disabilities; Optimizing the prioritisation of trains at junctions according to the number of passengers on board and on the platform (Motis project); Automatically identifying energy-consuming trains in storage; Calculating forecast maintenance dates from a historical database for each train component; Detecting speed measurement and GPS positioning errors on track inspection trains; Optimizing maintenance work to limit lost capacity; Facilitating passenger information with a GPT chatbot; Designing an easy-to-use display and ticketing interface for night trains across Europe. Challenge proposal by OSRD The challenge proposed by OSRD was to consolidate the railway data in OpenStreetMap, an open \u0026 collaborative database that we use as a source for railway infrastructure in Europe.\nThe objective was to develop an algorithm to identify 5 types of probable errors in the data:\nDisconnected tracks Suspicious switches Stations apart from tracks Weird angles Missing gauge info The subject was of interest and we formed a team of 10 people divided between the four participating companies. After a presentation of the challenge and of the OpenStreetMap data model, we looked for existing tools and chose to use Osmose, an open source application for detecting and displaying potential errors in OSM. We then split up to work on the 5 types of errors.\nFrom left to right: Christoph (DB), Klara (√ñBB), Frederik (SBB), Carl (SBB), Julius (DB), Jennifer (DB), Daniel (√ñBB), C√©line (SNCF), Max (DB), Tristram (SNCF).\nResults After 24 hours of work, the result is an interactive map showing the various errors (click on the pictograms to show error details). You can find all the code that was produced on the Open Rail Foundation‚Äôs GitHub.\nWe did not manage to integrate our analysers into Osmose within the allotted time, but that remains the target on which we‚Äôre going to continue working, so that all OpenStreetMap contributors can easily correct errors in railway data!\n","categories":"","description":"","excerpt":"Dreil√§nder hack, the annual meeting of German-speaking railway ‚Ä¶","ref":"/en/blog/2023/07/19/osrd-at-dreil%C3%A4nder-hack-in-wien/","tags":"","title":"OSRD at Dreil√§nder Hack in Wien"},{"body":"Le Dreil√§nder hack, le rendez-vous des entreprises ferroviaires germanophones‚Ä¶ mais pas que ! Les 29 et 30 juin derniers s‚Äôest tenu √† Vienne (Autriche) le Dreil√§nder hack (le hackathon des trois pays). Organis√© par Deutsche Bahn - DB (Allemagne), √ñsterreichische Bundesbahnen - √ñBB (Autriche) et Schweizerische Bundesbahnen - SBB (Suisse), c‚Äôest un rendez-vous annuel d√©di√© √† la collaboration sur des probl√©matiques ferroviaires communes.\nNous avons eu le plaisir d‚Äô√™tre invit√©¬∑es √† participer dans le cadre de la fondation OpenRail, et le th√®me de cette ann√©e √©tant ‚ÄúOpen Railways‚Äù il aurait √©t√© difficile de refuser !\n24h pour travailler ensemble sur un sujet d‚Äôint√©r√™t commun Les 150 participant¬∑es se sont r√©parti¬∑es en 16 groupes de travail sur des th√®mes tr√®s vari√©s tels que :\nImaginer une interface simple de commande de sillons (un sujet important pour l‚Äôavenir d‚ÄôOSRD) ; Proposer de l‚Äôinformation voyageur adapt√©e aux diff√©rents handicaps ; Optimiser la priorisation des trains aux embranchements en fonction de l‚Äôaffluence √† bord et √† quai (projet Motis) ; Identifier automatiquement des trains au garage qui consomment de l‚Äô√©nergie ; Calculer des dates de maintenance pr√©visionnelles √† partir d‚Äôune base de donn√©es historique sur chaque composant du train ; D√©tecter des erreurs de mesure de vitesse et de positionnement GPS sur des trains d‚Äôinspection des voies ; Optimiser les chantiers de maintenance pour limiter la capacit√© perdue ; Faciliter l‚Äôinformation voyageurs avec un chatbot GPT ; Imaginer une interface de visualisation \u0026 de commande pour l‚Äôoffre de trains de nuit au niveau europ√©en facile √† utiliser. Le challenge propos√© par OSRD Le challenge propos√© par OSRD visait √† consolider les donn√©es ferroviaires pr√©sentes dans OpenStreetMap, une base de donn√©es ouverte \u0026 collaborative que nous utilisons comme source pour l‚Äôinfrastructure ferroviaire en Europe.\nL‚Äôobjectif √©tait de d√©velopper un algorithme permettant d‚Äôidentifier 5 types d‚Äôerreurs probables dans les donn√©es :\nVoies proches g√©ographiquement mais non connect√©es topologiquement Aiguilles √† plus de 3 branches Gares √©loign√©es des voies Voies avec des angles trop importants Information d‚Äô√©cartement des voies manquante Le sujet a eu du succ√®s et nous avons form√© une √©quipe de 10 personnes r√©parties entre les quatre entreprises participantes. Apr√®s une pr√©sentation du challenge \u0026 du mod√®le de donn√©es d‚ÄôOpenStreetMap, nous avons recherch√© des outils existant et avons choisi de nous appuyer sur Osmose, une application open source de d√©tection et d‚Äôaffichage d‚Äôerreurs potentielles dans OSM. Nous nous sommes ensuite r√©parti¬∑es sur les 5 types d‚Äôerreurs.\nDe gauche √† droite : Christoph (DB), Klara (√ñBB), Frederik (SBB), Carl (SBB), Julius (DB), Jennifer (DB), Daniel (√ñBB), C√©line (SNCF), Max (DB), Tristram (SNCF).\nLes r√©sultats Apr√®s 24h de travail le r√©sultat est une carte interactive permettant d‚Äôafficher les diff√©rentes erreurs (cliquez sur les pictogrammes pour afficher le d√©tail des erreurs). Vous pouvez retrouver tout le code qui a √©t√© produit sur le GitHub de la fondation Open Rail.\nLe manque de temps imparti ne nous a malheureusement pas permis d‚Äôint√©grer nos analyseurs dans Osmose, cependant cela reste notre priorit√© pour faire avancer les travaux des contributeurs et contributrices d‚ÄôOpenStreetMap sur les donn√©es ferroviaires !\n","categories":"","description":"","excerpt":"Le Dreil√§nder hack, le rendez-vous des entreprises ferroviaires ‚Ä¶","ref":"/fr/blog/2023/07/19/osrd-au-dreil%C3%A4nder-hack-%C3%A0-vienne/","tags":"","title":"OSRD au Dreil√§nder Hack √† Vienne"},{"body":"Un I\u0026A prometteur Notre 5√®me Inspect \u0026 Adapt a commenc√© avec la pr√©sentation de notre PI System demo de l‚Äôapplication OSRD, d√©montrant l‚Äôensemble des travaux r√©alis√©s au cours de ce PI5 par nos √©quipes. √Ä la suite de cette demo, l‚Äôatteinte de nos objectifs (engag√©s et non engag√©s) a √©t√© √©valu√©e par nos partie-prenantes. Verdict : 113 % de r√©ussite‚Ä¶ Si, si, c‚Äôest possible üòâ !\nPlanification de notre 6√®me Product Increment (PIP6) ! Apr√®s les traditionnelles s√©quences portant sur l‚Äô√©volution de notre contexte de m√©tier et technique, nous avons assist√© √† l‚Äôintervention de Fran√ßois Marchal, Responsable domaine num√©rique exploitation √† la Digit, portant sur les enjeux du num√©rique au sein de SNCF R√©seau et le r√¥le d‚ÄôOSRD au sein de l‚Äôorganisation.\nLe lendemain, Nathana√´l Dias, Charg√© d‚Äô√©tude exploitation ferroviaire, nous a pr√©sent√© son m√©tier, et le processus d‚Äô√©laboration d‚Äôune √©tude exploitation. Il a insist√© sur l‚Äôimportance de partager les r√©sultats et les travaux.\nAu cours du PIP, de nouvelles fonctionnalit√©s ont √©t√© embarqu√©es par les √©quipes, et transform√©es en objectifs √† atteindre. Le travail a √©t√© planifi√© pour les 11 semaines √† venir et les risques ont √©t√© √©valu√©s pour √™tre minimis√©s.\nRendez-vous mi-juillet pour le 7√®me PIP !\n","categories":"","description":"","excerpt":"Un I\u0026A prometteur Notre 5√®me Inspect \u0026 Adapt a commenc√© avec la ‚Ä¶","ref":"/fr/blog/2023/04/24/ia5-et-pip6-avril-2023/","tags":"","title":"I\u0026A5 et PIP6 - avril 2023 "},{"body":"DGEX Solutions Forum Here‚Äôs an extract from Lo√Øc Hamelin‚Äôs talk at the DGEX Solutions forum, on the subject of search for last-minute train slots (STDCM).\nFirst of all, what is a train path? It‚Äôs the reservation of space/time on the network, by railway undertakings (RU) such as SNCF Voyageurs. These reservations are generally made years in advance (A-3). RUs can also make emergency requests for train paths (called last-minute paths), from A-1 to D-day. These requests are currently managed by ticket offices, and the paths are traced by hand. There is therefore a risk of human error, and requests are sometimes processed over several days.\nWhat do we offer? The OSRD software, in addition to featuring a rail simulator for timetable planning, will also enable last-minute path requests to be processed automatically! With just a few clicks, you‚Äôll be able to submit a last-minute path request and get a response in a matter of seconds (3 minutes at most)!\nIf you‚Äôre interested in the #osrd project, please visit the osrd website and the GitHub repo, and the project is #opensource.\nMorgane Senejko‚Äôs LinkedIn post\n","categories":"","description":"","excerpt":"DGEX Solutions Forum Here‚Äôs an extract from Lo√Øc Hamelin‚Äôs talk at the ‚Ä¶","ref":"/en/blog/2023/04/12/dgex-solutions-forum/","tags":"","title":"DGEX Solutions Forum"},{"body":"Forum DGEX Solutions Voici un extrait de la conf√©rence de Lo√Øc Hamelin au forum DGEX Solutions , au sujet du calcul automatique de sillon de derni√®re minute.\nMais tout d‚Äôabord qu‚Äôest ce qu‚Äôun sillon ? Il s‚Äôagit de la r√©servation d‚Äôespace/temps sur le r√©seau, par les entreprises ferroviaires (EF), comme SNCF Voyageurs. Ces r√©servations se font g√©n√©ralement des ann√©es en amont (A-3). Les EF peuvent √©galement faire des demandes de sillons en urgence (appel√©s sillons de derni√®re minute), de A-1 jusqu‚Äôau jour J. Ces demandes sont actuellement g√©r√©es par des guichets, et les sillons sont trac√©s √† la main. Il y a donc un risque d‚Äôerreur humaine, et les demandes sont parfois trait√©es en plusieurs jours.\nQu‚Äôest ce que nous proposons ? Le logiciel OSRD, en plus de disposer d‚Äôun simulateur ferroviaire pour la planification des horaires, va √©galement permettre de traiter les demandes de sillon de derni√®re minute de fa√ßon automatis√©e ! Il sera possible en seulement quelques clics d‚Äôexprimer une demande de sillon de derni√®re minute et obtenir une r√©ponse en quelques secondes (tout au plus 3min) !\nSi le projet #osrd vous int√©resse, n‚Äôh√©sitez pas √† consulter le site web osrd et le repo GitHub, et le projet est #opensource.\nPost LinkedIn de Morgane Senejko\n","categories":"","description":"","excerpt":"Forum DGEX Solutions Voici un extrait de la conf√©rence de Lo√Øc Hamelin ‚Ä¶","ref":"/fr/blog/2023/04/12/forum-dgex-solutions/","tags":"","title":"Forum DGEX Solutions"},{"body":"Forum DGEX Solutions Voici un extrait de la conf√©rence de Lo√Øc Hamelin au forum DGEX Solutions , au sujet du calcul automatique de sillon de derni√®re minute.\nMais tout d‚Äôabord qu‚Äôest ce qu‚Äôun sillon ? Il s‚Äôagit de la r√©servation d‚Äôespace/temps sur le r√©seau, par les entreprises ferroviaires (EF), comme SNCF Voyageurs. Ces r√©servations se font g√©n√©ralement des ann√©es en amont (A-3). Les EF peuvent √©galement faire des demandes de sillons en urgence (appel√©s sillons de derni√®re minute), de A-1 jusqu‚Äôau jour J. Ces demandes sont actuellement g√©r√©es par des guichets, et les sillons sont trac√©s √† la main. Il y a donc un risque d‚Äôerreur humaine, et les demandes sont parfois trait√©es en plusieurs jours.\nQu‚Äôest ce que nous proposons ? Le logiciel OSRD, en plus de disposer d‚Äôun simulateur ferroviaire pour la planification des horaires, va √©galement permettre de traiter les demandes de sillon de derni√®re minute de fa√ßon automatis√©e ! Il sera possible en seulement quelques clics d‚Äôexprimer une demande de sillon de derni√®re minute et obtenir une r√©ponse en quelques secondes (tout au plus 3min) !\nSi le projet #osrd vous int√©resse, n‚Äôh√©sitez pas √† consulter le site web osrd et le repo GitHub, et le projet est #opensource.\nPost LinkedIn de Morgane Senejko\n","categories":"","description":"","excerpt":"Forum DGEX Solutions Voici un extrait de la conf√©rence de Lo√Øc Hamelin ‚Ä¶","ref":"/fr/blog/2023/04/12/forum-dgex-solutions/","tags":"","title":"Forum DGEX Solutions"},{"body":"I\u0026A f√©vrier 2023 : ce qu‚Äôon retiendra ! L‚ÄòInspect \u0026 Adapt est une c√©r√©monie issue du framework d‚Äôagilit√© √† l‚Äô√©chelle SAFe (Scaled Agile Framework), au cours de laquelle nous inspectons notre travail r√©alis√© sur les 11 derni√®res semaines pour nous adapter en cons√©quence. Nous nous sommes donc r√©unis ce lundi 13 f√©vrier pour clore le 4√®me Increment de notre programme (PI 4).\nApr√®s avoir assist√© √† la demo de toutes les fonctionnalit√©s d√©velopp√©es par nos 3 √©quipes (PI system demo), nos parties prenantes ont pu √©valuer l‚Äôatteinte de nos objectifs. R√©sultat : environ 80% de r√©ussite.\nLancement de notre 5√®me PIP ! Le Product Increment Planning (PIP) est une c√©r√©monie au cours de laquelle les √©quipes se r√©partissent le backlog des nouvelles fonctionnalit√©s et planifient leur travail sur les 11 prochaines semaines. Avant d‚Äôentamer le travail de planification en sous-groupe, Lo√Øc Hamelin nous a pr√©sent√© les √©volutions du contexte business d‚ÄôOSRD, retra√ßant les attentes de nos clients.\nDans la matin√©e du 15 f√©vrier, Caroline Johnson, Directrice Solutions Num√©riques Exploitation chez SNCF R√©seau, nous a pr√©sent√© l‚Äôoffre de service sur la DG-Num et a r√©pondu √† nos questions sur l‚Äôint√©gration prochaine de notre application dans le SI interne.\nA l‚Äôissue du PIP, nos business owners ont attribu√© une valeur, entre 1 et 10, √† nos nouveaux objectifs de PI et les risques de programme ont √©t√© √©valu√©s.\n","categories":"","description":"","excerpt":"I\u0026A f√©vrier 2023 : ce qu‚Äôon retiendra ! L‚ÄòInspect \u0026 Adapt est une ‚Ä¶","ref":"/fr/blog/2023/02/13/ia-et-pip-4-f%C3%A9vrier-2023/","tags":"","title":"I\u0026A et PIP 4 - f√©vrier 2023"},{"body":"\nUne Devroom pour la Fondation Openrail Les 4 et 5 f√©vrier se tenait le FOSDEM, l‚Äô√©v√®nement europ√©en annuel incontournable pour la communaut√© open source. Tout au long de ces 2 jours √† Bruxelles, les participants ont pu assister √† une vari√©t√© de conf√©rences et ateliers portant sur les derni√®res tendances du logiciel libre et de l‚Äôopen source. L‚Äôun des moments forts de l‚Äô√©v√©nement √©tait le lancement de la Devroom ¬´ Opening railways and open transport ¬ª, port√©e par la toute nouvelle OpenRail Foundation. Le programme OSRD a eu la chance d‚Äôouvrir cette nouvelle room avec ST DCM.\n¬´ Short-term digital capacity management ¬ª ou le challenge des sillons de derni√®re minute La conf√©rence d‚ÄôEloi Charpentier, intitul√©e ¬´ automated short-term train planning in OSRD ¬ª pr√©sentait les r√©flexions issues de nos travaux sur la simulation de sillons de derni√®re minute. Ou comment permettre aux entreprises de fret ferroviaire d‚Äôobtenir des autorisations de circulation de derni√®re minute √©vitant les embouteillages sur le r√©seau, et d‚Äôavoir ainsi l‚Äôagilit√© indispensable pour concurrencer le transport routier ?\nSlides Vid√©o Opendata et cartographie du r√©seau ferroviaire La pr√©sentation de C√©line Durupt, ‚ÄúOpenStreetMap, one geographic database to rule them all?‚Äù abordait le sujet de l‚Äôopendata en mati√®re de r√©seau ferroviaire. Sur la base d‚Äôune analyse europ√©enne, C√©line a pr√©sent√© un plan d‚Äôactions pour partager la donn√©e ferroviaire via OSM et la rendre utilisable par OSRD.\nSlides Vid√©o Rendez-vous l‚Äôann√©e prochaine au FOSDEM 2024 avec des exemples concrets de collaboration et de nouveaux d√©veloppements d‚Äôopen source ferroviaire.\n","categories":"","description":"","excerpt":"\nUne Devroom pour la Fondation Openrail Les 4 et 5 f√©vrier se tenait ‚Ä¶","ref":"/fr/blog/2023/02/06/fosdem-2023-osrd-%C3%A9tait-pr%C3%A9sent/","tags":"","title":"Fosdem 2023 : OSRD √©tait pr√©sent¬†!"},{"body":"Hi ! My name is C√©line, and I am on a mission to bring more open data into OSRD. To do so, I searched open data that can fit OSRD‚Äôs needs in every country of the European Union (+ Norway, United Kingdom and Switzerland).\nI have presented the main results of this study during a talk at the FOSDEM 2023 meeting, and you can see the replay on their website.\nIn this post I will go into details of the methodology I followed, feel free to contact me if you have any remarks or question :-)\nData download You can download the detailed data I created here. Update 11/03/23 : get the updated file here.\nAdded open data sources links for : Estonia, Czechia, Poland, Slovakia Added license detail pour : Sweden Added information on real-time position of trains for : Finland Special thanks to Christoph Breit \u0026 everyone that contributed by sending me links \u0026 info The file is composed of three tabs:\nEU-sources: links to download each country‚Äôs open data \u0026 info on license compatibility EU-data: data used to compare total track length between countries and source and to compute the ‚Äúusability indicator‚Äù EU-epsg: EPSG code used for reprojecting geographical data for each country Compare total track length Calculate track length from open data Look for open data sources\nIf a source is found, look for data license\nCheck license compatibility with OpenStreetMap using OSM wiki and this blog post\nDownload open data\nLoad data into QGIS and reproject it based on the EU-epsg tab\nCalculate a new field using the following formula to get the length of each track in kilometers:\n\"length\" = $length / 1000 Report total length using the ‚ÄúBasic Statistics for Fields‚Äù tool\nLearn more about Inspire data model\nCalculate track length for OpenStreetMap data Download last OSM export from https://download.geofabrik.de/europe.html\nLoad lines data into QGIS\nSelect data using the ‚Äúother_tags‚Äù field to select railway network:\n\"other_tags\" like '%\"railway\"=\u003e\"rail\"%' or \"other_tags\" like '%\"railway\"=\u003e\"narrow_gauge\"%' or \"other_tags\" like '%\"railway\"=\u003e\"light_rail\"%' Export selected objects and reproject the layer based on the EU-epsg tab\nCalculate a new field using the following formula to get the length of each track in kilometers:\n\"length\" = $length / 1000 Select electrified parts of the network using the ‚Äúother_tages‚Äù field:\n\"other_tags\" like '%\"electrified\"=\u003e\"yes\"%' or \"other_tags\" like '%\"electrified\"=\u003e\"contact_line\"%' or \"other_tags\" like '%\"electrified\"=\u003e\"rail\"%' Report total length using the Basic Statistics for Fields tool\nLearn more about OpenStreetMap data model\nCalculate usability indicator List required and optional data For each data, indicate its availability using QGIS (Overpass Turbo can also be helpful to check OSM data) and the following scale : ‚ÄúYes‚Äù: fully available ‚ÄúPartial‚Äù: not available everywhere on the country, or missing parts of the data ‚ÄúNo‚Äù: not available Sum total required and optional data with Yes = 1; Partial = 0.5; No = 0 Generate indicator: ‚ÄúGood‚Äù if required=2 and optional\u003e2 ‚ÄúOkay‚Äù if required \u003e1 and optional \u003e=0 ‚ÄúPoor‚Äù if required=1 and optional \u003e2 ‚ÄúNot usable‚Äù else Map the result To show the indicator and license compatibility on a map, use the Eurostat borders datasets (for my presentation, I have used the 1:20 million scale and EPSG:3035) and join the table using countries names.\n","categories":"","description":"","excerpt":"Hi ! My name is C√©line, and I am on a mission to bring more open data ‚Ä¶","ref":"/en/blog/2023/02/03/openstreetmap-and-open-data-talk-at-fosdem-2023/","tags":"","title":"OpenStreetMap and open data talk at Fosdem 2023"},{"body":"OSRD est une suite d‚Äôoutils ferroviaires pour diff√©rents cas d‚Äôutilisation. Ces outils sont bas√©s sur la simulation de l‚Äôinfrastructure ferroviaire ainsi que son analyse.\n","categories":"","description":"","excerpt":"OSRD est une suite d‚Äôoutils ferroviaires pour diff√©rents cas ‚Ä¶","ref":"/fr/about/","tags":"","title":"√Ä propos"},{"body":"OSRD is a railway toolbox designed for multiple use cases. These tools have in common a reliance on railway infrastructure simulation and results analysis.\n","categories":"","description":"","excerpt":"OSRD is a railway toolbox designed for multiple use cases. These tools ‚Ä¶","ref":"/en/about/","tags":"","title":"About"},{"body":"Principe Le block automatique se caract√©rise en block automatique lumineux (BAL) et en block automatique √† permissivit√© restreinte (BAPR) par :\nle fonctionnement enti√®rement automatique des signaux de cantonnement dont le changement d‚Äô√©tat (fermeture ou ouverture) est provoqu√© par le passage des circulations sans aucune intervention humaine ; l‚Äô√©tat d‚Äôoccupation de chaque canton, agissant directement sur le signal d‚Äôentr√©e correspondant est obtenu par le circuit de voie en BAL, g√©n√©ralement par un comptage d‚Äôessieu en BAPR. Le BAL permet un d√©bit √©lev√© des circulations sur la ligne. Fonctionnement d‚Äôun circuit de voie Un circuit de voie est principalement constitu√© de trois √©l√©ments :\nun √©metteur, branch√© √† l‚Äôune des extr√©mit√©s de la zone. Il d√©livre un courant qui peut √™tre de diff√©rente nature selon les types de circuit de voie (continu, impulsionnel, alternatif, etc.) ; une ligne de transmission, constitu√©e par les deux files de rails ; un r√©cepteur, branch√© √† l‚Äôautre extr√©mit√© de la zone. Il assure le filtrage, l‚Äôamplification et la transformation du signal re√ßu via les rails, ce qui agit sur un relais appel√© relais de voie. Les contacts de ce relais sont utilis√©s pour √©tablir ou couper le circuit √©lectrique du signal d‚Äôentr√©e du canton. Lorsqu‚Äôaucun v√©hicule n‚Äôest pr√©sent sur la zone d√©limitant le circuit de voie (voie libre), le signal d√©livr√© par l‚Äô√©metteur parvient au r√©cepteur √† travers la ligne de transmission, et le relais de voie est excit√©. Le feu d‚Äôentr√©e du canton est √† voie libre (cas 1 ci-dessous).\nLorsqu‚Äôun v√©hicule est pr√©sent, son premier essieu agit comme une faible r√©sistance, appel√©e shunt, qui court-circuite la transmission. Dans ce cas, le niveau du signal parvenant au r√©cepteur n‚Äôest plus suffisant et le relais de voie se d√©sexcite, ce qui entraine la fermeture du signal d‚Äôentr√©e du canton (cas 2 ci-dessous).\nFonctionnement des compteurs d‚Äôessieux Un compteur d‚Äôessieux est un dispositif technique servant √† d√©tecter la pr√©sence d‚Äôune circulation sur une section, par comptage des essieux qui franchissent les d√©tecteurs encadrant cette section.\nUn point de d√©tection est install√© √† chaque extr√©mit√© de la section, et chaque fois qu‚Äôun essieu passe sur ce point au d√©but de la section, un compteur s‚Äôincr√©mente. Quand le train passe sur le point de d√©tection en fin de la section, le compteur d√©cr√©mente. Si le nombre final est z√©ro, la section est pr√©sum√©e libre pour un deuxi√®me train et le signal d‚Äôentr√©e du canton pr√©sentera l‚Äôindication ¬´ voie libre ¬ª.\n","categories":"","description":"Block Automatique","excerpt":"Block Automatique","ref":"/fr/docs/railway-wiki/signalling/spacing/automatic_block_systems/","tags":"","title":"BA"},{"body":"Python Python code is used for some packages and integration testing.\nFollow the Zen of Python. Code is linted with flake8. Code is formatted with Black. Imports are sorted with Isort. Python tests are written using pytest. Typing is checked using pytype. Rust As a reference for our API development we are using the Rust API guidelines. Generally, these should be followed. Prefer granular imports over glob imports like diesel::*. Tests are written with the built-in testing framework. Use the documentation example to know how to phrase and format your documentation. Use consistent comment style: /// doc comments belong above #[derive(Trait)] invocations. // comments should generally go above the line in question, rather than in-line. Start comments with capital letters. End them with a period if they are sentence-like. Use comments to organize long and complex stretches of code that can‚Äôt sensibly be refactored into separate functions. Code is linted with clippy. Code is formatted with fmt. Java Code is formatted with checkstyle. ","categories":"","description":"Coding style guide and best practices for back-end","excerpt":"Coding style guide and best practices for back-end","ref":"/en/docs/guides/contribute/conventions/back/","tags":"","title":"Back-end"},{"body":"Python Le code Python est utilis√© pour certains paquets et pour les tests d‚Äôint√©gration.\nSuivez le Zen of Python. Le code est lint√© avec flake8. Le code est format√© avec Black. Les imports sont tri√©es avec Isort. Les tests sont √©crits avec pytest. Les types sont v√©rifi√©s avec pytype. Rust Comme r√©f√©rence pour le d√©veloppement de notre API, nous utilisons les Rust API guidelines. D‚Äôune mani√®re g√©n√©rale, il convient de les respecter. Pr√©f√©rer les importations granulaires aux importations globales comme diesel::*. Les tests sont √©crits avec le framework de base. Utilisez l‚Äôexemple de documentation pour savoir comment formuler et formater votre documentation. Utilisez un style de commentaire coh√©rent : /// les commentaires de la documentation sont au-dessus des invocations #[derive(Trait)]. Les commentaires // doivent g√©n√©ralement √™tre plac√©s au-dessus de la ligne en question, plut√¥t qu‚Äôen ligne. Les commentaires commencent par des lettres majuscules. Terminez-les par un point s‚Äôils ressemblent √† une phrase. Utilisez les commentaires pour organiser des portions de code longues et complexes qui ne peuvent √™tre raisonnablement remani√©es en fonctions distinctes. Le code est lint√© avec clippy. Le code est format√© avec fmt. Java Le code est format√© avec checkstyle. ","categories":"","description":"Conventions de codes et bonnes pratiques pour le back-end","excerpt":"Conventions de codes et bonnes pratiques pour le back-end","ref":"/fr/docs/guides/contribute/conventions/back/","tags":"","title":"Back-end"},{"body":"Le signal d‚Äôentr√©e du canton pr√©sente une indication li√©e √† l‚Äô√©tat d‚Äôoccupation du ou des cantons suivants, selon les r√®gles suivantes :\nindication d‚Äôarr√™t lorsque le canton est occup√© par au moins une portion du train annonce lorsque le canton suivant est occup√© voie libre par d√©faut (sauf signaux Nf) La longueur maximale d‚Äôun canton est en principe de 2800 m. Elle est g√©n√©ralement de 1500 m sur les lignes parcourues √† la vitesse maximale de 160 km/h.\nAvantages du BAL Le BAL offre un niveau √©lev√© de s√©curit√© et permet un d√©bit important.\nLimites L‚Äôinstallation du BAL est tr√®s co√ªteuse, et son fonctionnement n√©cessite une garantie de contact √©lectrique entre la roue et le rail.\nImpl√©mentation Simuler correctement le syst√®me BAL n√©cessite de respecter les crit√®res suivants :\nlorsque la t√™te du train p√©n√®tre dans un canton, le signal d‚Äôentr√©e de celui-ci passe en indication d‚Äôarr√™t lorsque la queue du train lib√®re un canton, son signal d‚Äôentr√©e passe en annonce lorsque la queue du train lib√®re un canton, le signal d‚Äôentr√©e du canton pr√©c√©dent passe en voie libre les signaux pr√©sentent une voie libre par d√©faut, sauf les signaux Nf qui sont par d√©faut en indication d‚Äôarr√™t ","categories":"","description":"Block Automatique Lumineux","excerpt":"Block Automatique Lumineux","ref":"/fr/docs/railway-wiki/signalling/spacing/automatic_block_systems/bal/","tags":"","title":"BAL"},{"body":"Le signal d‚Äôentr√©e du canton est un signal qui pr√©sente une indication li√©e √† l‚Äô√©tat d‚Äôoccupation du canton suivant (indication d‚Äôarr√™t ou de voie libre). Sur certaines lignes l‚Äôoccupation du canton n‚Äôest pas obtenue par le circuit de voie mais par un syst√®me de comptage d‚Äôessieux entrants et sortants.\nLes cantons sont beaucoup plus longs que le BAL (jusqu‚Äô√† 15 km et plus) et par cons√©quent le d√©bit est moins important.\nAvantages du BAPR Le BAPR offre un bon niveau de s√©curit√© et il est moins co√ªteux que le BAL.\nLimites Ce type de block n‚Äôest adapt√© qu‚Äôaux lignes conventionnelles √† trafic moyen compte tenu de l‚Äôespacement impos√© entre 2 trains successifs.\n","categories":"","description":"Block Automatique √† Permitivit√© Restreinte","excerpt":"Block Automatique √† Permitivit√© Restreinte","ref":"/fr/docs/railway-wiki/signalling/spacing/automatic_block_systems/bapr/","tags":"","title":"BAPR"},{"body":"","categories":"","description":"","excerpt":"","ref":"/en/categories/","tags":"","title":"Categories"},{"body":"","categories":"","description":"","excerpt":"","ref":"/fr/categories/","tags":"","title":"Categories"},{"body":"Introduction L‚ÄôERTMS, pour European Rail Traffic Management System, est un syst√®me qui vise √† harmoniser la signalisation ferroviaire en Europe.\nIl est compos√© de trois sous-syst√®mes :\nun syst√®me de signalisation : l‚ÄôETCS un syst√®me de communication : GSM-R / GPRS / FRMCS un syst√®me de gestion du traffic : l‚ÄôETML ","categories":"","description":"European Rail Traffic Management System","excerpt":"European Rail Traffic Management System","ref":"/fr/docs/railway-wiki/signalling/spacing/ertms/","tags":"","title":"ERTMS"},{"body":"","categories":"","description":"The European Train Control System, part of ERTMS","excerpt":"The European Train Control System, part of ERTMS","ref":"/en/docs/railway-wiki/signalling/spacing/ertms/","tags":"","title":"ETCS (ERTMS)"},{"body":"Nous utilisons ReactJS et tous les fichiers doivent √™tre √©crits en Typescript.\nLe code est lint√© avec eslint, et format√© avec prettier.\nNomenclature Les applications (osrd eex, osrd stdcm, √©diteur infra, √©diteur mat√©riel) proposent des vues (gestion des projets, gestions des √©tudes, etc.) li√©es √† des modules (projet, √©tude, etc.) qui contiennent les composants.\nCes vues sont constitu√©es de composants et sous-composants tous issus des modules. En plus de contenir les fichiers de vues des applications, elles peuvent contenir un r√©pertoire scripts qui propose des scripts li√©s √† ces vues. Les vues d√©terminent la logique et l‚Äôacc√®s au store.\nLes modules sont des collections de composants rattach√©s √† un objet (un sc√©nario, un mat√©riel roulant, un TrainSchedule). Ils contiennent :\nun r√©pertoire components qui h√©berge tous les composants un r√©pertoire styles optionnel par module pour le style des composants en scss un r√©pertoire assets optionnel par module (qui contient les assets, de jeux de donn√©es par d√©faut par ex, sp√©cifiques au module) un fichier reducers optionnel par module un fichier types optionnel par module un fichier consts optionnel par module Un r√©pertoire assets (qui contient les images et autre fichiers).\nEnfin, un r√©pertoire common qui propose :\nun r√©pertoire utils pour les fonctions utilitaires communes √† l‚Äôensemble du projet un fichier types pour les types communs √† l‚Äôensemble du projet un fichier consts pour les constantes communes √† l‚Äôensemble du projet Principes d‚Äôimpl√©mentation Routage \u0026 SLUG R√©daction en cours\nprojects/{nom du projet}/studies/{nom de l'√©tude}/scenarios/{nom du scenario}\nStyles \u0026 SCSS ATTENTION : en CSS/React, le scope d‚Äôune classe ne d√©pend pas de l‚Äôendroit o√π le fichier est import√© mais est valide pour toute l‚Äôapplication. Si vous importez un fichier scss au fin fond d‚Äôun composant (ce que nous d√©conseillons fortement par ailleurs), ses classes seront disponibles pour toute l‚Äôapplication et peuvent donc provoquer des effets de bord.\nIl est donc tr√®s recommand√© de pouvoir facilement suivre l‚Äôarborescence des applications, vues, modules et composants √©galement au sein du code SCSS, et notamment imbriquer les noms de classes pour √©viter les effets de bord, le compilateur se chargera de fabriquer la hi√©rarchie n√©cessaire.\nSi par exemple nous avons un composant rollingStockSelector qui propose une liste de mat√©riel rollingStockList repr√©sent√©s par des cartes rollingStockCard contenant une image repr√©sentant le mat√©riel roulant rollingStockImg nous devrions avoir la structure SCSS suivante :\n.rollinStockSelector { .rollingStockList { .rollingStockCard { .rollingStockImg { width: 5rem; height: auto; } } } } Ainsi, on a la garantie que l‚Äôimage contenue dans la carte de mat√©riel roulant h√©ritera bien des bonnes propri√©t√©s css .rollinStockSelector.rollingStockList.rollingStockCard.rollingStockImg.\nCSS Modules CSS modules allow scoping CSS styles to a specific component, thereby avoiding conflicts with global class names.\nVite natively supports CSS modules. Ensure that your CSS file has the .module.css extension, for example, styles.module.css.\nUsing CSS Modules in Components Create an SCSS file with the .module.scss extension: /* MyComponent.module.scss */ .container { background-color: white; } .title { font-size: 24px; color: #333; } Use the classes in your React component: Vite transforms classes into objects that contain hashed classes (e.g., _container_h3d8bg) and uses them during bundle generation, making the classes unique.\nimport React from 'react'; import styles from './MyComponent.module.scss'; export function MyComponent() { return ( \u003cdiv className={styles.container}\u003e \u003ch1 className={styles[\"title\"]}\u003eMy Title\u003c/h1\u003e \u003c/div\u003e ); }; For more information, you can refer to the Vite.js documentation.\nNoms de classes, utilisation de cx() Les classes sont ajout√©es les unes √† la suite des autres, normalement, dans la propri√©t√© className=\"\".\nCependant, quand cela est n√©cessaire ‚Äî¬†tests pour l‚Äôutilisation d‚Äôune classe, concat√©nation, etc.¬†‚Äî nous utilisons la librairie classnames qui pr√©conise l‚Äôusage suivant :\n\u003cdiv className=\"rollingStockSelector\"\u003e \u003cdiv className=\"rollingStockList\"\u003e \u003cdiv className=\"rollingStockCard w-100 my-2\"\u003e \u003cimg className={cx('rollingStockImg', 'm-2', 'p-1', 'bg-white', { valid: isValid(), selected: rollingStockID === selectedRollingStockID, })} /\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e Les classes sont s√©par√©es chacune dans un string et les op√©rations bool√©ennes ou autres sont r√©alis√©es dans un objet qui retournera ‚Äî¬†ou pas¬†‚Äî le nom de propri√©t√© comme nom de classe √† utiliser dans le CSS.\nStore/Redux Tout ce qui est selector est g√©r√© par la vue pass√© en props aux composants et sous-composants.\nPar cons√©quent les appels au store en lecture et en √©criture doivent √™tre pass√©s un niveau de la vue, en irrigant par des props et states les composants propos√©es par la vue.\nRTK R√©daction en cours\nUtiliser les endpoints g√©n√©r√©s √† partir des fichiers openapi.yaml pour consommer le backend.\nLois et √©l√©ments importants Aucun composant ne doit d√©tenir la responsabilit√© de mise √† jour de la donn√©e qu‚Äôil utilise\nSeules les vues contiennent les s√©lecteurs du store, donn√©s ensuite en props aux composants du module li√© √† la vue.\nLe SCSS n‚Äôest pas scop√©\nUn fichier .scss enfoui dans l‚Äôarborescence ne vous garantit pas que les classes contenues soient seulement accessibles √† cet endroit, y compris par import react (formellement interdit au passage : vous devez utiliser l‚Äôimport SCSS), toutes les classes d√©clar√©es sont accessibles partout.\nPr√©f√©rez un choix judicieux de nom de classe racine pour un module donn√© et utilisez l‚Äôarborescence possible dans le fichier SCSS.\nLes liens des imports doivent √™tre absolus au sein d‚Äôune application\nVous devez utiliser le chemin complet pour tous vos imports, m√™me si le fichier √† importer se trouve dans le m√™me r√©pertoire.\nLes liens des imports doivent √™tre relatifs au sein d‚Äôun module ou d‚Äôun composant\nAu sein d‚Äôun module ou d‚Äôun composant, √† l‚Äôinstar d‚Äôune librairie, les liens d‚Äôimports doivent rester relatifs afin de permettre leur utilisation n‚Äôimporte o√π.\nTypeScript import \u0026 export We recommend using typed imports and exports.\nWhen an import or export contains only types, indicate it with the type keyword.\nexport type { Direction, DirectionalTrackRange as TrackRange }; import type { typedEntries, ValueOf } from 'utils/types'; This allows to:\nImprove the performance and analysis process of the compiler and the linter. Make these declarations more readable; we can clearly see what we are importing. Avoid dependency cycles: The error disappears with the type keyword\nMake final bundle lighter (all types disappear at compilation) ","categories":"","description":"Coding style guide and best practices for front-end","excerpt":"Coding style guide and best practices for front-end","ref":"/en/docs/guides/contribute/conventions/front/","tags":"","title":"Front-end"},{"body":"Nous utilisons ReactJS et tous les fichiers doivent √™tre √©crits en Typescript.\nLe code est lint√© avec eslint, et format√© avec prettier.\nNomenclature Les applications (osrd eex, osrd stdcm, √©diteur infra, √©diteur mat√©riel) proposent des vues (gestion des projets, gestions des √©tudes, etc.) li√©es √† des modules (projet, √©tude, etc.) qui contiennent les composants.\nCes vues sont constitu√©es de composants et sous-composants tous issus des modules. En plus de contenir les fichiers de vues des applications, elles peuvent contenir un r√©pertoire scripts qui propose des scripts li√©s √† ces vues. Les vues d√©terminent la logique et l‚Äôacc√®s au store.\nLes modules sont des collections de composants rattach√©s √† un objet (un sc√©nario, un mat√©riel roulant, un TrainSchedule). Ils contiennent :\nun r√©pertoire components qui h√©berge tous les composants un r√©pertoire styles optionnel par module pour le style des composants en scss un r√©pertoire assets optionnel par module (qui contient les assets, de jeux de donn√©es par d√©faut par ex, sp√©cifiques au module) un fichier reducers optionnel par module un fichier types optionnel par module un fichier consts optionnel par module Un r√©pertoire assets (qui contient les images et autre fichiers).\nEnfin, un r√©pertoire common qui propose :\nun r√©pertoire utils pour les fonctions utilitaires communes √† l‚Äôensemble du projet un fichier types pour les types communs √† l‚Äôensemble du projet un fichier consts pour les constantes communes √† l‚Äôensemble du projet Principes d‚Äôimpl√©mentation Routage \u0026 SLUG R√©daction en cours\nprojects/{nom du projet}/studies/{nom de l'√©tude}/scenarios/{nom du scenario}\nStyles \u0026 SCSS ATTENTION : en CSS/React, le scope d‚Äôune classe ne d√©pend pas de l‚Äôendroit o√π le fichier est import√© mais est valide pour toute l‚Äôapplication. Si vous importez un fichier scss au fin fond d‚Äôun composant (ce que nous d√©conseillons fortement par ailleurs), ses classes seront disponibles pour toute l‚Äôapplication et peuvent donc provoquer des effets de bord. Vous pouvez utiliser les CSS modules pour √©viter les conflits.\nIl est donc tr√®s recommand√© de pouvoir facilement suivre l‚Äôarborescence des applications, vues, modules et composants √©galement au sein du code SCSS, et notamment imbriquer les noms de classes pour √©viter les effets de bord, le compilateur se chargera de fabriquer la hi√©rarchie n√©cessaire.\nSi par exemple nous avons un composant rollingStockSelector qui propose une liste de mat√©riel rollingStockList repr√©sent√©s par des cartes rollingStockCard contenant une image repr√©sentant le mat√©riel roulant rollingStockImg nous devrions avoir la structure SCSS suivante :\n.rollinStockSelector { .rollingStockList { .rollingStockCard { .rollingStockImg { width: 5rem; height: auto; } } } } Ainsi, on a la garantie que l‚Äôimage contenue dans la carte de mat√©riel roulant h√©ritera bien des bonnes propri√©t√©s css .rollinStockSelector.rollingStockList.rollingStockCard.rollingStockImg.\nCSS Modules Les CSS modules permettent de scoper les styles CSS √† un composant sp√©cifique, √©vitant ainsi les conflits de noms de classe globaux.\nVite prend en charge nativement les CSS modules. Assurez-vous que votre fichier CSS a l‚Äôextension .module.css. Par exemple, styles.module.css.\nUtilisation des CSS modules dans les composants Cr√©ez un fichier SCSS avec l‚Äôextension .module.scss : /* MyComponent.module.scss */ .container { background-color: white } .title { font-size: 24px; color: #333; } Utilisez les classes dans votre composant React : Vite transforme les classes en objets qui contiennent les classes hash√©es (exemple _container_h3d8bg) et les utilise au moment de la g√©n√©ration du bundle, rendant ainsi les classes uniques.\nimport React from 'react'; import styles from './MyComponent.module.scss'; export function MyComponent() { return ( \u003cdiv className={styles.container}\u003e \u003ch1 className={styles[\"title\"]}\u003eMon Titre\u003c/h1\u003e \u003c/div\u003e ); }; Pour plus d‚Äôinformation, vous pouvez regarder la documentation de vite.js\nNoms de classes, utilisation de cx() Les classes sont ajout√©es les unes √† la suite des autres, normalement, dans la propri√©t√© className=\"\".\nCependant, quand cela est n√©cessaire ‚Äî¬†tests pour l‚Äôutilisation d‚Äôune classe, concat√©nation, etc.¬†‚Äî nous utilisons la librairie classnames qui pr√©conise l‚Äôusage suivant :\n\u003cdiv className=\"rollingStockSelector\"\u003e \u003cdiv className=\"rollingStockList\"\u003e \u003cdiv className=\"rollingStockCard w-100 my-2\"\u003e \u003cimg className={cx('rollingStockImg', 'm-2', 'p-1', 'bg-white', { valid: isValid(), selected: rollingStockID === selectedRollingStockID, })} /\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e Les classes sont s√©par√©es chacune dans un string et les op√©rations bool√©ennes ou autres sont r√©alis√©es dans un objet qui retournera ‚Äî¬†ou pas¬†‚Äî le nom de propri√©t√© comme nom de classe √† utiliser dans le CSS.\nStore/Redux Tout ce qui est selector est g√©r√© par la vue et pass√© en props aux composants et sous-composants.\nPar cons√©quent les appels au store en lecture et en √©criture doivent √™tre pass√©s un niveau de la vue, en irrigant par des props et states les composants propos√©es par la vue.\nRTK Utiliser les endpoints g√©n√©r√©s √† partir des fichiers openapi.yaml pour consommer le backend.\nFonctionnement du cache dans RTK Query Lorsque de la donn√©e est r√©cup√©r√©e depuis le back, RTK va mettre cette donn√©e en cache dans le store. Si le m√™me endpoint est appel√© avec les m√™me param√®tres, RTK va r√©utiliser la donn√©e dans le cache plut√¥t que de rappeler le back.\nDans le store, vous verrez cette cl√© editoastApi qui contient la donn√©e en cache de tous les endpoints editoast‚ÄØ:\nIci par exemple l‚Äôendpoint getProjects a √©t√© appel√©.\nRTK stocke le nom de l‚Äôendpoint, ainsi que les param√®tres d‚Äôappel, pour former une cl√© unique nomDuEndpoint({¬†param√®tres¬†}). (ici getProjects({\"ordering\":\"LastModifiedDesc\",\"pageSize\":1000})).\n{ 'getProjectsByProjectIdStudiesAndStudyId({\"projectId\":13,\"studyId\":16})': { status :\"fulfilled\", etc‚Ä¶ }, 'getProjectsByProjectIdStudiesAndStudyId({\"projectId\":13,\"studyId\":14})': { ‚Ä¶ } } Dans ce deuxi√®me exemple, le m√™me endpoint a √©t√© appel√© avec le m√™me param√®tre projectId, mais un param√®tre studyId diff√©rent.\nS√©rialisation des cl√©s dans le cache Les string utilis√©es comme cl√© dans le cache sont √† peu de choses pr√®s l‚Äôobjet param√®tre pass√© √† la moulinette JSON.stringify que transforme un object JS en string (donc s√©rialis√©).\nNormalement La s√©rialisation ne conserve pas l‚Äôordre des cl√©s des objets. Par exemple, JSON.stringify ne produira pas la m√™me string avec ces deux objets: { a: 1, b: 2 } et { b: 2, a: 1 }.\nRTK va optimiser la mise en cache en faisant en sorte que le r√©sultat d‚Äôun appel avec {\"projectId\":13,\"studyId\":16} ou {\"studyId\":16, \"projectId\":13} soient stock√©es dans la m√™me cl√© dans le cache.\nPour voir le fonctionnement en d√©tail, voici le code de cette fonction de s√©rialisation‚ÄØ:\nFonction de s√©rialisation RTK const defaultSerializeQueryArgs: SerializeQueryArgs\u003cany\u003e = ({ endpointName, queryArgs, }) =\u003e { let serialized = '' const cached = cache?.get(queryArgs) if (typeof cached === 'string') { serialized = cached } else { const stringified = JSON.stringify(queryArgs, (key, value) =\u003e isPlainObject(value) ? Object.keys(value) .sort() // les cl√©s sont remises dans l‚Äôordre ici .reduce\u003cany\u003e((acc, key) =\u003e { acc[key] = (value as any)[key] return acc }, {}) : value ) if (isPlainObject(queryArgs)) { cache?.set(queryArgs, stringified) } serialized = stringified } // Sort the object keys before stringifying, to prevent useQuery({ a: 1, b: 2 }) having a different cache key than useQuery({ b: 2, a: 1 }) return `${endpointName}(${serialized})` } Souscriptions √† la donn√©e Dans la terminologie de RTK query, Lorsqu‚Äôun composant react appelle un endpoint d√©fini dans RTK Query, il souscrit √† la donn√©e.\nRTK compte le nombre de r√©f√©rence √† la m√™me paire (endpoint,{param√®tres}). Lorsque deux composants souscrivent √† la m√™me donn√©e. Ils partagent la m√™me cl√© dans le cache.\nimport { osrdEditoastApi } from './api.ts' function Component1() { // component subscribes to the data const { data } = osrdEditoastApi.useGetXQuery(1) return \u003cdiv\u003e...\u003c/div\u003e } function Component2() { // component subscribes to the data const { data } = osrdEditoastApi.useGetXQuery(2) return \u003cdiv\u003e...\u003c/div\u003e } function Component3() { // component subscribes to the data const { data } = osrdEditoastApi.useGetXQuery(3) return \u003cdiv\u003e...\u003c/div\u003e } function Component4() { // component subscribes to the *same* data as ComponentThree, // as it has the same query parameters const { data } = osrdEditoastApi.useGetXQuery(3) return \u003cdiv\u003e...\u003c/div\u003e } Ici Component3 et Component4 ne vont g√©n√©rer qu‚Äôun seul appel vers le back. Ils souscrivent √† la m√™me donn√©e (m√™me endpoint et m√™me param√®tre 3). Ils vont partager la m√™me cl√© dans le cache.\nAu total ici il y aura trois appels vers le back, avec les param√®tres 1, 2, 3.\nTant qu‚Äôil existe au moins un composant react mont√©, qui appelle le hook osrdEditoastApi.endpoints.getProjectsByProjectId.useQuery par exemple, la donn√©e sera conserv√©e dans le cache.\nD√®s que le dernier composant est d√©mont√©, la donn√©e est supprim√©e du cache au bout de 60 secondes (valeur par d√©faut).\nLois et √©l√©ments importants Aucun composant ne doit d√©tenir la responsabilit√© de mise √† jour de la donn√©e qu‚Äôil utilise\nSeules les vues contiennent les s√©lecteurs du store, donn√©s ensuite en props aux composants du module li√© √† la vue.\nLe SCSS n‚Äôest pas scop√©\nUn fichier .scss enfoui dans l‚Äôarborescence ne vous garantit pas que les classes contenues soient seulement accessibles √† cet endroit, y compris par import react (formellement interdit au passage : vous devez utiliser l‚Äôimport SCSS), toutes les classes d√©clar√©es sont accessibles partout.\nPr√©f√©rez un choix judicieux de nom de classe racine pour un module donn√© et utilisez l‚Äôarborescence possible dans le fichier SCSS.\nLes liens des imports doivent √™tre absolus au sein d‚Äôune application\nVous devez utiliser le chemin complet pour tous vos imports, m√™me si le fichier √† importer se trouve dans le m√™me r√©pertoire.\nLes liens des imports doivent √™tre relatifs au sein d‚Äôun module ou d‚Äôun composant\nAu sein d‚Äôun module ou d‚Äôun composant, √† l‚Äôinstar d‚Äôune librairie, les liens d‚Äôimports doivent rester relatifs afin de permettre leur utilisation n‚Äôimporte o√π.\nTypeScript import \u0026 export Nous recommendons d‚Äôutiliser les imports et export typ√©s.\nLorsque qu‚Äôun import ou un export ne comporte que des types, l‚Äôindiquer par le mot cl√© type.\nexport type { Direction, DirectionalTrackRange as TrackRange }; import type { typedEntries, ValueOf } from 'utils/types'; Cette pratique permet‚ÄØde¬†:\nAm√©liorer les performances et le travail d‚Äôanalyse du compilateur et du linter. Rendre ces d√©clarations plus lisibles, on voit clairement ce qu‚Äôon est en train d‚Äôimporter. √âviter des cycles de d√©pendances¬†: L‚Äôerreur dispara√Æt avec le mot cl√© type\nAll√©ger le bundle final (tous les types disparaissent √† la compilation). ","categories":"","description":"Conventions de codes et bonnes pratiques pour le front-end","excerpt":"Conventions de codes et bonnes pratiques pour le front-end","ref":"/fr/docs/guides/contribute/conventions/front/","tags":"","title":"Front-end"},{"body":"","categories":"","description":"","excerpt":"","ref":"/fr/search/","tags":"","title":"Search Results"},{"body":"","categories":"","description":"","excerpt":"","ref":"/en/tags/","tags":"","title":"Tags"},{"body":"","categories":"","description":"","excerpt":"","ref":"/fr/tags/","tags":"","title":"Tags"},{"body":"Back-end Integration tests are written with pytest in the /tests folder. Each route described in the openapi.yaml files must have an integration test. The test must check both the format and content of valid and invalid responses. Front-end The functional writing of the tests is carried out with the Product Owners, and the developers choose a technical implementation that precisely meets the needs expressed and fits in with the recommendations presented here.\nWe use Playwright to write end-to-end tests, and vitest to write unit tests.\nThe browsers tested are currently Firefox and Chromium.\nBasic principles Tests must be short (1min max) and go straight to the point. Arbitrary timeouts are outlawed; a test must systematically wait for a specific event. It is possible to use polling (retry an action - a click for example - after a certain time) proposed in the Playwright‚Äôs API. All tests must be parallelizable. Tests must not point to or wait for text elements from the translation, prefer the DOM tree structure or place specific id. We‚Äôre not testing the data, but the application and its functionality. Data-specific tests should be developed in parallel. Data The data tested must be public data. The data required (infrastructure and rolling stock) for the tests are offered in the application‚Äôs json files, injected at the start of each test and deleted at the end, regardless of its result or how it is stopped, including with CTRL+C.\nThis is done by API calls in typescript before launching the actual test.\nThe data tested is the same, both locally and via continuous integration.\nAtomicity of a test Each test must be atomic: it is self-sufficient and cannot be divided.\nA test will target a single feature or component, provided it is not too large. A test will not test an entire module or application; it will necessarily be a set of tests, in order to preserve test atomicity.\nIf a test needs elements to be created or added, these operations must be carried out by API calls in typescript upstream of the test, as is done for adding data. These elements must be deleted at the end of the test, regardless of the result or how it is stopped, including by CTRL+C.\nThis allows tests to be parallelized.\nHowever, in certain cases where it is relevant, a test may contain several clearly explained and justified test subdivisions (several test() in a single describe()).\nExample of a test The requirement: ‚ÄúWe want to test the addition of a train to a timetable‚Äù.\nadd the test infrastructure and rolling stock to the database by API calls. create project, study and scenario with choice of test infrastructure by API calls. start the test, clicking on ‚Äúadd one or more trains‚Äù until the presence of the trains in the timetable is verified the test passes, fails or is stopped, the project, study and scenario are deleted, along with the test rolling stock and infrastructure by API calls. NB: the test will not test all the possibilities offered by the addition of trains; this should be a specific test which would test the response of the interface for all scenarios without adding trains.\n","categories":"","description":"Recommandations for testing purpose","excerpt":"Recommandations for testing purpose","ref":"/en/docs/guides/contribute/conventions/tests/","tags":"","title":"Tests"},{"body":"Back-end Les tests d‚Äôint√©gration sont √©crits avec pytest dans le dossier /tests. Chaque route d√©crite dans les fichiers openapi.yaml doit avoir un test d‚Äôint√©gration. Le test doit v√©rifier √† la fois le format et le contenu des r√©ponses valides et invalides. Front-end L‚Äô√©criture fonctionnelle des tests est r√©alis√©e avec les Product Owners, et les d√©veloppeurs choisissent une impl√©mentation technique qui r√©pond pr√©cis√©ment aux besoins exprim√©s et qui s‚Äôint√®gre dans les recommandations pr√©sentes ici.\nNous utilisons Playwright pour √©crire les tests bout en bout, et vitest pour √©crire les tests unitaires.\nLes navigateurs test√©s sont pour l‚Äôinstant Firefox et Chromium.\nPrincipes de base Les tests doivent √™tre courts (1min max) et aller droit au but. Les timeout arbitraires sont proscrits, un test doit syst√©matiquement attendre un √©v√®nement sp√©cifique. Il est possible d‚Äôutiliser le polling (retenter une action ‚Äî un clic par exemple ‚Äî au bout d‚Äôun certain temps) propos√© dans l‚ÄôAPI de Playwright. Les tests doivent tous pouvoir √™tre parall√©lisables. Les tests ne doivent pas pointer/attendre des √©l√©ments de texte issus de la traduction, pr√©f√©rer l‚Äôarborescence du DOM ou encore placer des id sp√©cifiques. On ne teste pas les donn√©es mais l‚Äôapplication et ses fonctionnalit√©s. Des tests sp√©cifiques aux donn√©es sont √† √©laborer par ailleurs. Donn√©es Les donn√©es test√©es doivent imp√©rativement √™tre des donn√©es publiques. Les donn√©es n√©cessaires (infrastructure et mat√©riel) aux tests sont propos√©es dans des fichiers json de l‚Äôapplication, inject√©es au d√©but de chaque test et effac√©es √† la fin peu importe son r√©sultat ou la mani√®re d‚Äô√™tre stopp√©, y compris par CTRL+C.\nCela se fait par des appels API en typescript avant de lancer le test √† proprement parler.\nLes donn√©es test√©es sont les m√™mes en local ou via l‚Äôint√©gration continue.\nAtomicit√© d‚Äôun test Chaque test doit √™tre atomique : il se suffit √† lui m√™me et ne peut pas √™tre divis√©.\nUn test va cibler une fonctionnalit√© ou un composant, si ce dernier n‚Äôest pas trop gros. Un test ne testera pas tout un module ou tout une application, ce sera forc√©ment un ensemble de tests afin de pr√©server l‚Äôatomicit√© des tests.\nSi un test a besoin que des √©l√©ments soient cr√©√©s ou ajout√©s, ces op√©rations doivent √™tre op√©r√©es par des appels API en typescript en amont du test, √† l‚Äôinstar de ce qui est fait pour l‚Äôajout de donn√©es. Ces √©l√©ments doivent √™tre supprim√©s √† l‚Äôissue du test, peu importe son r√©sultat ou la mani√®re d‚Äô√™tre stopp√©, y compris par CTRL+C.\nCela permettra notamment la parall√©lisation des tests.\nUn test peut cependant, dans certains cas de figure o√π cela est pertinent, contenir plusieurs sous-divisions de test, clairement explicit√©es, et justifi√©es (plusieurs test() dans un seul describe()).\nExemple de test Le besoin : ¬´ nous voulons tester l‚Äôajout d‚Äôun train dans une grille horaire ¬ª.\najouter l‚Äôinfrastructure et le mat√©riel roulant de test dans la base de donn√©es par appels API cr√©er projet, √©tude et sc√©nario avec choix de l‚Äôinfra de test par appels API d√©but du test qui clique sur ¬´ ajouter un ou plusieurs trains ¬ª jusqu‚Äô√† la v√©rification de la pr√©sence des trains dans la grille horaire le test a r√©ussi, a √©chou√©, ou est stopp√©, le projet, l‚Äô√©tude et le sc√©nario sont effac√©s, ainsi que le mat√©riel roulant et et l‚Äôinfrastructure de test par appels API NB : le test ne va pas tester toutes les possibilit√©s offertes par l‚Äôajout de trains, cela rel√®ve d‚Äôun test sp√©cifique qui testerait la r√©ponse de l‚Äôinterface pour tous les cas de figure sans ajouter de trains.\n","categories":"","description":"Recommandations pour les tests","excerpt":"Recommandations pour les tests","ref":"/fr/docs/guides/contribute/conventions/tests/","tags":"","title":"Tests"}]