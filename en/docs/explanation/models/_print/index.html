<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=canonical type=text/html href=https://osrd.fr/en/docs/explanation/models/><link rel=alternate type=application/rss+xml href=https://osrd.fr/en/docs/explanation/models/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Models | OSRD</title>
<meta name=description content="What is modeled in OSRD, and how it is modeled"><meta property="og:url" content="https://osrd.fr/en/docs/explanation/models/"><meta property="og:site_name" content="OSRD"><meta property="og:title" content="Models"><meta property="og:description" content="What is modeled in OSRD, and how it is modeled"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta itemprop=name content="Models"><meta itemprop=description content="What is modeled in OSRD, and how it is modeled"><meta name=twitter:card content="summary"><meta name=twitter:title content="Models"><meta name=twitter:description content="What is modeled in OSRD, and how it is modeled"><link rel=preload href=/scss/main.min.5c45ececdbdfc535ee5253f678cfd68edfba69407b82367ff2e289cdf3db5514.css as=style integrity="sha256-XEXs7NvfxTXuUlP2eM/Wjt+6aUB7gjZ/8uKJzfPbVRQ=" crossorigin=anonymous><link href=/scss/main.min.5c45ececdbdfc535ee5253f678cfd68edfba69407b82367ff2e289cdf3db5514.css rel=stylesheet integrity="sha256-XEXs7NvfxTXuUlP2eM/Wjt+6aUB7gjZ/8uKJzfPbVRQ=" crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script><script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script></head><body class=td-section><header><nav class="td-navbar js-navbar-scroll" data-bs-theme=dark><div class="container-fluid flex-column flex-md-row"><a class=navbar-brand href=/en/><span class="navbar-brand__logo navbar-logo"><svg id="svg36" width="110.767" height="22"><style id="style1">.st9{fill:#fff}</style><g id="ok" transform="scale(.1918)"><g id="g36"><g id="g29"><path id="path23" d="M38.5 83.4c-1.9 8.2-2.9 17-2.9 26.5v4.8h16.6c-2.8-13.2-7.8-23.4-13.7-31.3z" class="st9"/><path id="path24" d="M0 57.5v19.9c3.1 1.2 6.3 2.7 9.5 4.6 8.5 5.2 15 12.6 19.4 21.8v-31c-3.4-3-6.9-5.5-10.3-7.5-6.5-3.7-13-6.2-18.6-7.8z" class="st9"/><path id="path25" d="M35.6 69.9c4.3-11.3 10.6-21.1 18.9-29.4V0H35.6z" class="st9"/><path id="path26" d="M40.8 75.4c5.3 6.2 10.1 13.8 13.7 23.3V50.6C48.6 57.8 44 66.1 40.8 75.4z" class="st9"/><path id="path27" d="M100.7.0H61.3v34.5C73.1 25.2 86 20 96.9 17.2c1.8-.5 3.7.6 4.1 2.4.5 1.8-.6 3.6-2.4 4.1-11.4 2.9-25.3 8.6-37.2 19.7v31.8c2.9-6.3 6.7-11.7 11.4-16.4 9.4-9.3 21-14.1 30.5-16.6 1.8-.5 3.7.6 4.1 2.4.5 1.8-.6 3.6-2.4 4.1-4.7 1.2-10.1 3.1-15.3 6-19 10.3-28.2 28.4-28.2 55.2v4.8h39.3c7.8.0 14.1-6.3 14.1-14.1V14.1C114.7 6.3 108.4.0 100.7.0z" class="st9"/><path id="path28" d="M22 59.6c2.2 1.3 4.5 2.8 6.8 4.6V0H14.1C6.3.0.0 6.3.0 14.1v36.4c6.5 1.7 14.2 4.5 22 9.1z" class="st9"/><path id="path29" d="M5.4 87.5c-1.8-1.1-3.6-2-5.4-2.8v15.9c0 7.8 6.3 14.1 14.1 14.1h11.6c-3.6-12.2-10.4-21.3-20.3-27.2z" class="st9"/></g><g id="g30"><path id="path30" d="M201.7 109c-30.8.0-53.7-21.2-53.7-52.5.0-31.7 22.9-51.6 53.7-51.6 31 0 53.9 20 53.9 51.6-.1 31.3-23 52.5-53.9 52.5zm0-82.6c-16.7.0-28.2 12.8-28.2 30.1.0 17.9 11.6 30.7 28.2 30.7S230 74.4 230 56.6c0-17.3-11.6-30.2-28.3-30.2z" class="st9"/></g><g id="g32"><g id="g31"><path id="path31" d="M334.3 33.3c-4-5.2-11.4-8.5-17.6-8.5-6.2.0-13.8 2.1-13.8 9.9.0 6.6 5.9 8.7 15.2 11.6 13.4 4.3 30.7 10 30.7 29.7.0 22.7-18.3 32.9-37.8 32.9-14.1.0-28.3-5.2-37-14.2l15.6-15.9c4.7 6 13.5 10.5 21.3 10.5 7.3.0 13.7-2.8 13.7-10.7.0-7.5-7.5-9.9-20.5-14.1C291.6 60.3 279 53.9 279 36c0-21.9 19.8-31 38.2-31 11.2.0 23.7 4.2 32.4 12.1z" class="st9"/></g></g><g id="g34"><g id="g33"><path id="path32" d="m433.1 106.4-21.3-39.2h-8.1v39.2h-23.4V7.6H418c19 0 37.8 7.3 37.8 29.9.0 13.3-7.8 22.7-20.5 26.6l25.8 42.3zm-16.9-79.6h-12.7v23h11.3c7.7.0 17.3-2 17.3-12 0-9.2-8.7-11-15.9-11z" class="st9"/></g></g><g id="g35"><path id="path34" d="M522.2 106.4h-36.8V7.6H521c28 0 56.5 11.7 56.5 49.1.0 34.7-28.1 49.7-55.3 49.7zm-1.7-78.5h-11.9v57.8h11.3c17 0 32.8-7 32.8-29 0-22.2-15.8-28.8-32.2-28.8z" class="st9"/></g></g></g></svg></span><span class=navbar-brand__name>OSRD</span></a><div class="td-navbar-nav-scroll ms-md-auto" id=main_navbar><ul class=navbar-nav><li class=nav-item><a class=nav-link href=/en/about/><span>About</span></a></li><li class=nav-item><a class="nav-link active" href=/en/docs/><span>Documentation</span></a></li><li class=nav-item><a class=nav-link href=/en/blog/><span>Blog</span></a></li><li class=nav-item><a class=nav-link href=/en/join-us/><span>Join us</span></a></li><li class="nav-item dropdown d-none d-lg-block"><div class=dropdown><a class="nav-link dropdown-toggle" href=# role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><ul class=dropdown-menu><li><a class=dropdown-item href=/fr/docs/explanation/models/>Français</a></li></ul></div></li></ul></div><div class="d-none d-lg-block"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.a200aa7f4d914412dc60a261ccafedc3.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This is the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=/en/docs/explanation/models/>Return to the regular view of this page</a>.</p></div><h1 class=title>Models</h1><div class=lead>What is modeled in OSRD, and how it is modeled</div><ul><li>1: <a href=#pg-f205938bbebab94d2a57f42f781e4fb1>Infrastructure example</a></li><li>2: <a href=#pg-d8a9003e9780b0213913d2b62364ed28>Neutral Sections</a></li><li>3: <a href=#pg-c2136d18a9b3ae8f9da3ef8869d83664>Rolling stock categories</a></li><ul></ul></ul><div class=content></div></div><div class=td-content><h1 id=pg-f205938bbebab94d2a57f42f781e4fb1>1 - Infrastructure example</h1><div class=lead>Explains using an example how infrastructure data is structured</div><font color=#aa026d><h3 id=introduction>Introduction</h3></font><p>This page gives an example of how the data formats are used to describe an infrastructure in <strong>OSRD</strong>.</p><p>For this purpose, let&rsquo;s take as an example the following toy infrastructure:</p><p><img src=/en/docs/explanation/models/data-models-full-example/svg_diagrams/small_infra_diagram.drawio.en.svg alt="Toy infrastructure diagram"></p><div class="alert alert-info" role=alert><h4 class=alert-heading>Tip</h4>To zoom in on diagrams, click on the edit button that appears when hovering over it.</div><p>This diagram is an overview of the infrastructure with lines and stations only.</p><p>This infrastructure is not meant to be realistic, but rather meant to help illustrate OSRD&rsquo;s data model.
This example will be created step by step and explained along the way.</p><h4 id=the-infrastructure-generator>The infrastructure generator</h4><p>In the <a href=https://github.com/OpenRailAssociation/osrd><em>OSRD</em> repository</a> is a <a href=https://github.com/OpenRailAssociation/osrd/tree/dev/python/railjson_generator>python library</a> designed to help generate infrastructures in a format understood by <em>OSRD</em>.</p><p>The infrastructure discussed in this section can be generated thanks to <a href=https://github.com/OpenRailAssociation/osrd/blob/dev/python/railjson_generator/railjson_generator/scripts/examples/small_infra.py>small_infra.py</a> file. To learn more about the generation scripts, you can check out the related <a href=https://github.com/OpenRailAssociation/osrd/blob/dev/python/railjson_generator/README.md>README</a>.</p><font color=#aa026d><h3 id=tracks>Tracks</h3></font><h4 id=track-sections>Track sections</h4><p>The first objects we need to define are <code>TrackSections</code>. Most other objects are positioned relative to track sections.</p><p>A track section is a section of rail (switches not included). One can chose to divide the tracks of their infrastructure in as many track sections as they like. Here we chose to use the longest track sections possible, which means that between two switches there is always a single track section.</p><p>Track sections is what simulated trains roll onto. They are the abstract equivalent to physical rail sections. Track sections are bidirectional.</p><p>In this example, we define two tracks for the line between the West and North-East stations. We also have overpassing tracks at the North and Mid-West stations for added realism. Finally, we have three separate tracks in the West station, since it&rsquo;s a major hub in our imaginary infrastructure.</p><p><img src=/en/docs/explanation/models/data-models-full-example/svg_diagrams/small_infra_rails.drawio.en.svg alt="Track sections diagram"></p><div class="alert alert-warning" role=alert><h4 class=alert-heading>Important</h4><p><code>TrackSections</code> are represented as arrows in this diagram to stress the fact that they have a <strong>start</strong> and an <strong>end</strong>. It matters as objects positioned on track sections are located using their distance from the <strong>start</strong> of their track section.</p><p>Therefore, to locate an object at the beginning of its track section, set its offset to 0. To move it to the end of its track section, set its offset to the <code>length</code> of the track section.</p></div><p>These attributes are required for the track section to be complete:</p><ul><li><code>length</code>: the length of the track section in meters.</li><li><code>geo</code>: the coordinates in real life (geo is for geographic), in the <a href=https://en.wikipedia.org/wiki/GeoJSON>GeoJSON</a> format.</li><li>cosmetic attributes: <code>line_name</code>, <code>track_name</code>, <code>track_number</code> which are used to indicate the name and labels that were given to the tracks / lines in real life.</li></ul><p>For all track sections in our infrastructure, the <code>geo</code> attributes very much resemble the given diagram.</p><p>For most track sections, their <code>length</code> is proportional to what can be seen in the diagram. To preserve readability, exceptions were made for <em>TA6</em>, <em>TA7</em>, <em>TD0</em> and <em>TD1</em> (which are 10km and 25km).</p><h4 id=node>Node</h4><p>A <code>Node</code> represents a node in the infrastructure. In an OSRD simulation, a train can only move from one section of track to another if they are linked by a node.</p><h5 id=node-types>Node Types</h5><p><code>NodeTypes</code> have two mandatory attributes:</p><ul><li><code>ports</code>: A list of port names. A port is an endpoint connected to a track section.</li><li><code>groups</code>: A mapping between group names and lists of branch (connection between 2 ports) that characterises the different possible positions of the node type</li></ul><p>At any time, all nodes have an active group, and may have an active branch, which always belongs to the active group. During a simulation, changing the active branch inside a group is instantaneous, but changing the active branch across groups (changing the active group) takes configurable time.
This is because a node is a physical object, and changing active branch can involve moving parts of it. <code>Groups</code> are designed to represent the different positions that a node can have. Each <code>group</code> contains the branches that can be used in the associated node position.</p><p>The duration needed to change group is stored inside the <code>Node</code>, since it can vary depending on the physical implementation of the node.</p><p>Our examples currently use five node types. Node types are just like other objects, and can easily be added as needed using <code>extended_switch_type</code>.</p><p><strong>1) Link</strong></p><p>This one represents the link between two sections of track. It has two ports: <em>A</em> and <em>B</em>.</p><p><img src=/en/docs/explanation/models/data-models-full-example/svg_diagrams/link.svg alt="Link diagram"></p><p>It is used in the OSRD model to create a link between two track sections. This is not a physical object.</p><p><strong>2) The Point Switch</strong></p><p>The ubiquitous Y switch, which can be thought of as either two tracks merging, or one track splitting.</p><p>This node type has three ports: <em>A</em>, <em>B1</em> and <em>B2</em>.</p><p><img src=/en/docs/explanation/models/data-models-full-example/svg_diagrams/point_switch.svg alt="Point switch diagram"></p><p>There are two groups, each with one connection in their list: <code>A_B1</code>, which connects <em>A</em> to <em>B1</em>, and <code>A_B2</code> which connects <em>A</em> to <em>B2</em>.</p><p>Thus, at any given moment (except when the switch moves from one group to another), a train can go from <em>A</em> to <em>B1</em> or from <em>A</em> to <em>B2</em> but never to both at the same time. A train cannot go from <em>B1</em> to <em>B2</em>.</p><p>A Point Switch only has two positions:</p><ul><li><em>A</em> to <em>B1</em></li><li><em>A</em> to <em>B2</em></li></ul><p><img src=/en/docs/explanation/models/data-models-full-example/svg_diagrams/PointSwitch_AtoB1.svg alt="point switch position diagram"> <img src=/en/docs/explanation/models/data-models-full-example/svg_diagrams/PointSwitch_AtoB2.svg alt="point switch position diagram"></p><p><strong>3) The Crossing</strong></p><p>This is simply two tracks crossing each other.</p><p>This type has four ports: <em>A1</em>, <em>B1</em>, <em>A2</em> et <em>B2</em>.</p><p><img src=/en/docs/explanation/models/data-models-full-example/svg_diagrams/crossing.svg alt="Cross Switch Diagram"></p><p>It has only one group containing two connections: <em>A1</em> to <em>B1</em> and <em>A2</em> to <em>B2</em>. Indeed this kind of switch is <em>passive</em>: it has no moving parts. Despite having a single group, it is still used by the simulation to enforce route reservations.</p><p>Here are the two different connections this switch type has:</p><ul><li><em>A1</em> to <em>B1</em></li><li><em>A2</em> to <em>B2</em></li></ul><p><img src=/en/docs/explanation/models/data-models-full-example/svg_diagrams/Crossing_A1toB1.svg alt="Cross Switch Diagram positions"> <img src=/en/docs/explanation/models/data-models-full-example/svg_diagrams/Crossing_A2toB2.svg alt="Cross Switch Diagram positions"></p><p><strong>4) The Double slip switch</strong></p><p>This one is more like two point switches back to back. It has four ports: <em>A1</em>, <em>A2</em>, <em>B1</em> and <em>B2</em>.</p><p><img src=/en/docs/explanation/models/data-models-full-example/svg_diagrams/double_slip_crossing.svg alt="Double cross switch diagram"></p><p>However, it has four groups, each with one connection. The four groups are represented in the following diagram:</p><ul><li><em>A1</em> to <em>B1</em></li><li><em>A1</em> to <em>B2</em></li><li><em>A2</em> to <em>B1</em></li><li><em>A2</em> to <em>B2</em></li></ul><p><img src=/en/docs/explanation/models/data-models-full-example/svg_diagrams/DoubleSlipCrossing_A1toB1.svg alt="Diagram of double crossing switch positions"> <img src=/en/docs/explanation/models/data-models-full-example/svg_diagrams/DoubleSlipCrossing_A1toB2.svg alt="Diagram of double crossing switch positions"></p><p><img src=/en/docs/explanation/models/data-models-full-example/svg_diagrams/DoubleSlipCrossing_A2toB1.svg alt="Diagram of double crossing switch positions"> <img src=/en/docs/explanation/models/data-models-full-example/svg_diagrams/DoubleSlipCrossing_A2toB2.svg alt="Diagram of double crossing switch positions"></p><p><strong>5) The Single slip switch</strong></p><p>This one looks more like a cross between a single needle and a crossover. It has four ports: <em>A1</em>, <em>A2</em>, <em>B1</em> and <em>B2</em>.</p><p><img src=/en/docs/explanation/models/data-models-full-example/svg_diagrams/single_slip_crossing.svg alt="Single slip switch diagram"></p><p>Here are the three connections that can be made by this switch:</p><ul><li><em>A1</em> to <em>B1</em></li><li><em>A1</em> to <em>B2</em></li><li><em>A2</em> to <em>B2</em></li></ul><p><img src=/en/docs/explanation/models/data-models-full-example/svg_diagrams/SingleSlipCrossing_A1toB1.svg alt="Diagram of the positions of the single crossing points"> <img src=/en/docs/explanation/models/data-models-full-example/svg_diagrams/SingleSlipCrossing_A1toB2.svg alt="Diagram of the positions of the single crossing points">
<img src=/en/docs/explanation/models/data-models-full-example/svg_diagrams/SingleSlipCrossing_A2toB2.svg alt="Diagram of the positions of the single crossing points"></p><h5 id=back-to-nodes>Back to nodes</h5><p>A <code>Node</code> has three attributes:</p><ul><li><code>node_type</code>: the identifier of the <a href=/en/docs/explanation/models/data-models-full-example/#node-types><code>NodeType</code></a> of this node.</li><li><code>ports</code>: a mapping from port names to track sections extremities.</li><li><code>group_change_delay</code>: the time it takes to change which group of the node is activated.</li></ul><p>The port names must match the ports of the node type chosen. The track section endpoints can be start or end, be careful to chose the appropriate ones.</p><p>Most of our example&rsquo;s nodes are regular point switches. The path from North station to South station has two cross switches. Finally, there is a double cross switch right before the main line splits into the North-East and South-East lines.</p><p><img src=/en/docs/explanation/models/data-models-full-example/svg_diagrams/small_infra_rails_n_points.drawio.en.svg alt="Track sections and points diagram"></p><p>It is important to note that these node types are hard-coded into the project code. Only the <code>extended_node_type</code> added by the user will appear in the railjson.</p><h4 id=curves-and-slopes>Curves and slopes</h4><p><code>Curves</code> and <code>Slopes</code> are instrumental to realistic simulations. These objects are defined as a range between a <code>begin</code> and <code>end</code> offsets of one track section. If a curve / slope spans more than one track section, it has to be added to all of them.</p><p>The slope / curve values are constant on their entire range. For varying curves / slopes, one needs to create several objects.</p><p>Slope values are measured in <em>meters per kilometers</em>, and the curve values are measured in <em>meters</em> (the radius of the curve).</p><div class="alert alert-primary" role=alert>Mind that the <code>begin</code> value should always be smaller than the <code>end</code> value. That is why the curve / slope values can be negative: an uphill slope of 1 going from offset 10 to 0 is the same as a downhill slope of -1 going from offsets 0 to 10.</div><p>In the <a href=https://github.com/OpenRailAssociation/osrd/blob/dev/python/railjson_generator/railjson_generator/scripts/examples/small_infra.py>small_infra.py</a> file, we have slopes on the track sections <em>TA6</em>, <em>TA7</em>, <em>TD0</em> and <em>TD1</em>.</p><p>There are curves as well, on the track sections <em>TE0</em>, <em>TE1</em>, <em>TE3</em> and <em>TF1</em>.</p><font color=#aa026d><h3 id=interlocking>Interlocking</h3></font><p>All objects so far contributed to track topology (shape). Topology would be enough for trains to navigate the network, but not enough to do so safely. to ensure safety, two systems collaborate:</p><ul><li>Interlocking ensures trains are allowed to move forward</li><li>Signaling is the mean by which interlocking communicates with the train</li></ul><h4 id=detectors>Detectors</h4><p>These objects are used to create <a href="https://ressources.data.sncf.com/explore/dataset/lexique-des-acronymes-sncf/table/?sort=abreviation&amp;q=TVD">TVD</a> sections (Track Vacancy Detection section): the track area in between detectors is a TVD section. When a train runs into a detector, the section it is entering becomes occupied. The only function of TVD sections is to locate trains.</p><p>In real life, detectors can be <a href=https://en.wikipedia.org/wiki/Axle_counter>axle counters</a> or <a href=https://en.wikipedia.org/wiki/Track_circuit>track circuits</a> for example.</p><p>For this mean of location to be efficient, detectors need to be placed regularly along your tracks, not too many because of cost, but not too few, because then TVD sections would be very large and trains would need to be very far apart to be told apart, which reduces capacity.</p><p>There often are detectors close to all sides of switches. This way, interlocking is made aware pretty much immediately when a switch is cleared, which is then free to be used again.</p><div class="alert alert-info" role=alert>Let&rsquo;s take a cross switch as an example: if train A is crossing it <em>north</em> to <em>south</em> and train B is coming to cross <em>west</em> to <em>east</em>, then as soon as train A&rsquo;s last car has passed the crossing, B should be able to go, since A is now on a completely unrelated track section.</div><p>In <em>OSRD</em>, detectors are point objects, so all the attributes it needs are its <code>id</code>, and track location (<code>track</code> and <code>offset</code>).</p><p><img src=/en/docs/explanation/models/data-models-full-example/svg_diagrams/small_infra_detectors.drawio.en.svg alt="Infra diagram with all detectors"></p><div class="alert alert-info" role=alert>The clumped up squares represent many detectors at once. Indeed, because some track sections are not represented with their full length, we could not represent all the detectors on the corresponding track section.</div><p>Some notes:</p><ul><li>Between some points, we added only one detector (and not two), because they were really close together, and it would have made no sense to create a tiny TVDS between the two. This situation happened on track sections (<em>TA3</em>, <em>TA4</em>, <em>TA5</em>, <em>TF0</em> and <em>TG3</em>).</li><li>In our infrastructure, there is relatively few track sections which are long enough to require more detectors than just those related to switches. Namely, <em>TA6</em>, <em>TA7</em>, <em>TDO</em>, <em>TD1</em>, <em>TF1</em>, <em>TG1</em> and <em>TH1</em>. For example <em>TD0</em>, which measures 25km, has in fact 17 detectors in total.</li></ul><h4 id=buffer-stops>Buffer stops</h4><p><code>BufferStops</code> are obstacles designed to prevent trains from sliding off dead ends.</p><p>In our infrastructure, there is a buffer stop on each track section which has a loose end. There are therefore 8 buffer stops in total.</p><p>Together with detectors, they set the boundaries of TVD sections (see <a href=/en/docs/explanation/models/data-models-full-example/#detectors>Detectors</a>)</p><h4 id=routes>Routes</h4><p>A <code>Route</code> is an itinerary in the infrastructure. A train path is a sequence of routes. Routes are used to reserve section of path with the interlocking. See the <a href=/fr/docs/reference/design-docs/interlocking/>dedicated documentation</a>.</p><p>It is represented with the following attributes:</p><ul><li><code>entry_point</code> and <code>exit_point</code>: references detectors or buffer stops which mark the beginning and the end of the Route.</li><li><code>entry_point_direction</code> : Direction on a track section to start the route from the <code>entry_point</code>.</li><li><code>switches_direction</code> : A set of directions to follow when we encounter a switch on our Route, to build this Route from <code>entry_point</code> to <code>exit_point</code>.</li><li><code>release_detectors</code>: When a train clears a release detector, resources reserved from the beginning of the route until this detector are released.</li></ul><font color=#aa026d><h3 id=signaling>Signaling</h3></font><p>Thanks to interlocking, trains are located and allowed to move. It&rsquo;s a good start, but meaningless until trains are made aware of it. This is where <code>Signal</code>s come into play: signals react to interlocking, and can be seen by trains.</p><p>How trains react to signals depends on the aspect, kind of signal, and signaling system.</p><p>Here are the most important attributes for signals:</p><ul><li><code>linked_detector</code>: The linked <a href=/en/docs/explanation/models/data-models-full-example/#detectors>detector</a>.</li><li><code>type_code</code>: The type of signal.</li><li><code>direction</code>: The direction it protects, which can simply be interpreted as the way in which it can be seen by an incoming train (since there are lights only on one side&mldr;). Direction is relative to track section orientation.</li><li>Cosmetic attributes like <code>angle_geo</code> or <code>side</code> which control the way in which the signals are displayed in the front-end.</li></ul><p>Here is a visualization of how one can represent a signal, and which direction it protects.</p><p><img src=/en/docs/explanation/models/data-models-full-example/svg_diagrams/signal_dir.en.svg alt="Signal direction example"></p><br><p>The way the signals are arranged is highly dependent on both signaling system and infrastructure manager.</p><p>Here are the basic rules used for this example infrastructure:</p><ul><li>We add two spacing signals (one per direction) for each detector that is cutting a long TVD section into smaller ones.</li><li>Switch entries where a train might have to stop are protected by a signal (which is located outside of the switch TVD section). It must be visible from the direction used to approach the switch. When there are multiple switches in a row, only the first one usually needs protection, as interlocking is usually designed as not to encourage trains stopping in the middle of intersections.</li></ul><p>Note that detectors linked to at least one signal are not represented, as there are not signals without associated detectors in this example.</p><p>To get the <code>id</code> of a detector linked to a signal, take the signal&rsquo;s <code>id</code> and replace <em>S</em> by <em>D</em> (e.g. SA0 -> DA0).</p><p><img src=/en/docs/explanation/models/data-models-full-example/svg_diagrams/small_infra_signals.drawio.en.svg alt="Infra diagram with all signals"></p><div class="alert alert-info" role=alert>On <em>TA6</em>, <em>TA7</em>, <em>TD0</em> and <em>TD1</em> we could not represent all signals because these track sections are very long and have many detectors, hence many signals.</div><font color=#aa026d><h3 id=electrification>Electrification</h3></font><p>To allow electric trains to run on our infrastructure, we need to specify which parts of the infrastructure is electrified.</p><h4 id=catenaries>Catenaries</h4><p><code>Catenaries</code> are objects that represent the overhead wires that power electric trains. They are represented with the following attributes:</p><ul><li><code>voltage</code>: A string representing the type of power supply used for electrification</li><li><code>track_ranges</code>: A list of range of track sections (<code>TrackRanges</code>) covered by this catenary. A <code>TrackRange</code> is composed of a track section id, a <code>begin</code> offset and an <code>end</code> offset.</li></ul><p>In our example infrastructure, we have two <code>Catenaries</code>:</p><ul><li>One with <code>voltage</code> set to <code>"1500"</code>, which covers only <em>TA0</em>.</li><li>One with <code>voltage</code> set to <code>"25000"</code>, which covers all others except <em>TD1</em>.</li></ul><p>This means that only thermal trains can cross the <em>TD1</em> track section.</p><p>Our example also outlines that, unlike its real life counterpart, a single <code>Catenary</code> may cover the whole infrastructure.</p><h4 id=neutral-sections>Neutral Sections</h4><p>In some parts of an infrastructure, the train drivers may be instructed - mainly for safety reasons - to cut the power supply to the train.</p><p>To represent such parts, we use <code>NeutralSections</code>. They are represented mainly with the following attributes:</p><ul><li><code>track_ranges</code>: A list of <code>DirectedTrackRanges</code> (track ranges associated to a direction) which are covered by this neutral section.</li><li><code>lower_pantograph</code>: A boolean indicating whether the train&rsquo;s pantograph should be lowered while in this section.</li></ul><p>In our example infrastructure, we have three <code>NeutralSections</code>: one at the junction of the <code>"1500"</code> and <code>"25000"</code> catenaries, one on <em>TA6</em> and one on <em>TG1</em> and <em>TG4</em>.</p><p>For more details about the model see the <a href=../neutral_sections>dedicated page</a>.</p><font color=#aa026d><h3 id=miscellaneous>Miscellaneous</h3></font><h4 id=operational-points>Operational points</h4><p>Operational point is also known in French as &ldquo;Point Remarquable&rdquo; (PR).
One <code>OperationalPoint</code> is a <strong>collection</strong> of points (<code>OperationalPointParts</code>) of interest.</p><p>For example, it may be convenient (reference point for train operation) to store the location of platforms as parts and group them by station in operational points.
In the same way, a bridge over tracks will be <strong>one</strong> OperationalPoint, but it will have <strong>several</strong> OperationPointParts, one at the intersection of each track.</p><p>In the example infrastructure, we only used operational points to represent stations. Operational point parts are displayed as purple diamonds. Keep in mind a single operational point may contain multiple parts.</p><p><img src=/en/docs/explanation/models/data-models-full-example/svg_diagrams/small_infra_op_points.drawio.en.svg alt="Operational points examples"></p><h4 id=loading-gauge-limits>Loading Gauge Limits</h4><p>These objects are akin to <code>Slopes</code> and <code>Curves</code>: it covers a range of track section, with a <code>begin</code> and an <code>end</code> offset. It represents a restriction on the trains that can travel on the given range, by weight or by train type (freight or passenger).</p><p>We did not put any in our examples.</p><h4 id=speed-sections>Speed Sections</h4><p>The <code>SpeedSections</code> represent speed limits (in meters per second) that are applied on some parts of the tracks. One <code>SpeedSection</code> can span on several track sections, and do not necessarily cover the whole track sections. Speed sections can overlap.</p><p>In our example infrastructure, we have a speed section covering the whole infrastructure, limiting the speed to 300 km/h. On a smaller part of the infrastructure, we applied more restrictive speed sections.</p><p><img src=/en/docs/explanation/models/data-models-full-example/svg_diagrams/speed_sections.en.svg alt="Speed section examples"></p></div><div class=td-content style=page-break-before:always><h1 id=pg-d8a9003e9780b0213913d2b62364ed28>2 - Neutral Sections</h1><div class=lead>Documentation about what they are and how they are implemented</div><h2 id=physical-object-to-model>Physical object to model</h2><h3 id=introduction>Introduction</h3><p>For a train to be able to run, it must either have an energy source on board (fuel, battery, hydrogen, &mldr;) or be supplied with energy throughout its journey.</p><p>To supply this energy, electrical cables are suspended above the tracks: the <em>catenaries</em>. The train then makes contact with these cables thanks to a conducting piece mounted on a mechanical arm: the <em>pantograph</em>.</p><h3 id=neutral-sections>Neutral sections</h3><p>With this system it is difficult to ensure the electrical supply of a train continuously over the entire length of a line. On certain sections of track, it is necessary to cut the electrical supply of the train. These portions are called <strong>neutral sections</strong>.</p><p>Indeed, in order to avoid energy losses along the catenaries, the current is supplied by several substations distributed along the tracks. Two portions of catenaries supplied by different substations must be electrically isolated to avoid short circuits.</p><p>Moreover, the way the tracks are electrified (DC or not for example) can change according to the local uses and the time of installation. It is again necessary to electrically isolate the portions of tracks which are electrified differently. The train must also (except in particular cases) change its pantograph when the type of electrification changes.</p><p>In both cases, the driver is instructed to cut the train&rsquo;s traction, and sometimes even to lower the pantograph.<br>In the French infrastructure, these zones are indicated by announcement, execution and end signs. They also carry the indication to lower the pantograph or not. The portions of track between the execution and end may not be electrified entirely, and may not even have a catenary (in this case the zone necessarily requires lowering the pantograph).<br><em>REV</em> (for reversible) signs are sometimes placed downstream of the end of zone signs. They are intended for trains that run with a pantograph at the rear of the train. These signs indicate that the driver can resume traction safely.</p><p>Additionally, it may sometimes be impossible on a short section of track to place a catenary or to raise the train&rsquo;s pantograph. In this case the line is still considered electrified, and the area without electrification (passage under a bridge for example) is considered as a neutral section.</p><h3 id=rolling-stock>Rolling stock</h3><p>After passing through a neutral section, a train must resume traction. This is not immediate (a few seconds), and the necessary duration depends on the rolling stock.</p><p>In addition, the driver must, if necessary, lower his pantograph, which also takes time (a few tens of seconds) and also depends on the rolling stock.</p><p>Thus, the coasting imposed on the train extends outside the neutral section, since these system times are to be counted from the end of the neutral section.</p><h2 id=data-model>Data model</h2><p>We have chosen to model the neutral sections as the space between the signs linked to it (and not as the precise zone where there is no catenary or where the catenary is not electrified).</p><p>This zone is directional, <em>i.e.</em> associated with a direction of travel, in order to be able to take into account different placements of signs according to the direction. The execution sign of a given direction is not necessarily placed at the same position as the end of zone sign of the opposite direction.</p><p>For a two-way track, a neutral section is therefore represented by two objects.</p><p>The schema is the following</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;lower_pantograph&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#a40000>boolean</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;track_ranges&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>&#34;track&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#a40000>string</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>&#34;start&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#a40000>number</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>&#34;end&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#a40000>number</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>&#34;direction&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#a40000>enum</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;announcement_track_ranges&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>&#34;track&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#a40000>string</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>&#34;start&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#a40000>number</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>&#34;end&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#a40000>number</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>&#34;direction&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#a40000>enum</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><ul><li><code>lower_pantograph</code>: indicates whether the pantograph should be lowered in this section</li><li><code>track_ranges</code>: list of track sections ranges where the train must not traction</li><li><code>announcement_track_ranges</code>: list of track sections ranges between the announcement sign and the execution sign</li></ul><h2 id=display>Display</h2><h3 id=map>Map</h3><p>The zones displayed in the map correspond to the <code>track_ranges</code> of neutral sections, thus are between the execution and end signs of the zone. The color of the zone indicates whether the train must lower its pantograph in the zone or not.</p><p>The direction in which the zone applies is not represented.</p><h3 id=simulation-results>Simulation results</h3><p>In the linear display, it is always the area between EXE and FIN that is displayed.</p><h2 id=pathfinding>Pathfinding</h2><p>Neutral sections are therefore portions of &ldquo;non-electrified&rdquo; track where an electric train can still run (but where it cannot traction).</p><p>When searching for a path in the infrastructure, an electric train can travel through a track section that is not covered by the <code>track_ranges</code> of a catenary object (documentation to be written) only if it is covered by the <code>track_ranges</code> of a neutral section.</p><h2 id=simulation>Simulation</h2><p>In our simulation, we approximate the driver&rsquo;s behavior as follows:</p><ul><li>The coasting is started as soon as the train&rsquo;s head passes the announcement sign</li><li>The system times (pantograph reading and traction resumption) start as soon as the train&rsquo;s head passes the end sign.</li></ul><p>In the current simulation, it is easier to use spatial integration bounds rather than temporal ones. We make the following approximation: when leaving the neutral section, we multiply the system times by the speed at the exit of the zone. The coasting is then extended over the obtained distance. This approximation is reasonable because the train&rsquo;s inertia and the almost absence of friction guarantee that the speed varies little over this time interval.</p><h2 id=improvements-to-be-made>Improvements to be made</h2><p>Several aspects could be improved:</p><ul><li>We do not model the <em>REV</em> signs, all trains therefore only have one pantograph at the front in our simulations.</li><li>System times are approximated.</li><li>The driver&rsquo;s behavior is rather restrictive (coasting could start after the announcement sign).</li><li>The display of the zones is limited: no representation of the direction or the announcement zones.</li><li>These zones are not editable.</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-c2136d18a9b3ae8f9da3ef8869d83664>3 - Rolling stock categories</h1><div class=lead>Defines rolling stock categories</div><p>Categories are groupings of rolling stock, either by their characteristics, performance or by the nature of the services for which they have been designed or are used.</p><p>The same rolling stock can be used for different types of operations and services. This versatility is reflected in the following attributes:</p><ul><li><code>primary_category</code> (required) indicates the main use of a rolling stock</li><li><code>other_categories</code> (optional) indicates other possible uses of a rolling stock</li></ul><p>The primary category of a rolling stock enables several features, such as filtering, differentiated display on charts or network graphic views, and, more broadly, the aggregation of rolling stocks.</p><h4 id=categories-of-rolling-stocks>Categories of rolling stocks</h4><p>The different default rolling stock categories are as follows:</p><ul><li><code>High-speed train</code> (see <a href=https://en.wikipedia.org/wiki/High-speed_rail>High-speed train</a>)</li><li><code>Intercity train</code> (see <a href=https://en.wikipedia.org/wiki/Inter-city_rail>Intercity train</a>)</li><li><code>Regional train</code> (see <a href=https://en.wikipedia.org/wiki/Regional_rail>Regional train</a>)</li><li><code>Commuter train</code> (see <a href=https://en.wikipedia.org/wiki/Commuter_rail>Commuter train</a>)</li><li><code>Freight train</code> (see <a href=https://en.wikipedia.org/wiki/Rail_freight_transport>Freight train</a>)</li><li><code>Fast freight train</code> (same as Freight train, but with a different composition code, <code>ME140</code> instead of <code>MA100</code> for example)</li><li><code>Night train</code> (see <a href=https://en.wikipedia.org/wiki/Sleeping_car>Night train</a>)</li><li><code>Tram-train</code> (see <a href=https://en.wikipedia.org/wiki/Tram-train>Tram-train</a>)</li><li><code>Touristic train</code> (see <a href=https://en.wikipedia.org/wiki/Heritage_railway>Touristic train</a>)</li><li><code>Work train</code> (see <a href=https://en.wikipedia.org/wiki/Work_train>Work train</a>)</li></ul><p>It is also planned that, in the future, a user will be able to create new rolling stock categories directly.</p><h3 id=realistic-open-data-rolling-stocks>Realistic open data rolling stocks</h3><p>To make the application more accessible to users outside the railway industry, such as external contributors and research laboratories, and to prepare for the release of the public playground version of OSRD, several rolling stock created with mock data are available to all users.</p><p>These rolling stocks are designed to cover most simulation scenarios that users may encounter.</p><p>These rolling stocks are not actual rolling stocks, due to confidentiality reasons, but they have been created based on real data to ensure a high level of realism.</p><p>The rolling stocks are provided as <a href=https://github.com/OpenRailAssociation/osrd/tree/dev/tests/data/rolling_stocks>JSON files</a>. We created one representative rolling stock for each category listed above.</p><p>The characteristics of these rolling stocks have been calculated based on the average values of real rolling stocks within each category. Additionally, most of these models are designed to be compatible across various networks: they are primarily bi-mode (supporting multiple electric voltage and current supply types), which is not always the case for real-world rolling stocks.</p><p>An example of rolling stock, a <strong>high-speed train</strong>, is represented below, from the rolling stock editor of the application:</p><p><img src=/en/docs/explanation/models/realistic-rolling-stocks/high-speed-rolling-stock.en.png alt="Rolling stock"></p><h4 id=open-data>Open data</h4><p>Since these rolling stocks are fictional (yet realistic), they can be freely used in projects beyond OSRD.</p><p>To access and use them in the application:</p><ul><li><p><strong>From the open-source playground:</strong> The rolling stocks are available by default.</p></li><li><p><strong>From a locally launched application:</strong> Use the corresponding command in the <a href=https://github.com/OpenRailAssociation/osrd/blob/dev/README.md>README</a> to import the test rolling stocks in your database.</p></li></ul></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="td-footer__left col-6 col-sm-4 order-sm-1"></div><div class="td-footer__right col-6 col-sm-4 order-sm-3"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=GitHub aria-label=GitHub><a target=_blank rel=noopener href=https://github.com/OpenRailAssociation/osrd aria-label=GitHub><i class="fab fa-github"></i></a></li></ul></div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2"><span class=td-footer__copyright>&copy;
2025
<span class=td-footer__authors>OSRD contributors</span></span><span class=td-footer__all_rights_reserved>All Rights Reserved</span></div></div></div></footer></div><style>.markmap>svg{width:100%;height:300px}</style><script>window.markmap={autoLoader:{manual:!0,onReady(){const{autoLoader:e,builtInPlugins:t}=window.markmap;e.transformPlugins=t.filter(e=>e.name!=="prism")}}}</script><script src=https://cdn.jsdelivr.net/npm/markmap-autoloader></script><script src=/js/main.min.70982f4f1de53d56b47d6b66c1ed442a9653a5be8820e0ba651d5d17d9a9bbe1.js integrity="sha256-cJgvTx3lPVa0fWtmwe1EKpZTpb6IIOC6ZR1dF9mpu+E=" crossorigin=anonymous></script><script defer src=/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script><script src=/js/tabpane-persist.js></script></body></html>